{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack:///(webpack)/buildin/global.js","webpack:///./utilities/src/setting_config.js","webpack:///./utilities/src/pickup_const.js","webpack:///./node_modules/inherits/inherits_browser.js","webpack:///./node_modules/readable-stream/lib/_stream_duplex.js","webpack:///./background/src/background_data_store.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/core-util-is/lib/util.js","webpack:///./utilities/src/affiliate_const.js","webpack:///./utilities/src/common_helper.js","webpack:///./node_modules/lodash/isObject.js","webpack:///./utilities/src/rebates_const.js","webpack:///./node_modules/process-nextick-args/index.js","webpack:///./node_modules/safe-buffer/index.js","webpack:///./background/src/factory/data_backend.js","webpack:///./background/src/factory/pickup.js","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/lodash/_baseGetTag.js","webpack:///./node_modules/lodash/_root.js","webpack:///./node_modules/lodash/isObjectLike.js","webpack:///./node_modules/react-chrome-redux/lib/constants/index.js","webpack:///./background/src/application_state_storage.js","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///./node_modules/redux/es/redux.js","webpack:///./node_modules/txml/node_modules/through2/through2.js","webpack:///./utilities/src/common_const.js","webpack:///./node_modules/url/url.js","webpack:///./background/src/coupon/coupon_data_backend.js","webpack:///./node_modules/lodash/_baseAssignValue.js","webpack:///./node_modules/lodash/_defineProperty.js","webpack:///./node_modules/lodash/isFunction.js","webpack:///./node_modules/lodash/_Symbol.js","webpack:///./node_modules/lodash/_freeGlobal.js","webpack:///./node_modules/lodash/eq.js","webpack:///./node_modules/lodash/identity.js","webpack:///./node_modules/lodash/isArrayLike.js","webpack:///./node_modules/lodash/isLength.js","webpack:///./node_modules/lodash/_isIndex.js","webpack:///./background/src/reducers/index.js","webpack:///./background/src/platform/chrome.js","webpack:///./utilities/src/google_analytics_helper.js","webpack:///./background/src/globalState.js","webpack:///./node_modules/readable-stream/lib/_stream_readable.js","webpack:///./node_modules/isarray/index.js","webpack:///./node_modules/events/events.js","webpack:///./node_modules/readable-stream/lib/internal/streams/stream-browser.js","webpack:///./node_modules/buffer/index.js","webpack:///./node_modules/readable-stream/lib/internal/streams/destroy.js","webpack:///./node_modules/readable-stream/lib/_stream_writable.js","webpack:///./node_modules/string_decoder/lib/string_decoder.js","webpack:///./node_modules/readable-stream/lib/_stream_transform.js","webpack:///./background/src/index.js","webpack:///./background/src/factory/pickup_factory.js","webpack:///./background/src/affiliate/affiliate_pickup.js","webpack:///./background/src/affiliate/affiliate_data_backend.js","webpack:///./utilities/src/runtime_helper.js","webpack:///./node_modules/node-libs-browser/node_modules/punycode/punycode.js","webpack:///./node_modules/url/util.js","webpack:///./node_modules/querystring-es3/index.js","webpack:///./node_modules/querystring-es3/decode.js","webpack:///./node_modules/querystring-es3/encode.js","webpack:///./background/src/coupon/coupon_pickup.js","webpack:///./node_modules/react-chrome-redux/lib/index.js","webpack:///./node_modules/react-chrome-redux/lib/store/Store.js","webpack:///./node_modules/lodash/assignIn.js","webpack:///./node_modules/lodash/_copyObject.js","webpack:///./node_modules/lodash/_assignValue.js","webpack:///./node_modules/lodash/_getNative.js","webpack:///./node_modules/lodash/_baseIsNative.js","webpack:///./node_modules/lodash/_getRawTag.js","webpack:///./node_modules/lodash/_objectToString.js","webpack:///./node_modules/lodash/_isMasked.js","webpack:///./node_modules/lodash/_coreJsData.js","webpack:///./node_modules/lodash/_toSource.js","webpack:///./node_modules/lodash/_getValue.js","webpack:///./node_modules/lodash/_createAssigner.js","webpack:///./node_modules/lodash/_baseRest.js","webpack:///./node_modules/lodash/_overRest.js","webpack:///./node_modules/lodash/_apply.js","webpack:///./node_modules/lodash/_setToString.js","webpack:///./node_modules/lodash/_baseSetToString.js","webpack:///./node_modules/lodash/constant.js","webpack:///./node_modules/lodash/_shortOut.js","webpack:///./node_modules/lodash/_isIterateeCall.js","webpack:///./node_modules/lodash/keysIn.js","webpack:///./node_modules/lodash/_arrayLikeKeys.js","webpack:///./node_modules/lodash/_baseTimes.js","webpack:///./node_modules/lodash/isArguments.js","webpack:///./node_modules/lodash/_baseIsArguments.js","webpack:///./node_modules/lodash/isArray.js","webpack:///./node_modules/lodash/isBuffer.js","webpack:///./node_modules/lodash/stubFalse.js","webpack:///./node_modules/lodash/isTypedArray.js","webpack:///./node_modules/lodash/_baseIsTypedArray.js","webpack:///./node_modules/lodash/_baseUnary.js","webpack:///./node_modules/lodash/_nodeUtil.js","webpack:///./node_modules/lodash/_baseKeysIn.js","webpack:///./node_modules/lodash/_isPrototype.js","webpack:///./node_modules/lodash/_nativeKeysIn.js","webpack:///./node_modules/react-chrome-redux/lib/wrap-store/wrapStore.js","webpack:///./node_modules/react-chrome-redux/lib/wrap-store/shallowDiff.js","webpack:///./node_modules/react-chrome-redux/lib/alias/alias.js","webpack:///./background/src/reducers/data.js","webpack:///./node_modules/immutable/dist/immutable.js","webpack:///./node_modules/redux-thunk/es/index.js","webpack:///./background/src/redux_persist_middleware.js","webpack:///./background/src/ichiba/ichiba_pickup.js","webpack:///./background/src/ichiba/ichiba_data_backend.js","webpack:///./background/src/factory/ajax_pickup_factory.js","webpack:///./utilities/src/ajax_handler_const.js","webpack:///./background/src/coupon/coupon_yahoo_ajax_pickup.js","webpack:///./background/src/factory/ajax_pickup.js","webpack:///./node_modules/redux-watch/index.js","webpack:///./node_modules/object-path/index.js","webpack:///./background/src/rebates/rebates.js","webpack:///./utilities/src/XmlParser.js","webpack:///./node_modules/readable-stream/readable-browser.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/readable-stream/lib/internal/streams/BufferList.js","webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/util-deprecate/browser.js","webpack:///./node_modules/readable-stream/lib/_stream_passthrough.js","webpack:///./utilities/src/user_point.js","webpack:///./node_modules/txml/dist/txml.mjs","webpack:///./node_modules/txml/dist/transformStream.mjs"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","obj","g","this","Function","e","window","defaultUrl","host","queryKey","path","cookie_domain","BANNER_DISABLE_OPTION","BANNER_POPUP_USE","BANNER_DISABLE_SEARCH","BANNER_DISABLE_ALL","NO_USE","TIMER_24HOURS","TIMER_30DAYS","DISABLE_COMPLETELY","constructor","IsDefaultOpenRakutenWebsearch","IsSearchHistoryStored","BannerDisableOption","AffiliateOption","AFFILIATE_SETTING_OPTION","DO_NOT_SHOW_BAR","RADIO_INDEX","PickupDisabledTimerSelectedOption","SearchBarHighlight","SearchBarDisplayAlways","COUPON_ADVANCE","RPP","COUPON_PICKUP","ICHIBA_PICKUP","AFFILIATE_PICKUP","COUPON_YAHOO_AJAX_PICKUP","SEARCH","SHOP","AMAZON_SHOPPING_FIELD_KEYWORDS","AMAZON_SHOPPING_K","YAHOO_SHOPPING","YAHOO_SEARCH","GOOGLE_SEARCH","GOOGLE_GLOBAL_SEARCH","AMAZON_SHOPPING_PICKUP","ctor","superCtor","super_","writable","configurable","TempCtor","pna","objectKeys","keys","push","Duplex","util","inherits","Readable","Writable","v","length","method","options","readable","allowHalfOpen","once","onend","_writableState","ended","nextTick","onEndNT","self","end","highWaterMark","undefined","_readableState","destroyed","set","_destroy","err","cb","store","createStore","rootReducer","PlatformSpecific","getBackgroundDataStoreEnhancer","async","ApplicationStateStorage","load","globalState","isDataLoadedFromStorage","loadDataFromStorage","wrapStore","portName","Promise","resolve","platform_api_root","alarms","periodInMinutes","onAlarm","addListener","alarm","clear","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","args","Array","arguments","apply","title","browser","env","argv","version","versions","on","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","objectToString","toString","isArray","arg","isBoolean","isNull","isNullOrUndefined","isNumber","isString","isSymbol","isUndefined","isRegExp","re","isObject","isDate","isError","isFunction","isPrimitive","isBuffer","Buffer","SHOW_BAR","GOOGLE_ANALYTICS_VALUE","BAR","POPUP","TEXT","RENDER","IMAGE","CHILDREN","ALL_AFFILIATES","_url","_patterns","got_pattern_match","RegExp","test","_url_to_parse","_search_param","current_url","require","parse","URLSearchParams","search","_frame","_base_height","_additional_height","fixedElementsOld","document","body","getElementsByClassName","classList","remove","documentElement","style","setProperty","top","fixedElements","slice","getElementsByTagName","filter","x","getComputedStyle","getPropertyValue","fixedElemList","cssPath","el","nodeType","Node","ELEMENT_NODE","selector","nodeName","toLowerCase","id","tagName","sib","nth","previousSibling","unshift","parentNode","join","forEach","fe","getBoundingClientRect","offsetWidth","offsetHeight","getClientRects","add","Element","sheet","createElement","innerHTML","appendChild","ex","console","log","stack","google_analytics_value","preventDefault","href","currentTarget","validateRuntimeOnUserInteraction","runtime","sendMessage","url","_mutation_list","_amazon_assistant_flag","_callback_method","_callback_args","relevant_mutations","_mutation","addedNodes","removedNodes","mutation","relevant_nodes","from","node","HTMLElement","matches","AMAZON_ASSISTANT_IFRAME_FILTER","parseInt","height","addEventListener","port","message","onDisconnect","_port","sender","tab","tab_id","tabs","lastError","postMessage","setLongTimeout","callback","timeout_ms","timeoutHandle","maxDelay","Math","pow","type","time","Date","getTime","ON_DEFAULT","ON_REBATES","ON_AFFILIATE_FROM_OTHER","ON_SUPPRESS_POPUP","ON_TRACK_URL","link","comment","domainRegex","tokenAvailable","fixedCashBack","urlName","setLink","setComment","setDomainRegex","regex","setTokenAvailable","status","setFixedCashBack","cashbackstatus","setUrlName","_domainName","_counter","_lastUpdateTime","is_targeted","expire_time","target_group","indexOf","fn","arg1","arg2","arg3","TypeError","buffer","copyProps","src","dst","SafeBuffer","encodingOrOffset","alloc","allocUnsafe","allocUnsafeSlow","size","fill","encoding","buf","SlowBuffer","_response","fetch","credentials","json","error","text","_data","headers","_domain_details","domain_details","init","_store","is_pickup_enabled","check_overlapping_pickups","_page_url","reset","pickup_banner_disabled_time","getState","data","_extension_settings","ExtensionSetting","BANNER_DISABLED_TIMER","dispatch","global","pickup_disabled_timer","show_pickup_bar","get_data","then","sendMessageByPort","pickup_type","pickup_name","pickup_data","webpackPolyfill","deprecate","paths","children","getRawTag","symToStringTag","freeGlobal","freeSelf","root","DISPATCH_TYPE","STATE_TYPE","PATCH_STATE_TYPE","DIFF_STATUS_UPDATED","DIFF_STATUS_REMOVED","loadState","varname","handler_for_undefined","storage","local","result","output","JSON","load_storage_api","loadSettingState","setting_name","setting_default_class","setting_default_class_captured","allSettled","EXTENSION_SETTING","SEARCHBAR_SETTING","REBATE_ADDITIONAL_DISCOUNT_TARGET_INFO","saveAll","_defineProperty","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","_objectSpread2","target","source","getOwnPropertyDescriptors","defineProperties","formatProdErrorMessage","code","$$observable","observable","randomString","random","substring","split","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","isPlainObject","proto","getPrototypeOf","reducer","preloadedState","enhancer","_ref2","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","subscribe","listener","isSubscribed","index","splice","action","replaceReducer","nextReducer","_ref","outerSubscribe","observer","observeState","next","unsubscribe","legacy_createStore","combineReducers","reducers","reducerKeys","finalReducers","shapeAssertionError","finalReducerKeys","assertReducerShape","state","hasChanged","nextState","_i","_key","previousStateForKey","nextStateForKey","bindActionCreator","actionCreator","bindActionCreators","actionCreators","boundActionCreators","compose","_len","funcs","reduce","a","b","applyMiddleware","middlewares","_dispatch","middlewareAPI","chain","map","middleware","Transform","DestroyableTransform","opts","_destroyed","chunk","enc","through2","construct","transform","flush","destroy","t2","_transform","_flush","Through2","override","assign","objectMode","POSTINSTALL_PAGE_URL","CONST_RAKUTEN_WEBSEARCH","KEY_ESCAPE","KEY_ENTER","punycode","Url","protocol","slashes","auth","hostname","hash","query","pathname","urlParse","relative","resolveObject","format","protocolPattern","portPattern","simplePathPattern","unwise","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","unsafeProtocol","hostlessProtocol","slashedProtocol","querystring","parseQueryString","slashesDenoteHost","u","queryIndex","splitter","uSplit","replace","rest","trim","simplePath","exec","substr","lowerProto","match","atSign","hostEnd","hec","lastIndexOf","decodeURIComponent","parseHost","ipv6Hostname","hostparts","part","newpart","j","k","charCodeAt","validParts","notHost","bit","toASCII","h","ae","esc","encodeURIComponent","escape","qm","stringify","charAt","rel","tkeys","tk","tkey","rkeys","rk","rkey","relPath","shift","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","pop","authInHost","last","hasTrailingSlash","up","isAbsolute","CouponDataBackend","DataBackend","super","_keyword_param","_keyword_value","getURLParam","PICKUP_BAR_COUPON_URL","PICKUP_BAR_COUPON_SID","_fetchServerJson","PICKUP_BAR_RPP_URL","getNative","func","baseGetTag","tag","other","isLength","reIsUint","omnibox","onInputEntered","update","reduxPersistMiddleware","thunk","tracking_id","category","getGACid","cid","floor","now","ReadableState","EventEmitter","EElistenerCount","emitter","Stream","OurUint8Array","Uint8Array","debugUtil","debug","debuglog","StringDecoder","BufferList","destroyImpl","kProxyEvents","stream","isDuplex","readableObjectMode","hwm","readableHwm","readableHighWaterMark","defaultHwm","pipes","pipesCount","flowing","endEmitted","reading","sync","needReadable","emittedReadable","readableListening","resumeScheduled","defaultEncoding","awaitDrain","readingMore","decoder","read","_read","readableAddChunk","addToFront","skipChunkCheck","er","emitReadable","onEofChunk","chunkInvalid","_uint8ArrayToBuffer","addChunk","write","maybeReadMore","needMoreData","_undestroy","undestroy","isPaused","setEncoding","howMuchToRead","head","computeNewHighWaterMark","emitReadable_","flow","maybeReadMore_","nReadingNextTick","resume_","fromList","ret","list","hasStrings","str","nb","tail","copyFromBufferString","copy","copyFromBuffer","fromListPartial","endReadable","endReadableNT","xs","nOrig","doRead","pipe","dest","pipeOpts","endFn","stdout","stderr","unpipe","onunpipe","unpipeInfo","hasUnpiped","onclose","onfinish","ondrain","onerror","ondata","cleanedUp","needDrain","pipeOnDrain","increasedAwaitDrain","pause","event","_events","resume","dests","ev","res","wrap","_this","paused","_fromList","arr","ReflectOwnKeys","R","Reflect","ReflectApply","receiver","getOwnPropertyNames","NumberIsNaN","Number","isNaN","reject","errorListener","resolver","eventTargetAgnosticAddListener","handler","flags","addErrorHandlerIfEventEmitter","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","_getMaxListeners","that","_addListener","prepend","events","existing","warning","newListener","warned","w","String","count","warn","onceWrapper","fired","wrapFn","_onceWrap","wrapped","_listeners","unwrap","evlistener","unwrapListeners","arrayClone","listenerCount","wrapListener","removeEventListener","RangeError","setMaxListeners","getMaxListeners","doError","context","position","originalListener","spliceOne","rawListeners","eventNames","base64","ieee754","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","__proto__","ArrayBuffer","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","string","isEncoding","actual","fromString","checked","val","fromObject","assertSize","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","start","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","arrayIndexOf","indexSize","arrLength","valLength","readUInt16BE","foundIndex","found","hexWrite","offset","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","min","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","fromCharCode","decodeCodePointsArray","INSPECT_MAX_BYTES","foo","subarray","typedArraySupport","poolSize","_augment","species","_isBuffer","compare","y","pos","swap16","swap32","swap64","equals","inspect","max","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","out","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","stringtrim","base64clean","emitErrorNT","readableDestroyed","writableDestroyed","errorEmitted","ending","finished","CorkedRequest","entry","finish","corkReq","pendingcb","corkedRequestsFree","onCorkedFinish","asyncWrite","setImmediate","WritableState","internalUtil","realHasInstance","nop","writableObjectMode","writableHwm","writableHighWaterMark","finalCalled","noDecode","decodeStrings","writing","corked","bufferProcessing","onwrite","writecb","writelen","onwriteStateUpdate","finishMaybe","onwriteError","needFinish","bufferedRequest","clearBuffer","afterWrite","lastBufferedRequest","prefinished","bufferedRequestCount","_write","writev","_writev","final","_final","doWrite","onwriteDrain","holder","allBuffers","isBuf","callFinal","need","prefinish","getBuffer","current","_","hasInstance","writeAfterEnd","valid","validChunk","newChunk","decodeChunk","writeOrBuffer","cork","uncork","setDefaultEncoding","endWritable","nenc","retried","_normalizeEncoding","normalizeEncoding","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8CheckByte","byte","utf8CheckExtraBytes","total","utf8CheckIncomplete","afterTransform","ts","_transformState","transforming","writechunk","rs","needTransform","writeencoding","done","_this2","err2","TabController","TabData_","mainFrameRequestId","mainFrameRedirects","searchbarStatus","pickupData","page","pickupDataPromise","resolvePickupDataPromise","pickupDataPromiseResolve","openedTabsData_","addTab","tabId","removeTab","replaceTab","oldTabId","newTabId","dataRef","enumTabs","tabIdKey","getTabData_","onBeforeRequestInMainFrame","requestId","onBeforeRedirectInMainFrame","statusCode","redirectUrl","httpstatus","getRedirectsInMainFrame","updateSearchBarStatus","getSearchBarStatus","getPickupDataPromise","onPickupStateFetchStart","setPickupState","getPickupState","setPickupDataPage","data_page","getPickupDataPage","RTBbg","content","clsid","platform_specific_clsid","imgDir","toolid","loginCheckTime","loadTime","messageReadTime","rebates","pickup","usrPointInfo","url_access_data","RakutenWebSearch","Rebates","pickup_factory","PickupFactory","ajax_pickup_factory","AjaxPickupFactory","waitForStoreToBeLoaded","updateIconInAllTabs","prepareRakutenBarData","getTbuid","tbuid","maybeCallLoad","getRtbSess","getABTestSettings","checkBannerSettingTimer","openPostInstallPage","getOSVersion","navigator","userAgent","lastUpdateTime","rakutenBarInfoConfig_update_time","currentTime","REBATES_XML2_SERVER_INTERVAL","response","xmlParser","XmlParser","getAttributeValueByTagName","cookies","cookie","checkURLResponse","popup_url","getSubwindow","sp","isRakutenAsDefault","popupUrl","getVersion","passPickupDataPageToPopup","checkLogin","getTgmCount","kuchisuCount","yamawakeInfo","getPageZoom","activetabs","currenttab","getZoomSettings","tabid","settings","defaultZoomFactor","refreshRebatesCampaign","getCampaignLists","campaignList","date","requestUrl","header","islogin","messageCount","nmsgtxt","setBadgeText","setBadgeBackgroundColor","color","randomNumber","PICKUP_BAR_ABTEST_URL_V2","isPickupGo","isCouponGo","isSearchSERPPageGo","allCampaigns","element","success","channel","abTestSettings","textElement","textContent","label","setUserPointInfo","clearRebatesHoverData","logged_in","login","setIcon","buildIconPath_","pickup_found","updateIconInTab","getManifest","need_call_load","callLoad","last_call_load","_getDateString","doCallLoad","uuid","yyyy","getFullYear","mm","getMonth","dd","getDate","_setTimeout","time_ms","milliseconds","currentDate","sleepSync","getFormatTimeStamp","useMillisecond","zpadn","z","padStart","getHours","getMinutes","getSeconds","getMilliseconds","doRakutenBar","referer","userNavigate","rakutenBarInfo_active","rakutenBarInfo_domain","timestamp","timestampMilliseconds","timezoneoffset","getTimezoneOffset","redirects","rdrct","rakutenBarInfo_send_number","rakutenBarInfo_accessurl","JsonCreator","catch","sJson","ltm","rakutenBarInfo_cookie","ref","rakutenBarInfo_userAgent","tzo","tid","rakutenBarInfo_osVersion","unu","tsm","resetRakutenPickupForTab","doRakutenPickupForTab","url_host","parseURL","tab_url","toolbaritem","pickup_url","getAttribute","popup_port","currentWindow","active","activeTab","pickup_data_page","google_analytics_call","GOOGLE_ANALYTICS_TRACKING_ID","setDefaultPage","extensionSetting","clearSerpHistory","clearHistory","reloadTopPage","reload","_generateGuid","S4","getNewUserRequest","UserPoint","your_name","totalPoint","yourUsablePoint","termPoint","your_point_tmp","cash","futureGrantedPoint","rank","disabled_time","setRevertPopupSetting","extensionSettings","onSuspend","onMessage","request","sendResponse","scripting","executeScript","file","settingsWindowId","settingsTabId","SETTINGS_URL","getBrowserSearchEngineSettingUrl","windows","getCurrent","win","currentTab","rebates_campaignInfo","StartUpTasks","onStartup","TAGEME_URL","onCreated","activateTagemeTab","gotTab","onRemoved","onReplaced","onInstalled","details","reason","extension_setting","RebatesOption","migrateRebatesOptionsSettings","mapRebatesOptionToBanner","setUninstallURL","platform_feedbackurl","extensionSettingWatcher","CONST_EXTENSION_SETTING","loginSettingWatcher","CONST_LOGIN_SETTING","newVal","oldVal","objectPath","rebatesLoginStatusChanged","REBATES_SEARCH_POPUP_DISABLED_24HOURS","REBATES_SEARCH_POPUP_DISABLED_30DAYS","onFocusChanged","info","rzCookie","checkMetaTagIfURLGoesTOPPage","onActivated","activeInfo","webRequest","onBeforeRequest","requestDetails","findMatchPattern","referrer","_ajax_pickup","getAjaxPickupInstance","is_ajax_pickup_enabled","urls","types","getAjaxRequestTypes","checkAutoActivations","checkUrlForSuppression","onBeforeRedirect","onConnect","msg","pref","diff","rhs","showRebatesHoverAndCampaignHover","_pickup","getPickupInstance","findMatchedRebatesMerchantDomain","isAffiliatePickup","AffiliatePickup","isCouponPickup","CouponPickup","isIchibaPickup","IchibaPickup","_domain","AFFILIATE_DOMAINS","domain_pattern","COUPON_DOMAINS","ICHIBA_DOMAINS","Pickup","affiliate_data_backend","AffiliateDataBackend","PICKUP_CLASS_NAME","_fic_response","doFreeItemCheck","_ffii_response","fetchFreeItemInfo","doAffiliateIDCheck","_aii_response","fetchAffiliateItemInfo","DEFAULT_PB_ID","me_id","item_id","link_info","alt_image_urls","values","hybrid_link","_pb_id","_me_id","_item_id","_afl_link_url","AFFILIATE_BAR_AFFILIATE_LINK_URL","afl_item_info_url","AFFILIATE_BAR_GET_FREE_ITEM_INFO","_afl_check_url","AFFILIATE_BAR_FREE_ITEM_CHECK","AFFILIATE_BAR_AFFILIATE_ID_CHECK","checkRuntimeValid","alive","alert","maxInt","regexPunycode","regexNonASCII","regexSeparators","errors","stringFromCharCode","mapDomain","parts","ucs2decode","extra","counter","ucs2encode","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","baseMinusTMin","base","decode","input","basic","oldi","baseMinusT","inputLength","bias","encode","handledCPCount","basicLength","q","currentValue","handledCPCountPlusOne","qMinusT","prop","qs","sep","eq","regexp","maxKeys","kstr","vstr","idx","stringifyPrimitive","ks","f","coupon_data_backend","_page_type","page_type","_is_this_domain_target","PICKUP_COUPON_PAGE_TYPE","check_disabled_timer_active","fetch_coupon_data","matched_domain_details","responseCoupon","fetchCouponInfo","keyword","items","coupon_keyword","PICKUP_COUPON_TYPE","scid","google_analytics_code_display_ca","google_analytics_code_click_ca","responseCouponRPP","fetchCouponRPPInfo","adList","google_analytics_code_display_rpp","google_analytics_code_click_rpp","alias","Store","_Store2","_interopRequireDefault","_wrapStore2","_alias2","default","_createClass","props","descriptor","Constructor","protoProps","staticProps","_assignIn","_assignIn2","_constants","_ref$state","_ref$extensionId","extensionId","instance","_classCallCheck","readyResolved","readyPromise","readyResolve","chrome","connect","replaceState","payload","patchState","difference","change","deleteProperty","_this3","resp","bgErr","copyObject","createAssigner","keysIn","assignIn","assignValue","baseAssignValue","customizer","isNew","newValue","objValue","baseIsNative","getValue","isMasked","toSource","reIsHostCtor","funcProto","objectProto","funcToString","reIsNative","nativeObjectToString","isOwn","unmasked","uid","coreJsData","maskSrcKey","IE_PROTO","baseRest","isIterateeCall","assigner","sources","guard","identity","overRest","setToString","nativeMax","otherArgs","thisArg","baseSetToString","shortOut","constant","nativeNow","lastCalled","stamp","isArrayLike","isIndex","arrayLikeKeys","baseKeysIn","baseTimes","isArguments","isTypedArray","inherited","isArr","isArg","isBuff","isType","skipIndexes","iteratee","baseIsArguments","isObjectLike","propertyIsEnumerable","stubFalse","freeExports","freeModule","baseIsTypedArray","baseUnary","nodeUtil","nodeIsTypedArray","typedArrayTags","freeProcess","isPrototype","nativeKeysIn","isProto","Ctor","_shallowDiff","_shallowDiff2","promiseResponder","dispatchResult","send","dispatchResponder","dispatchResponse","_sender","connectState","prevState","onMessageExternal","onConnectExternal","oldObj","newObj","aliases","Immutable","fromJS","stateobj","rebates_info","RebatesInfo","rebates_close_popup","rebates_activated_sites","rebates_auto_activation_info","getInitialState","cur_data","toJS","item","domain","SLICE$0","createClass","superClass","Iterable","isIterable","Seq","KeyedIterable","isKeyed","KeyedSeq","IndexedIterable","isIndexed","IndexedSeq","SetIterable","isAssociative","SetSeq","maybeIterable","IS_ITERABLE_SENTINEL","maybeKeyed","IS_KEYED_SENTINEL","maybeIndexed","IS_INDEXED_SENTINEL","maybeAssociative","isOrdered","maybeOrdered","IS_ORDERED_SENTINEL","Keyed","Indexed","Set","NOT_SET","CHANGE_LENGTH","DID_ALTER","MakeRef","SetRef","OwnerID","arrCopy","newArr","ii","ensureSize","iter","__iterate","returnTrue","wrapIndex","uint32Index","NaN","wholeSlice","begin","resolveBegin","resolveIndex","resolveEnd","defaultIndex","EMPTY_SEQ","EMPTY_REPEAT","EMPTY_RANGE","REAL_ITERATOR_SYMBOL","iterator","ITERATOR_SYMBOL","Iterator","iteratorValue","iteratorResult","iteratorDone","hasIterator","getIteratorFn","isIterator","maybeIterator","getIterator","iterable","iteratorFn","emptySequence","toSeq","seq","maybeIndexedSeqFromValue","ObjectSeq","seqFromValue","toKeyedSeq","fromEntrySeq","keyedSeqFromValue","entrySeq","toIndexedSeq","indexedSeqFromValue","toSetSeq","ArraySeq","_array","_object","_keys","IterableSeq","_iterable","IteratorSeq","_iterator","_iteratorCache","isSeq","maybeSeq","seqIterate","reverse","useKeys","cache","_cache","maxIndex","__iterateUncached","seqIterator","__iteratorUncached","converter","fromJSWith","parentJSON","isPlainObj","fromJSDefault","toList","toMap","is","valueA","valueB","valueOf","deepEqual","__hash","notAssociative","entries","every","flipped","cacheResult","allEqual","bSize","has","Repeat","times","_value","invariant","condition","Range","step","abs","_start","_end","_step","ceil","Collection","KeyedCollection","IndexedCollection","SetCollection","KEYS","VALUES","ENTRIES","of","__toString","toArray","__iterator","notSetValue","iterations","searchValue","this$0","possibleIndex","offsetValue","imul","smi","i32","STRING_HASH_CACHE_MIN_STRLEN","stringHashCache","hashString","STRING_HASH_CACHE_SIZE","STRING_HASH_CACHE_MAX_SIZE","cachedHashString","hashCode","usingWeakMap","weakMap","UID_HASH_KEY","canDefineProperty","uniqueID","getIENodeHash","objHashUID","isExtensible","hashJSObj","WeakMap","assertNotInfinite","Map","emptyMap","isMap","withMutations","maybeMap","IS_MAP_SENTINEL","keyValues","_root","updateMap","setIn","keyPath","updateIn","deleteIn","updater","updatedValue","updateInDeepMap","keyPathIter","isNotSet","existingValue","nextExisting","nextUpdated","forceIterator","__ownerID","__altered","merge","mergeIntoMapWith","mergeWith","merger","iters","mergeIn","mergeDeep","deepMerger","mergeDeepWith","deepMergerWith","mergeDeepIn","sort","comparator","OrderedMap","sortFactory","sortBy","mapper","mutable","asMutable","wasAltered","__ensureOwner","asImmutable","MapIterator","iterate","ownerID","makeMap","EMPTY_MAP","MapPrototype","ArrayMapNode","BitmapIndexedNode","bitmap","nodes","HashArrayMapNode","HashCollisionNode","keyHash","ValueNode","_type","_reverse","_stack","mapIteratorFrame","mapIteratorValue","prev","__prev","newRoot","newSize","didChangeSize","didAlter","updateNode","isLeafNode","mergeIntoNode","newNode","idx1","SIZE","idx2","iterables","mergeIntoCollectionWith","nextValue","collection","mergeIntoMap","popCount","canEdit","newArray","removeIn","removed","exists","MAX_ARRAY_MAP_SIZE","createNodes","isEditable","newEntries","keyHashFrag","MAX_BITMAP_INDEXED_SIZE","including","expandedNodes","expandNodes","newBitmap","newNodes","newLen","after","spliceOut","spliceIn","newCount","MIN_HASH_ARRAY_MAP_SIZE","excluding","packedII","packedNodes","packNodes","keyMatch","subNode","List","empty","emptyList","isList","makeList","VNode","setSize","maybeList","IS_LIST_SENTINEL","listNodeFor","_origin","setListBounds","newTail","_tail","getTailOffset","_capacity","updateVNode","_level","updateList","insert","oldSize","mergeIntoListWith","iterateList","DONE","ListPrototype","removeBefore","level","originIndex","newChild","removingFirst","oldChild","editable","editableVNode","removeAfter","sizeIndex","EMPTY_LIST","EMPTY_ORDERED_MAP","left","right","tailPos","iterateNodeOrLeaf","to","iterateLeaf","iterateNode","origin","capacity","nodeHas","lowerNode","newLowerNode","rawIndex","owner","oldOrigin","oldCapacity","newOrigin","newCapacity","newLevel","offsetShift","oldTailOffset","newTailOffset","oldTail","beginIndex","maxSize","emptyOrderedMap","isOrderedMap","maybeOrderedMap","makeOrderedMap","omap","_map","_list","updateOrderedMap","newMap","newList","flip","ToKeyedSequence","indexed","_iter","_useKeys","ToIndexedSequence","ToSetSequence","FromEntriesSequence","flipFactory","flipSequence","makeSequence","reversedSequence","cacheResultThrough","mapFactory","mappedSequence","reverseFactory","filterFactory","predicate","filterSequence","sliceFactory","originalSize","resolvedBegin","resolvedEnd","sliceSize","resolvedSize","sliceSeq","skipped","isSkipping","skipWhileFactory","skipSequence","skipping","concatFactory","isKeyedIterable","singleton","concatSeq","flatten","sum","flattenFactory","depth","flatSequence","stopped","flatDeep","currentDepth","defaultComparator","maxFactory","maxCompare","comp","zipWithFactory","keyIter","zipper","zipSequence","iterators","isDone","steps","some","reify","validateEntry","resolveSize","iterableClass","Record","defaultValues","hasInitialized","RecordType","names","setProp","setProps","RecordTypePrototype","_name","_defaultValues","RecordPrototype","valueSeq","indexedIterable","recordName","defaultVal","_empty","makeRecord","likeRecord","record","emptySet","isSet","maybeSet","IS_SET_SENTINEL","fromKeys","keySeq","updateSet","union","intersect","originalSet","subtract","OrderedSet","__make","EMPTY_SET","SetPrototype","__empty","makeSet","emptyOrderedSet","isOrderedSet","maybeOrderedSet","EMPTY_ORDERED_SET","OrderedSetPrototype","makeOrderedSet","Stack","emptyStack","isStack","unshiftAll","maybeStack","IS_STACK_SENTINEL","_head","peek","makeStack","pushAll","EMPTY_STACK","StackPrototype","mixin","methods","keyCopier","__toJS","toObject","toOrderedMap","toOrderedSet","toSet","toStack","__toStringMapper","returnValue","find","findEntry","sideEffect","separator","joined","isFirst","initialReduction","reduction","useFirst","reduceRight","reversed","not","butLast","isEmpty","countBy","grouper","groups","countByFactory","entriesSequence","entryMapper","filterNot","findKey","findLast","findLastEntry","findLastKey","first","flatMap","coerce","flatMapFactory","searchKey","getIn","searchKeyPath","nested","groupBy","isKeyedIter","groupByFactory","hasIn","isSubset","isSuperset","keyOf","keyMapper","lastKeyOf","maxBy","neg","defaultNegComparator","minBy","skip","amount","skipLast","skipWhile","skipUntil","take","takeLast","takeWhile","takeSequence","iterating","takeWhileFactory","takeUntil","ordered","keyed","murmurHashOfSize","hashMerge","hashIterable","IterablePrototype","quoteString","contains","mapEntries","mapKeys","KeyedIterablePrototype","defaultZipper","findIndex","removeNum","numArgs","spliced","findLastIndex","interpose","interposedSequence","interposeFactory","interleave","zipped","interleaved","zip","zipWith","factory","createThunkMiddleware","extraArgument","withExtraArgument","ichiba_data_backend","IchibaDataBackend","fetch_pickup_data","responseProduct","fetchProduct","responseSPU","fetchSPU","product","PICKUP_BAR_PRODUCT_BASE_URL","PICKUP_BAR_SPU_URL","isYahooAjaxPickup","CouponYahooAjaxPickup","YAHOO_AJAX_DOMAINS","AjaxPickup","ajax_coupon_data_backend","request_details","tab_info","_request_details","defaultCompare","oldValue","toStr","getKey","intKey","hasShallowProperty","getShallowPropertySafely","proxy","getShallowProperty","doNotReplace","currentPath","includeInheritedProps","ensureExists","at","coalesce","defaultValue","nextObj","del","mod","withInheritedProps","DomainEntities","shoppingURL","activationCode","domainMatchPatterns","cashBackText","getShoppingURL","getActivationCode","getMatchPattern","getCashBackText","getFixedCashBack","getUrlName","CampaignList","campaignId","campaignLink","campaignName","campaignType","campaignStartDate","campaignCoupons","couponStores","CampaignCoupon","description","expires","postedDate","storeId","featured","typeId","CouponStore","storeName","jp_ktn_storeName","jp_hgn_storeName","smallLogo","cashBack","isFixedCashBack","RebatesHoverImages","inactivated_image","activated_image","RebatesHoverStatus","is_ready_show_up","is_activated","RebatesToolbarCampaign","imageUri","linkUrl","pointsBackBgImage","forwardUrl","campaignInfo","campaignSummary","setImageUri","image","setLinkUrl","setPointsBackBgImage","domainentities","metaData","affiliateLinks","paidLinkPatterns","domainListURL","DEFAULT_DOMAIN_ENTITIES_URL","fetchMetaTag","getRebatesAdditionalDiscountTargetInfo","getMerchantDomainEntities","getAffiliateLinksList","initRebatesConfig","CAMPAIGN_INFO_URL","rebatesResponse","campaigns","campaign","stores","coupons","selectionList","getRandomSelection","selectedCoupon","sel","getCouponStoreList","COUPON_STORE_INFO_URL","storeResponse","storeInfo","attributes","storeName_en_JP","storeName_katakana_JP","storeName_hiragana_JP","totalReward","range","high","getDomainEntities","shoppingCount","domainEntities","domains","shopper","rebatesStoresEntry","target_info","rebates_additional_discount_target_info","time_of_now","MEMBER_DETAILS_URL","member_details","REBATES_MEMBER_DETAILS_INTERVAL","targetSet","REBATES_DOMAIN_FULL_ADDRESS","de","matchPattern","display","reward","percent","escapeRegExp","AFFILIATE_LINKS_URL","affiliateResponse","paidLinks","temp_affiliate_links","temp_affiliate_links_patterns","generateRebatesInfo","url_domain","linkGenerator","isTokenExisting","extractAllText","upperLimit","indexes","_domainEntities","mayShowRebatesPopUp","_tabId","currentWorkflowState","rebates_workflowState","REBATES_WORKFLOW_STATE","checkAndUpdateCampaignHoverState","campaign_hover_state","REBATES_CAMPAIGN_HOVER_VISIBILITY_COUNT","REBATES_CAMPAIGN_HOVER_EXPIRATION_TIME_LIMIT","mayShowRebatesCampaignHover","host_domain","URL","rebates_campaign_hover_states","getCurrentStateForTab","setCurrentStateForTab","_newState","isURLRebateLink","REBATES_MATCH_PATTERN","RAKUTEN_LOGIN_PATTERN","RAKUTEN_LOGIN_PATTERN_OMNI","isURLAffiliateLink","isURLStoreLink","isPaidLinkPatterns","newWorkflowState","checkNewWorkflowState","tab_activation_info","tab_ready_to_activate","autoActivateRebatesHover","showRebatesHover","clearRebatesAutoActivationData","is_ready_to_activate","activated_data","is_popup","checkAndUpdateActivatedRebatesHover","merchant_activation_info","is_merchant_activated","rebates_hover_status","is_hover_pop_up","activated_site","isActivatedPageAlreadyExpired","closed_sites","site","REBATES_TOOLBAR_CAMPAIGN_URL","hoverImages","images","rebatespopupnonactiveimg","rebatespopupactiveimg","rebates_popup","hover_images","campaignToolbar","imageuri","linkurl","rebatesbgimg","showupCampaignIfMeetTheRequirements","toolbarCampaign","linkUrlArray","textArray","show_rebates_campaign_hover","toolbar_campaign","_getElementsByTagName","elements","getElementsByTagNameRecursive","child","_getAttribute","xmlResponse","xmlDoc","getXmlDocument","replaceNameSpace","txml","bindRecursive","getTextContentRecursive","searchString","attribute","PassThrough","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","len2","encodeChunk","lookup","num","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","rt","LN2","custom","Timeout","clearFn","_id","_clearFn","scope","setInterval","clearInterval","close","unref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","clearImmediate","registerImmediate","html","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","handle","runIfPresent","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","port1","port2","script","onreadystatechange","removeChild","attachEvent","task","config","localStorage","trace","S","keepComments","keepWhitespace","openBracketCC","closeBracketCC","minusCC","slashCC","exclamationCC","singleQuoteCC","doubleQuoteCC","openCornerBracketCC","closeCornerBracketCC","parseChildren","closeStart","parsedText","startCommentPos","cdataEndIndex","startDoctype","encapsuled","parseNode","parseText","trimmed","parseName","NoChildNodes","noChildNodes","parseString","startChar","startpos","attrValue","attrName","simplify","setPos","kids","_attributes","simplifyLostLess","parentAttributes","dept","O","writeChildren","writeNode","N","toContentString","tDom","getElementById","simplified","tXml","classname","transformStream","parseOptions","lastPos","commentEnd"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 51);\n","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","export const CONST_EXTENSION_SETTING = \"ExtensionSetting\";\r\nexport const CONST_SEARCHBAR_SETTING = \"SearchBarSetting\";\r\nexport const CONST_LOGIN_SETTING = \"login\";\r\nexport const CONST_RAKUTEN_WEBSEARCH = {\r\n                                            defaultUrl: \"https://websearch.rakuten.co.jp\",\r\n                                            host: \"websearch.rakuten.co.jp\",\r\n                                            queryKey: \"qt\",\r\n                                            path: \"/Web\",\r\n                                            cookie_domain:\".websearch.rakuten.co.jp\",\r\n                                        };\r\nimport { AFFILIATE_SETTING_OPTION } from '../../utilities/src/affiliate_const'\r\n//Coupon, Pickup, and Rebates Enable/Disable options for user\r\nexport const BANNER_DISABLE_OPTION = {\r\n    BANNER_POPUP_USE: 0,\r\n    BANNER_DISABLE_SEARCH: 1,\r\n    BANNER_DISABLE_ALL:2,\r\n    NO_USE: 3\r\n}\r\nexport const BANNER_DISABLED_TIMER = {\r\n    TIMER_24HOURS: 0,\r\n    TIMER_30DAYS: 1,\r\n    DISABLE_COMPLETELY:2,\r\n}\r\nexport const BANNER_DISABLE_GOOGLE_ANALYTICS_OPTIONS = ['24h', '30d', 'always'];\r\n\r\nexport class EXTENSION_SETTING {\r\n    constructor() {\r\n        this.IsDefaultOpenRakutenWebsearch = false;\r\n        this.IsSearchHistoryStored = true;\r\n        this.BannerDisableOption = BANNER_DISABLE_OPTION.BANNER_POPUP_USE;\r\n        this.AffiliateOption = AFFILIATE_SETTING_OPTION.DO_NOT_SHOW_BAR.RADIO_INDEX ;//do not show\r\n        this.PickupDisabledTimerSelectedOption = null;\r\n    }\r\n}\r\n\r\nexport class SEARCHBAR_SETTING {\r\n    constructor() {\r\n        this.SearchBarHighlight = true;\r\n        this.SearchBarDisplayAlways = false;\r\n    }\r\n}\r\n","//export const PICKUP_BAR_ABTEST_URL = \"https://websearch.rakuten.co.jp/v1/client/abtest\";\nexport const PICKUP_BAR_ABTEST_URL_V2 = \"https://websearch.rakuten.co.jp/v2/client/abtest\";\nexport const PICKUP_BAR_PRODUCT_BASE_URL = \"https://api.toolbar.rakuten.co.jp/json/getProductRecommendation\";\nexport const PICKUP_BAR_SPU_URL = \"https://api.toolbar.rakuten.co.jp/json/getNcpPointInfo?carrierCode=0&viewType=top\";\nexport const PICKUP_BAR_COUPON_URL =    \"https://couponad.marketplace.rakuten.co.jp/api/v1/keywordSearch/coupon.json?query=\";\nexport const PICKUP_BAR_RPP_URL =           \"https://grp07.ias.rakuten.co.jp/swad/?to=4&l=10033&en=2&s=1&ver=20&o=20096&q=\";\nexport const PICKUP_BAR_COUPON_SID = \"&sid=017-00049-001\";\nexport const PICKUP_SLIDER_DISPLAY_ITEM_COUNT = 4;\n\nexport const PICKUP_COUPON_TYPE = {\n    COUPON_ADVANCE: 1,\n    RPP: 2\n}\n\nexport const PICKUP_CLASS_NAME = {\n    COUPON_PICKUP: 1,\n    ICHIBA_PICKUP: 2,\n    AFFILIATE_PICKUP: 3,\n    COUPON_YAHOO_AJAX_PICKUP: 4,\n}\n\nexport const PICKUP_COUPON_WIDTH = 210;\n//WIDTH OF ALL ELEMENTS EXCEPTS SLIDER\nexport const PICKUP_COUPON_NON_SLIDER_WIDTH = 630;\n//search pages => google.co.jp and yahoo.co.jp SERP pages\n//shop => amazon jp and yahoo jp shopping Search result pages\nexport const PICKUP_COUPON_PAGE_TYPE = {\n    SEARCH: \"search\",\n    SHOP: \"shop\"\n}\n//Amazon is using both keywords \"field-keywords\" and \"k\" to indicate the query term\n//during various redirects and history changes. We need to capture both of them for\n//proper handling, especially in Firefox. Hence, we are using two constants for it\nexport const COUPON_DOMAINS = {\n    AMAZON_SHOPPING_FIELD_KEYWORDS:    {\n        \"domain_code\":1,\n        \"domain_pattern\":/^https?:\\/\\/www\\.amazon\\.co\\.jp\\/.*&field-keywords=./,\n        \"google_analytics_code_display_ca\":\"pck_coupon_display_amazon_search\",\n        \"google_analytics_code_click_ca\":\"pck_coupon_click_amazon_search\",\n        \"google_analytics_code_display_rpp\":\"pck_coupon_rpp_display_amazon_search\",\n        \"google_analytics_code_click_rpp\":\"pck_coupon_rpp_click_amazon_search\",\n        \"google_analytics_code_display_banner\": \"pck_banner_coupon_display\",\n        \"google_analytics_code_click_banner\": \"pck_banner_coupon_click\",\n        \"scid\": \"amazon\",\n        \"keyword\": \"field-keywords\",\n        \"page_type\": \"shop\",\n        \"height\": 72\n    },\n    AMAZON_SHOPPING_K:    {\n        \"domain_code\":7,\n        //Example URL\n        //https://www.amazon.co.jp/s?k=nike&__mk_ja_JP=%E3%82%AB%E3%82%BF%E3%82%AB%E3%83%8A&ref=nb_sb_noss\n        \"domain_pattern\":/^https?:\\/\\/www\\.amazon\\.co\\.jp\\/s\\?.*k=.*/,\n        \"google_analytics_code_display_ca\":\"pck_coupon_display_amazon_search\",\n        \"google_analytics_code_click_ca\":\"pck_coupon_click_amazon_search\",\n        \"google_analytics_code_display_rpp\":\"pck_coupon_rpp_display_amazon_search\",\n        \"google_analytics_code_click_rpp\":\"pck_coupon_rpp_click_amazon_search\",\n        \"google_analytics_code_display_banner\": \"pck_banner_coupon_display\",\n        \"google_analytics_code_click_banner\": \"pck_banner_coupon_click\",\n        \"scid\": \"amazon\",\n        \"keyword\": \"k\",\n        \"page_type\": \"shop\",\n        \"height\": 72\n    },\n    YAHOO_SHOPPING:     {\n        \"domain_code\":2,\n        \"domain_pattern\":/^https?:\\/\\/shopping\\.yahoo\\.co\\.jp\\//,\n        \"google_analytics_code_display_ca\":\"pck_coupon_display_yshpping_search\",\n        \"google_analytics_code_click_ca\":\"pck_coupon_click_yshpping_search\",\n        \"google_analytics_code_display_rpp\":\"pck_coupon_rpp_display_yshpping_search\",\n        \"google_analytics_code_click_rpp\":\"pck_coupon_rpp_click_yshpping_search\",\n        \"google_analytics_code_display_banner\": \"pck_banner_coupon_display\",\n        \"google_analytics_code_click_banner\": \"pck_banner_coupon_click\",\n        \"scid\": \"yahooshopping\",\n        \"keyword\": \"p\",\n        \"page_type\": \"shop\",\n        \"height\": 72,\n    },\n    YAHOO_SEARCH:       {\n        \"domain_code\":3,\n        \"domain_pattern\":/^https?:\\/\\/search\\.yahoo\\.co\\.jp\\//,\n        \"google_analytics_code_display_ca\":\"pck_coupon_display_yahoo_search\",\n        \"google_analytics_code_click_ca\":\"pck_coupon_click_yahoo_search\",\n        \"google_analytics_code_display_rpp\":\"pck_coupon_rpp_display_yahoo_search\",\n        \"google_analytics_code_click_rpp\":\"pck_coupon_rpp_click_yahoo_search\",\n        \"google_analytics_code_display_banner\": \"pck_banner_coupon_display\",\n        \"google_analytics_code_click_banner\": \"pck_banner_coupon_click\",\n        \"scid\": \"yahoosearch\",\n        \"keyword\": \"p\",\n        \"page_type\": \"search\",\n        \"height\": 62\n    },\n    GOOGLE_SEARCH:      {\n        \"domain_code\":4,\n        \"domain_pattern\":/^https?:\\/\\/www\\.google\\.co\\.jp\\//,\n        \"google_analytics_code_display_ca\":\"pck_coupon_display_google_search\",\n        \"google_analytics_code_click_ca\":\"pck_coupon_click_google_search\",\n        \"google_analytics_code_display_rpp\":\"pck_coupon_rpp_display_google_search\",\n        \"google_analytics_code_click_rpp\":\"pck_coupon_rpp_click_google_search\",\n        \"google_analytics_code_display_banner\": \"pck_banner_coupon_display\",\n        \"google_analytics_code_click_banner\": \"pck_banner_coupon_click\",\n        \"scid\": \"google\",\n        \"keyword\": \"q\",\n        \"page_type\": \"search\",\n        \"height\": 62,\n    },\n    GOOGLE_GLOBAL_SEARCH: {\n        \"domain_code\":5,\n        \"domain_pattern\":/^https?:\\/\\/www\\.google\\.com\\//,\n        \"google_analytics_code_display_ca\":\"pck_coupon_display_google_search\",\n        \"google_analytics_code_click_ca\":\"pck_coupon_click_google_search\",\n        \"google_analytics_code_display_rpp\":\"pck_coupon_rpp_display_google_search\",\n        \"google_analytics_code_click_rpp\":\"pck_coupon_rpp_click_google_search\",\n        \"google_analytics_code_display_banner\": \"pck_banner_coupon_display\",\n        \"google_analytics_code_click_banner\": \"pck_banner_coupon_click\",\n        \"scid\": \"google\",\n        \"keyword\": \"q\",\n        \"page_type\": \"search\",\n        \"height\": 62,\n    }\n}\n\nexport const ICHIBA_DOMAINS = {\n    AMAZON_SHOPPING_PICKUP:    {\n        \"domain_code\":6,\n        \"domain_pattern\":/^https?:\\/\\/www\\.amazon\\.co\\.jp\\//,\n        \"page_type\": \"shop\",\n        \"scid\": \"amazon\",\n        \"height\": 50\n    }\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\n{\n  // avoid scope creep, the keys array can then be collected\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  pna.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});\n\nDuplex.prototype._destroy = function (err, cb) {\n  this.push(null);\n  this.end();\n\n  pna.nextTick(cb, err);\n};","import { createStore } from 'redux';\nimport { wrapStore } from 'react-chrome-redux';\nimport rootReducer from './reducers';\nimport PlatformSpecific from 'PlatformSpecific';\nimport ApplicationStateStorage from './application_state_storage'\nimport { globalState } from './globalState'\n\nexport const store = createStore(rootReducer, {}, PlatformSpecific.getBackgroundDataStoreEnhancer());\n\nasync function loadDataFromStorage() {\n    await ApplicationStateStorage.load();\n    //console.log('Loaded data from storage!');\n    globalState.isDataLoadedFromStorage = true;\n}\n\nvoid loadDataFromStorage();\n\nwrapStore(store, {\n    portName: 'background_data'\n});\n\n// Function to defer the logic until the data is loaded in store (because StorageAPI is now async)\nexport const waitForStoreToBeLoaded = async() => {\n    return new Promise((resolve) => {\n        if (globalState.isDataLoadedFromStorage === true) {\n            resolve(true);\n            return;\n        }\n\n        platform_api_root.alarms.create(\"StorageInterval\", {\n            periodInMinutes: 0.002\n        });\n        platform_api_root.alarms.onAlarm.addListener((alarm) => {\n            if (alarm.name === \"StorageInterval\") {\n                // Check the loaded flag\n                if (globalState.isDataLoadedFromStorage === true) {\n                    platform_api_root.alarms.clear(\"StorageInterval\");\n                    resolve(true);\n                }\n            } else {\n                resolve(true);\n            }\n        });\n    });\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('buffer').Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n","export const AFFILIATE_BAR_AFFILIATE_LINK_URL = \"https://partner.afl.rakuten.co.jp/api/76/5/AflLink\";\nexport const AFFILIATE_BAR_AFFILIATE_ID_CHECK = \"https://partner.afl.rakuten.co.jp/api/76/8/AfIdVerification\";\nexport const AFFILIATE_BAR_GET_FREE_ITEM_INFO = \"https://affiliate.rakuten.co.jp/freelink/data\";\nexport const AFFILIATE_BAR_FREE_ITEM_CHECK = \"https://affiliate.rakuten.co.jp/freelink/check\";\nexport const AFFILIATE_SETTING_OPTION = {\n    SHOW_BAR: {RADIO_INDEX:0, GOOGLE_ANALYTICS_VALUE: \"Setting_affiliate_true_\"},\n    DO_NOT_SHOW_BAR: {RADIO_INDEX:1, GOOGLE_ANALYTICS_VALUE: \"Setting_affiliate_false_\"}\n}\nexport const AFFILIATE_COPY_BUTTON_GOOGLE_ANALYTICS_CODES = {\n    BAR: \"Pck_affiliate_copy1_button\",\n    POPUP: \"Pck_affiliate_copy2_button\"\n} ;\nexport const AFFILIATE_PREVIEW_CONTENT_MODE = {\n    TEXT: \"text\",\n    RENDER: \"render\"\n} ;\n\nexport const ANCHOR_CONTROL_CONTENT_MODE = {\n    TEXT: \"text\",\n    IMAGE: \"image\",\n    CHILDREN: \"children\"\n} ;\nexport const DEFAULT_PB_ID = \"_RTtool10000000\";\nexport const AFFILIATE_DOMAINS = {\n        ALL_AFFILIATES:    {\n        \"domain_code\":1,\n        \"domain_pattern\":/^https?:\\/\\/(item|books|brandavenue|sm|biccamera)\\.rakuten\\.co\\.jp\\//,\n        \"height\": 75\n    }\n}","import { AMAZON_ASSISTANT_IFRAME_FILTER} from './common_const'\nimport {validateRuntimeOnUserInteraction} from './runtime_helper';\n\nexport const DISCONNECTED_PORT_NAME = 'DISCONNECTED_PORT';\n//Wrapper function to enable calling setTimeout beyong it's max limit\nexport function setLongTimeout(callback, timeout_ms, timeoutHandle){\n    const maxDelay = Math.pow(2, 31)-1;\n     //if we have to wait more than max time, need to recursively call this function again\n    if(timeout_ms > maxDelay) {\n        //now wait until the max wait time passes then call this function again with\n        //requested wait - max wait we just did, make sure and pass callback\n        timeoutHandle = setTimeout(\n            function(){\n                setLongTimeout(callback, (timeout_ms - maxDelay), timeoutHandle);\n            },\n            maxDelay);\n        }\n    else {\n        //if we are asking to wait less than max, finally just do regular setTimeout and call callback\n      timeoutHandle = setTimeout(callback, timeout_ms);\n    }\n}\n\nexport function getURLParam(_url_to_parse, _search_param){\n    const _url = require('url');\n    let current_url = _url.parse(_url_to_parse);\n    let search_params = new URLSearchParams(current_url.search);\n    return search_params.get(_search_param);\n}\n\nexport function parseURL(_url_to_parse){\n    const _url = require('url');\n    return _url.parse(_url_to_parse);\n}\n\nexport function findMatchPattern(_url, _patterns) {\n    let got_pattern_match = false;\n\n    for (let i in _patterns) {\n        let r = new RegExp(_patterns[i]);\n        got_pattern_match = r.test(_url);\n        if (got_pattern_match) {\n            break;\n        }\n    }\n    return got_pattern_match;\n}\n\nexport function sendMessageByPort(port, message) {\n  try {\n    port.onDisconnect.addListener(_port => {\n        _port.name = DISCONNECTED_PORT_NAME;\n    });\n    if (port.name != DISCONNECTED_PORT_NAME) {\n        if(port.sender && port.sender.tab){\n            const tab_id = port.sender.tab.id ? port.sender.tab.id : 0;\n            platform_api_root.tabs.get(tab_id, () => {\n                if(!platform_api_root.runtime.lastError){\n                    port.postMessage(message);\n                }\n            });\n        }else{\n            port.postMessage(message);\n        }\n\n    }\n  } catch(e) {\n    console.log('sendMessageByPort failed:', e);\n  }\n}\n\nexport function handleMutationCallback(_mutation_list, _amazon_assistant_flag, _callback_method, _callback_args = null) {\n    const relevant_mutations = _mutation_list.filter((_mutation) => (_amazon_assistant_flag?_mutation.addedNodes.length:_mutation.removedNodes.length) > 0);\n    relevant_mutations.forEach(function(mutation) {\n        const relevant_nodes = Array.from((_amazon_assistant_flag?mutation.addedNodes:mutation.removedNodes)).filter((node) => (node instanceof HTMLElement) && node.matches(AMAZON_ASSISTANT_IFRAME_FILTER));\n        if(relevant_nodes.length > 0) {\n            const node = relevant_nodes[0];\n            const node_height = node.offsetHeight>0?node.offsetHeight:parseInt(node.style.height, 10);\n            if(node_height < 90) {\n                if(_amazon_assistant_flag) {\n                    node.addEventListener('load', () => {\n                        _callback_method({\"isAmazonAssistantVisible\": _amazon_assistant_flag}, _callback_args);\n                    });\n                }\n                else {\n                    _callback_method({\"isAmazonAssistantVisible\": _amazon_assistant_flag}, _callback_args);\n                }\n            }\n        }\n    });\n}\n\n//We add margin-top to page to move the contents of the page down to make space for our affiliate bar. The fixed elements stay on their location and get hidden\n// or displaced inconsistently. We transform all fixed elements which are within the range of our bar's height and visible to render them correctly.\nexport function handleFixedElements(_frame, _base_height, _additional_height){\n    try {\n        let fixedElementsOld = document.body.getElementsByClassName(\"fixed_elem_fix\")\n        while (fixedElementsOld.length) {\n            fixedElementsOld[0].classList.remove('fixed_elem_fix');\n        }\n\n        //Add Transition Effect to Adding Affiliate Bar\n        let _pageRoot = document.documentElement;\n        _pageRoot.style.setProperty('margin-top', (_base_height + _additional_height) + \"px\", 'important');\n        _frame.style.top = _additional_height + \"px\";\n        //Get List of all Elements in the host page which are fixed.\n        const fixedElements = Array.prototype.slice.call(document.body.getElementsByTagName(\"*\"), 0).filter(x => getComputedStyle(x, null).getPropertyValue(\"position\") === \"fixed\");\n        let fixedElemList = [];\n        //This function calculates css path to reach the element starting from top\n        let cssPath = function(el) {\n            let path = [];\n            while (el.nodeType === Node.ELEMENT_NODE) {\n                let selector = el.nodeName.toLowerCase();\n                if (el.id) {\n                    selector += '#' + el.id;\n                } else if (el.tagName.toLowerCase() != \"body\" &&\n                            el.tagName.toLowerCase() != \"html\") {\n                    let sib = el, nth = 0;\n                    while (sib.nodeType === Node.ELEMENT_NODE && (sib = sib.previousSibling)) {\n                        nth++;\n                    }\n                    selector += \":nth-child(\"+nth+\")\";\n                }\n                path.unshift(selector);\n                el = el.parentNode;\n            }\n            return path.join(\" > \");\n        }\n        //For all fixed elements meeting our criteria attach the new class\n        fixedElements.forEach(fe => {\n            if(fe.tagName.toLowerCase() === \"iframe\") {\n                return;\n            }\n            const rect = fe.getBoundingClientRect()\n            const distanceFromWindowTop = rect.top\n            if((distanceFromWindowTop < _base_height) && !!(fe.offsetWidth || fe.offsetHeight || fe.getClientRects().length)) {\n                fe.classList.add(\"fixed_elem_fix\");\n                if((fe instanceof Element) && fe.id != _frame.id) {\n                    fixedElemList.push(cssPath(fe) + \".fixed_elem_fix\");\n                }\n            }\n        });\n        //Add the new style\n        let sheet = document.createElement('style')\n        sheet.innerHTML = fixedElemList.join(\",\") + \"{transform: translateY(\"+ (_base_height + _additional_height) +\"px) !important;}\";\n        document.body.appendChild(sheet);\n        }\n    catch(ex){\n        console.log(ex, ex.stack);\n        console.log(\"Error in Fixing position:fixed elements. Some page elements might be hidden behind the affiliate bar.\");\n    }\n}\n\nexport function handleGeneralBarItemClick(e, google_analytics_value) {\n  e.preventDefault();\n  // Save `href` before checking the runtime as the event object will be lost\n  // by the time the callback is executed.\n  const href = e.currentTarget.href;\n  validateRuntimeOnUserInteraction(() => {\n    platform_api_root.runtime.sendMessage({\n        method: \"google_analytics\",\n        value: google_analytics_value\n    });\n    platform_api_root.runtime.sendMessage({\n        method: \"createTab\",\n        url: href\n    });\n  });\n}\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","const REBATES_DOMAIN_PREFIX = '';\n//const REBATES_DOMAIN_PREFIX = 'qa1-'; // QA testing domain prefix for Rebates.\n\nexport const REBATES_DOMAIN = `${REBATES_DOMAIN_PREFIX}www.rebates.jp`;\nexport const REBATES_DOMAIN_FULL_ADDRESS = `https://${REBATES_DOMAIN}`;\nexport const REBATES_IMAGES_DOMAIN = `https://${REBATES_DOMAIN_PREFIX}static.rebates.jp`;\nexport const CAMPAIGN_INFO_URL = `${REBATES_DOMAIN_FULL_ADDRESS}/apis/v1/campaigns?type=Hot Coupons`;\nexport const REBATES_TOOLBAR_CAMPAIGN_URL = `${REBATES_DOMAIN_FULL_ADDRESS}/apis/v1/campaigns?filterBy=toolbarEnabled`;\nexport const CAMPAIGN_MEASURMENT_PARAM = `?utm_medium=toolbar&utm_campaign=toolbar_dashboard_hotdeals&utm_source=web&utm_content=&utm_term=&utm_size=&utm_pub=&utm_ebs=MHP`;\nexport const COUPON_STORE_INFO_URL = `${REBATES_DOMAIN_FULL_ADDRESS}/apis/v1/stores?fields=default,summary,attributes&id=`;\nexport const DEFAULT_DOMAIN_ENTITIES_URL = `${REBATES_DOMAIN_FULL_ADDRESS}/apis/v1/domains/stores?channel=2`;\nexport const SHOPPING_URL = `${REBATES_DOMAIN_FULL_ADDRESS}/apis/v1/shopping/tickets/stores/2423/stores/2423?s=toolbar&interstitial=true&channelId=2&apiautologintoken=`;\nexport const STATIC_GUIDE_URL = `${REBATES_DOMAIN_FULL_ADDRESS}/static/guide/?s=toolbar&utm_medium=toolbar&utm_campaign=bnr_guide&utm_source=web&utm_content=&utm_term=&utm_size=&utm_pub=&utm_ebs=HP`;\nexport const DFPAD_CONTENT_URL = 'https://websearch.rakuten.co.jp/static/extension/dfpad.html';\nexport const AFFILIATE_LINKS_URL = `${REBATES_DOMAIN_FULL_ADDRESS}/api/v1/toolbar/affiliate/list`;\nexport const MEMBER_DETAILS_URL = `${REBATES_DOMAIN_FULL_ADDRESS}/apis/v1/members/details`;\nexport const TOP_PAGE_URL_BEFORE_ACTIVATE_BANNER = `${REBATES_DOMAIN_FULL_ADDRESS}/?s=toolbar&utm_medium=toolbar&utm_campaign=bnr_beforeactivate&utm_source=web&utm_content=&utm_term=&utm_size=&utm_pub=&utm_ebs=HP`;\nexport const TOP_PAGE_URL_AFTER_ACTIVATE_BANNER = `${REBATES_DOMAIN_FULL_ADDRESS}/?s=toolbar&utm_medium=toolbar&utm_campaign=bnr_afteractivate&utm_source=web&utm_content=&utm_term=&utm_size=&utm_pub=&utm_ebs=MHP`;\nexport const TOP_PAGE_URL = `${REBATES_DOMAIN_FULL_ADDRESS}?s=toolbar&utm_medium=toolbar&utm_campaign=bnr_static&utm_source=web&utm_content=&utm_term=&utm_size=&utm_pub=&utm_ebs=HP`;\nexport const REBATES_DOMAIN_ENTITIES_INTERVAL = 1000*60*15;\nexport const REBATES_AFFILIATE_LINKS_INTERVAL = 86400000;\nexport const REBATES_SEARCH_POPUP_DISABLED_24HOURS = 86400000;\nexport const REBATES_SEARCH_POPUP_DISABLED_30DAYS = 86400000 * 30;\nexport const REBATES_ACTIVATED_DOMAIN_INTERVAL = 1000*60*30;\nexport const REBATES_XML2_SERVER_INTERVAL = 1000*7*24*60*60;\nexport const REBATES_MEMBER_DETAILS_INTERVAL = 1000*60*60*24;\nexport const REBATES_LOGO = `https://image.infoseek.rakuten.co.jp/content/toolbar/parts/rebates_logo.png`;\nexport const REBATES_LOCAL_STORAGE = \"http://rebates.jp:state\";\nexport const REBATES_CAMPAIGN_POPOUT_TIMEOUT_VALUE=8000;\nexport const REBATES_CAMPAIGN_HOVER_EXPIRATION_TIME_LIMIT = 1000*60*60*24*7;\nexport const REBATES_CAMPAIGN_HOVER_VISIBILITY_COUNT = 3;\nexport const REBATES_DEFAULT_STORE_EXCLUSION = \"help/store-exceptions/?s=toolbar&utm_medium=toolbar&utm_campaign=toolbar_bnr_excl&utm_source=web&utm_content=&utm_term=&utm_size=&utm_pub=&utm_ebs=LP\";\nexport const REBATES_LOGO_SVG=`${REBATES_IMAGES_DOMAIN}/content/static/images/icons/rebates_pc_32px.svg`;\nexport const REBATES_WORKFLOW_STATE = {\n    ON_DEFAULT: 0,\n    ON_REBATES: 1,\n    ON_AFFILIATE_FROM_OTHER:2,\n    ON_SUPPRESS_POPUP: 3,\n    ON_TRACK_URL: 4 //add this state to handle multiple affiliate redirect\n}\nexport const REBATES_MATCH_PATTERN = `^(http|https)://${REBATES_DOMAIN}`;\nexport const RAKUTEN_LOGIN_PATTERN = `^(http|https)://(grp03.id|app).rakuten.co.jp`;\nexport const RAKUTEN_LOGIN_PATTERN_OMNI = `^(http|https)://(stg.login.account|login.account).rakuten.com`;\n\n// This function exists because we need to check whether the activated site is still within certain time limit.\n// Every 6 hours we check with server if the activated site is still a valid site\nexport function isActivatedPageAlreadyExpired(time) {\n    let duration = new Date().getTime() - time;\n    if (duration > REBATES_ACTIVATED_DOMAIN_INTERVAL) {\n        return true;\n    }\n    return false;\n}\n\nexport class RebatesInfo {\n    constructor() {\n        this.link = REBATES_DOMAIN_FULL_ADDRESS;\n        this.comment = '';\n        this.domainRegex = '';\n        this.tokenAvailable = false;\n        this.fixedCashBack = true;\n        this.urlName = '';\n    }\n\n    setLink(link) {\n        this.link = link;\n    }\n\n    setComment(comment) {\n        this.comment = comment;\n    }\n\n    setDomainRegex(regex) {\n        this.domainRegex = regex;\n    }\n\n    setTokenAvailable(status){\n        this.tokenAvailable = status;\n    }\n\n    setFixedCashBack(cashbackstatus){\n        this.fixedCashBack = cashbackstatus;\n    }\n    setUrlName(urlName){\n        this.urlName = urlName;\n    }\n}\n\nexport class RebatesCampaignHoverState {\n    constructor() {\n        this._domainName = '';\n        this._counter = 0;\n        //based on the logic this filed used as last update date, _expirationDate is confused\n        this._lastUpdateTime = new Date().getTime();\n    }\n\n    get lastUpdateTime() {\n        return this._lastUpdateTime;\n    }\n\n    set lastUpdateTime(value) {\n        this._lastUpdateTime = value;\n    }\n\n    get domainName() {\n        return this._domainName;\n    }\n\n    set domainName(value) {\n        this._domainName = value;\n    }\n\n    get counter() {\n        return this._counter;\n    }\n\n    set counter(value) {\n        this._counter = value;\n    }\n}\n\n\nexport class REBATE_ADDITIONAL_DISCOUNT_TARGET_INFO {\n    constructor() {\n        this.is_targeted = false;\n        this.expire_time = 0;\n        this.target_group = ''\n    }\n}\n","'use strict';\n\nif (typeof process === 'undefined' ||\n    !process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = { nextTick: nextTick };\n} else {\n  module.exports = process\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","export default class DataBackend {\r\n\r\n    constructor() {}\r\n\r\n    async _fetchServerJson(_url) {\r\n        try {\r\n            const _response = await fetch(_url, {credentials: \"same-origin\"}); // Call the fetch function passing the url of the API as a parameter\r\n            const _json = await _response.json();\r\n            return _json;\r\n        } catch (err) {\r\n            console.error(`Error when fetching ${_url}: ${err}`);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    async _fetchServerText(_url) {\r\n        const _response = await fetch(_url, {credentials: \"same-origin\"}); // Call the fetch function passing the url of the API as a parameter\r\n        const _text = await _response.text();\r\n        return _text;\r\n    }\r\n\r\n    async _sendServerJson(_url, _data) {\r\n        const _response = await fetch(_url, {\r\n                            method: \"post\",\r\n                            headers: {\r\n                                'Accept': 'application/json',\r\n                                'Content-Type': 'application/json'\r\n                            },\r\n                            //make sure to serialize your JSON body\r\n                            body: _data\r\n                        });\r\n        // Call the fetch function passing the url of the API as a parameter\r\n        const _json = await _response.json();\r\n        return _json;\r\n    }\r\n\r\n    async _sendServerText(_url, _data) {\r\n        const _response = await fetch(_url, {\r\n                            method: \"post\",\r\n                            headers: {\r\n                                'Content-Type': 'text/plain'\r\n                            },\r\n                            body: _data\r\n                        });\r\n        // Call the fetch function passing the url of the API as a parameter\r\n        const _text = await _response.text();\r\n        return _text;\r\n    }\r\n}","import {sendMessageByPort} from '../../../utilities/src/common_helper';\r\nimport { BANNER_DISABLED_TIMER, BANNER_DISABLE_OPTION } from '../../../utilities/src/setting_config';\r\n\r\nexport default class Pickup {\r\n    constructor(_domain_details) {\r\n        this.domain_details = _domain_details;\r\n    }\r\n\r\n    init(_port, _store) {\r\n        this.port = _port;\r\n        this.store = _store;\r\n    }\r\n\r\n    is_pickup_enabled() {\r\n        return false;\r\n    }\r\n\r\n    check_overlapping_pickups() {\r\n        return false;\r\n    }\r\n\r\n    async get_data(_page_url) {\r\n        return null;\r\n    }\r\n\r\n    reset() {\r\n        const pickup_banner_disabled_time = this.store.getState().data.pickup_banner_disabled_time;\r\n        if (pickup_banner_disabled_time &&\r\n            pickup_banner_disabled_time <= (new Date()).getTime()){\r\n            let _extension_settings = this.store.getState().data.ExtensionSetting;\r\n            if(_extension_settings.PickupDisabledTimerSelectedOption != BANNER_DISABLED_TIMER.DISABLE_COMPLETELY){\r\n                _extension_settings.PickupDisabledTimerSelectedOption = null;\r\n                _extension_settings.BannerDisableOption = BANNER_DISABLE_OPTION.BANNER_POPUP_USE;\r\n                this.store.dispatch({ type: 'SET_EXTENSION_SETTING', data: _extension_settings });\r\n                this.store.dispatch({ type: 'CLEAR_PICKUP_BANNER_DISABLED_TIME' });\r\n                clearTimeout(global.pickup_disabled_timer);\r\n            }\r\n        }\r\n    }\r\n\r\n    show_pickup_bar(_page_url) {\r\n        this.get_data(_page_url).then((_data) => {\r\n            if(_data != null) {\r\n                sendMessageByPort(this.port, {\r\n                                pickup_type: this.pickup_name,\r\n                                pickup_data: _data\r\n                                }\r\n                );\r\n            }\r\n        });\r\n    }\r\n}","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// Message type used for dispatch events\n// from the Proxy Stores to background\nvar DISPATCH_TYPE = exports.DISPATCH_TYPE = 'chromex.dispatch';\n\n// Message type for state update events from\n// background to Proxy Stores\nvar STATE_TYPE = exports.STATE_TYPE = 'chromex.state';\n\n// Message type for state patch events from\n// background to Proxy Stores\nvar PATCH_STATE_TYPE = exports.PATCH_STATE_TYPE = 'chromex.patch_state';\n\n// The `change` value for updated or inserted fields resulting from shallow diff\nvar DIFF_STATUS_UPDATED = exports.DIFF_STATUS_UPDATED = 'updated';\n\n// The `change` value for removed fields resulting from shallow diff\nvar DIFF_STATUS_REMOVED = exports.DIFF_STATUS_REMOVED = 'removed';","import { EXTENSION_SETTING, SEARCHBAR_SETTING } from '../../utilities/src/setting_config';\nimport {REBATE_ADDITIONAL_DISCOUNT_TARGET_INFO} from '../../utilities/src/rebates_const';\nimport { store } from './background_data_store';\n\n/////////////////////////////////////////////////////////////////////////////\n// Load/save application state from/to browser local storage.\n//\n\nasync function save_all_storage_api(obj) {\n  return new Promise((resolve) => {\n    platform_api_root.storage.local.set(obj, () => {\n        resolve();\n    });\n  });\n}\n\nasync function load_storage_api(key, value) {\n  return new Promise((resolve) => {\n    platform_api_root.storage.local.get(key, (result) => {\n      let output;\n      if (result[key] !== undefined) {\n        output = result[key];\n        if(typeof output === 'string') {\n          try {\n            // only for setting stuff will come here\n            output = JSON.parse(output);\n          } catch (e) {\n          }\n        }\n      } else {\n        output = value;\n      }\n      store.dispatch({ type: 'SET_KEY_WITH_DATA', data: {key: key, value: output} });\n      resolve();\n    });\n  });\n}\n\nasync function load() {\n  let stateobj = {};\n\n  let loadState = async(varname, handler_for_undefined) => {\n    let value = undefined;\n    if (handler_for_undefined) {\n        value = handler_for_undefined();\n    }\n\n    await load_storage_api(varname, value);\n  };\n\n  let loadSettingState = async function(setting_name, setting_default_class) {\n    let setting_name_captured = setting_name;\n    let setting_default_class_captured = setting_default_class;\n\n    await loadState(setting_name, () => new setting_default_class_captured(),\n      value => {\n        let valueobj = null;\n        try {\n          if(typeof value === 'string') {\n            valueobj = JSON.parse(value);\n          } else {\n            valueobj = value;\n          }\n        }\n        catch(e) {\n          console.error(\"Parse error: \" + setting_name_captured + \" \" + e);\n          return new setting_default_class_captured();\n        }\n\n        // Convert old value format: in previous versions we had additional level\n        // of object indirection which is removed now.\n        if (!Object.prototype.hasOwnProperty.call(valueobj, setting_name_captured)) {\n          return valueobj;\n        }\n\n        // Ensure that it was not \"corrupted\" after conversion due bugs in code:\n        // there must be no other properties except of the indirection object\n        // property.\n        if (Object.keys(valueobj).length > 1) {\n          console.error(\"Format error in \" + setting_name_captured);\n        } else {\n          // For safety copy only \"known\" properties - i.e. which are defined in\n          // the default object.\n          let extensionSetting = valueobj[setting_name_captured];\n          let defaultSetting = new setting_default_class_captured();\n          Object.keys(defaultSetting).forEach(function(keyname) {\n            valueobj[keyname] = (Object.prototype.hasOwnProperty.call(extensionSetting, keyname))\n                                  ? extensionSetting[keyname]\n                                  : defaultSetting[keyname];\n          });\n        }\n        delete valueobj[setting_name_captured];\n        return valueobj;\n      });\n  };\n\n  await Promise.allSettled([\n    loadState(\"history\", () => [], // empty array if undefined.\n        value => {  // parse the defined string to an array.\n          return value != \"\" ? value.split(',') : [];\n        }),\n    loadState(\"uuid\"),\n    loadState(\"tbuid\"),\n    loadState(\"clearHistory\", () => \"0\"),\n    loadState(\"rakutenBarInfo_active\"),\n    loadState(\"rakutenBarInfo_close_popup\"),\n    loadState(\"rakutenBarInfo_send_number\"),\n    loadState(\"rakutenBarInfo_accessurl\"),\n    loadState(\"rakutenBarInfo_domain\"),\n    loadState(\"rakutenBarInfoConfig_update_time\"),\n    loadState(\"rakutenBarInfo_userAgent\"),\n    loadState(\"rakutenBarInfo_osVersion\"),\n    loadState(\"rakutenBarInfo_cookie\"),\n    loadState(\"URLCheck\"),\n    loadState(\"isRakutenAsDefault\"),\n    loadState(\"messageReadTime\"),\n    loadState(\"yamawakeInfo\"),\n    loadState(\"kuchisuCount\"),\n    loadState(\"loginCheckTime\"),\n    loadState(\"login\"),\n    loadState(\"callLoad\"),\n    loadState(\"cid\"),\n    loadState(\"rebates_campaign_hover_states\", () => [],\n        value => {\n          return JSON.parse(value);\n        }),\n    loadSettingState(\"ExtensionSetting\", EXTENSION_SETTING),\n    loadSettingState(\"SearchBarSetting\", SEARCHBAR_SETTING),\n    loadState(\"pickup_banner_disabled_time\"),\n    loadSettingState(\"rebates_additional_discount_target_info\", REBATE_ADDITIONAL_DISCOUNT_TARGET_INFO),\n  ]);\n\n  return stateobj;\n}\n\n/////////////////////////////////////////////////////////////////////////////\n// Public interface\n//\nexport default {\n  load: load,\n  saveAll: save_all_storage_api,\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}","import _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\n\n/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\nfunction formatProdErrorMessage(code) {\n  return \"Minified Redux error #\" + code + \"; visit https://redux.js.org/Errors?code=\" + code + \" for the full message or \" + 'use the non-minified dev environment for full errors. ';\n}\n\n// Inlined version of the `symbol-observable` polyfill\nvar $$observable = (function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n})();\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n// Inlined / shortened version of `kindOf` from https://github.com/jonschlinkert/kind-of\nfunction miniKindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n  var type = typeof val;\n\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'function':\n      {\n        return type;\n      }\n  }\n\n  if (Array.isArray(val)) return 'array';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  var constructorName = ctorName(val);\n\n  switch (constructorName) {\n    case 'Symbol':\n    case 'Promise':\n    case 'WeakMap':\n    case 'WeakSet':\n    case 'Map':\n    case 'Set':\n      return constructorName;\n  } // other\n\n\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n}\n\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\n\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number';\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function' && typeof val.getDate === 'function' && typeof val.setDate === 'function';\n}\n\nfunction kindOf(val) {\n  var typeOfVal = typeof val;\n\n  if (process.env.NODE_ENV !== 'production') {\n    typeOfVal = miniKindOf(val);\n  }\n\n  return typeOfVal;\n}\n\n/**\n * @deprecated\n *\n * **We recommend using the `configureStore` method\n * of the `@reduxjs/toolkit` package**, which replaces `createStore`.\n *\n * Redux Toolkit is our recommended approach for writing Redux logic today,\n * including store setup, reducers, data fetching, and more.\n *\n * **For more details, please read this Redux docs page:**\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * `configureStore` from Redux Toolkit is an improved version of `createStore` that\n * simplifies setup and helps avoid common bugs.\n *\n * You should not be using the `redux` core package by itself today, except for learning purposes.\n * The `createStore` method from the core `redux` package will not be removed, but we encourage\n * all users to migrate to using Redux Toolkit for all Redux code.\n *\n * If you want to use `createStore` without this visual deprecation warning, use\n * the `legacy_createStore` import instead:\n *\n * `import { legacy_createStore as createStore} from 'redux'`\n *\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"Expected the enhancer to be a function. Instead, received: '\" + kindOf(enhancer) + \"'\");\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"Expected the root reducer to be a function. Instead, received: '\" + kindOf(reducer) + \"'\");\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"Expected the listener to be a function. Instead, received: '\" + kindOf(listener) + \"'\");\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"Actions must be plain objects. Instead, the actual type was: '\" + kindOf(action) + \"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.\");\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : 'Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : \"Expected the nextReducer to be a function. Instead, received: '\" + kindOf(nextReducer));\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"Expected the observer to be an object. Instead, received: '\" + kindOf(observer) + \"'\");\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n/**\n * Creates a Redux store that holds the state tree.\n *\n * **We recommend using `configureStore` from the\n * `@reduxjs/toolkit` package**, which replaces `createStore`:\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nvar legacy_createStore = createStore;\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + kindOf(inputState) + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(12) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(13) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle '\" + ActionTypes.INIT + \"' or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var actionType = action && action.type;\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(14) : \"When called with an action of type \" + (actionType ? \"\\\"\" + String(actionType) + \"\\\"\" : '(unknown type)') + \", the slice reducer for key \\\"\" + _key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\");\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(16) : \"bindActionCreators expected an object or a function, but instead received: '\" + kindOf(actionCreators) + \"'. \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(15) : 'Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread(_objectSpread({}, store), {}, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore, legacy_createStore };\n","var Transform = require('readable-stream').Transform\n  , inherits  = require('inherits')\n\nfunction DestroyableTransform(opts) {\n  Transform.call(this, opts)\n  this._destroyed = false\n}\n\ninherits(DestroyableTransform, Transform)\n\nDestroyableTransform.prototype.destroy = function(err) {\n  if (this._destroyed) return\n  this._destroyed = true\n  \n  var self = this\n  process.nextTick(function() {\n    if (err)\n      self.emit('error', err)\n    self.emit('close')\n  })\n}\n\n// a noop _transform function\nfunction noop (chunk, enc, callback) {\n  callback(null, chunk)\n}\n\n\n// create a new export function, used by both the main export and\n// the .ctor export, contains common logic for dealing with arguments\nfunction through2 (construct) {\n  return function (options, transform, flush) {\n    if (typeof options == 'function') {\n      flush     = transform\n      transform = options\n      options   = {}\n    }\n\n    if (typeof transform != 'function')\n      transform = noop\n\n    if (typeof flush != 'function')\n      flush = null\n\n    return construct(options, transform, flush)\n  }\n}\n\n\n// main export, just make me a transform stream!\nmodule.exports = through2(function (options, transform, flush) {\n  var t2 = new DestroyableTransform(options)\n\n  t2._transform = transform\n\n  if (flush)\n    t2._flush = flush\n\n  return t2\n})\n\n\n// make me a reusable prototype that I can `new`, or implicitly `new`\n// with a constructor call\nmodule.exports.ctor = through2(function (options, transform, flush) {\n  function Through2 (override) {\n    if (!(this instanceof Through2))\n      return new Through2(override)\n\n    this.options = Object.assign({}, options, override)\n\n    DestroyableTransform.call(this, this.options)\n  }\n\n  inherits(Through2, DestroyableTransform)\n\n  Through2.prototype._transform = transform\n\n  if (flush)\n    Through2.prototype._flush = flush\n\n  return Through2\n})\n\n\nmodule.exports.obj = through2(function (options, transform, flush) {\n  var t2 = new DestroyableTransform(Object.assign({ objectMode: true, highWaterMark: 16 }, options))\n\n  t2._transform = transform\n\n  if (flush)\n    t2._flush = flush\n\n  return t2\n})\n","import {CONST_RAKUTEN_WEBSEARCH} from './setting_config';\n\nexport const POSTINSTALL_PAGE_URL = `https://rd.rakuten.co.jp/s2/?R2=https%3A%2F%2F${CONST_RAKUTEN_WEBSEARCH.host}%2Fstatic%2Fplatform_identifier%2Finstall.html%3Fscid%3Dplatform_installparam&D2=3.0.39945.752241.32122611&C3=0de31d98291c91881b45908fb0691ea4101aeb52`;\nexport const KEYS = {\n    KEY_ESCAPE : 27,\n    KEY_ENTER : 13,\n};\nexport const EXTENSION_SETTING_FAQ_LINK = \"https://ad2.trafficgate.net/t/r/7398/3629/198512_234039/\";\nexport const EXTENSION_FAQ_LINK = \"https://ad2.trafficgate.net/t/r/7399/3629/198512_234039/\";\nexport const EXTENSION_POPUP_SETTING_FAQ_LINK = \"https://ad2.trafficgate.net/t/r/7400/3629/198512_234039/\";\nexport const EXTENSION_POPUP_TANDC_LINK = \"https://toolbar.rakuten.co.jp/intro/rule/?l-id=platform_specific_id_popup_link\";\n\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","import {store} from '../background_data_store';\nimport {\n        PICKUP_BAR_COUPON_URL,\n        PICKUP_BAR_COUPON_SID,\n        PICKUP_BAR_RPP_URL\n    } from '../../../utilities/src/pickup_const';\nimport { getURLParam } from '../../../utilities/src/common_helper';\nimport DataBackend from '../factory/data_backend'\nexport default class CouponDataBackend extends DataBackend {\n    constructor() {\n        super();\n    }\n\n    //Using default implementation\n    //async _fetchServerJson(_url) { }\n\n    async fetchCouponInfo(_page_url, _keyword_param) {\n        const _keyword_value = getURLParam(_page_url, _keyword_param);\n        store.dispatch({\n            type: 'SET_COUPON_KEYWORD',\n            data: decodeURIComponent(_keyword_value)\n        });\n        if (_keyword_value != null) {\n            let _url = PICKUP_BAR_COUPON_URL + _keyword_value + PICKUP_BAR_COUPON_SID;\n            return this._fetchServerJson(_url);\n        }\n        return null;\n    }\n\n    async fetchCouponRPPInfo(_page_url, _keyword_param) {\n        const _keyword_value = getURLParam(_page_url, _keyword_param);\n        store.dispatch({\n            type: 'SET_COUPON_KEYWORD',\n            data: decodeURIComponent(_keyword_value)\n        });\n        if (_keyword_value != null) {\n            let _url = PICKUP_BAR_RPP_URL + _keyword_value;\n            return this._fetchServerJson(_url);\n        }\n        return null;\n    }\n}","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","import {combineReducers} from 'redux';\n\nimport data from './data';\n\nexport default combineReducers({\n  data\n});\n","import {CONST_RAKUTEN_WEBSEARCH} from '../../../utilities/src/setting_config';\r\n//import {GOOGLE_ANALYTICS_TRACKING_ID} from '../../../utilities/src/google_analytics_helper';\r\nimport {getGACid} from '../../../utilities/src/google_analytics_helper';\r\nimport { applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport reduxPersistMiddleware from '../redux_persist_middleware';\r\n\r\n// This event is fired with the user accepts the input in the omnibox.\r\nplatform_api_root.omnibox.onInputEntered.addListener(function(text) {\r\n    platform_api_root.tabs.update({\r\n        \"url\": `${CONST_RAKUTEN_WEBSEARCH.defaultUrl}/Web?tool_id=1&ref=chext&qt=${text}`\r\n    });\r\n});\r\n\r\n/**\r\n * utilize google analytics\r\n * tracking number UA-60584558-1 -- chrome version\r\n */\r\n// (function(i, s, o, g, r, a, m){i.GoogleAnalyticsObject=r;i[r]=i[r]||function(){\r\n\r\n//     (i[r].q=i[r].q||[]).push(arguments)}, i[r].l=1*new Date();a=s.createElement(o),\r\n\r\n//     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a, m)\r\n\r\n//     })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga'); // Note: https protocol here\r\n\r\n//     ga('create', GOOGLE_ANALYTICS_TRACKING_ID, 'auto');\r\n//     ga('set', 'checkProtocolTask', function(){}); // Removes failing protocol check. @see: http://stackoverflow.com/a/22152353/1958200\r\n//     ga('send', 'pageview');\r\n\r\nexport default class PlatformSpecific {\r\n    static checkTabContentScriptDueExtensionReEnabling(tab) {\r\n    }\r\n\r\n    static getBrowserSearchEngineSettingUrl() {\r\n        return \"chrome://settings/searchEngines\";\r\n    }\r\n\r\n    static getBackgroundDataStoreEnhancer() {\r\n        return applyMiddleware(reduxPersistMiddleware, thunk);\r\n    }\r\n\r\n    static getAjaxRequestTypes(){\r\n        return [\"xmlhttprequest\"];\r\n    }\r\n\r\n    static google_analytics_call(tracking_id, category, action) {\r\n        const message = \"v=1&\" + \"t=event&\" + \"dl=chrome_extension\" + \"&ec=\" + category + \"&ea=\" + action + \"&tid=\" + tracking_id + \"&cid=\" + getGACid();\r\n        fetch(\"https://www.google-analytics.com/collect\",\r\n        {\r\n            method: \"POST\",\r\n            body: message\r\n        });\r\n    }\r\n}\r\n","import { store } from '../../background/src/background_data_store';\r\n\r\nconst GOOGLE_ANALYTICS_TRACKING_ID_ENUM = {\r\n  prod: \"UA-60584558-1\",\r\n  dev: \"UA-136110580-1\",\r\n};\r\n\r\nexport const GOOGLE_ANALYTICS_TRACKING_ID =\r\n    GOOGLE_ANALYTICS_TRACKING_ID_ENUM[__WEBPACK_BUILDMODE__];\r\n\r\nexport function getGACid() {\r\n    let cid = store.getState().data.cid;\r\n    if(cid != undefined) {\r\n        return cid;\r\n    }\r\n    else {\r\n        cid = Math.floor(Math.random() * 0x7FFFFFFF) + \".\" + Math.floor(Date.now() / 1000);\r\n        store.dispatch({ type: 'SET_CID', data: cid });\r\n    }\r\n    return cid;\r\n}\r\n","// Flag to indicate if the data is loaded from storage\n// Reason to have this flag is the data loading is now async (due to Storage API)\n// some dispatches may happen before the data are loaded, and those dispatches\n// can trigger the data saving to Storage API, which will cause the data to be\n// saved before it is loaded and will lead to data loss\n\nexport const globalState = {\n  isDataLoadedFromStorage: false\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function (emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug = void 0;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/BufferList');\nvar destroyImpl = require('./internal/streams/destroy');\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var readableHwm = options.readableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\n\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  this.push(null);\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new Error('stream.push() after EOF'));\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n    }\n  }\n\n  return needMoreData(state);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    stream.emit('data', chunk);\n    stream.read(0);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    pna.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('_read() is not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = { hasUnpiped: false };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, unpipeInfo);\n    }return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this, unpipeInfo);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        pna.nextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    pna.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._readableState.highWaterMark;\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    pna.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","module.exports = require('events').EventEmitter;\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n      pna.nextTick(emitErrorNT, this, err);\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      pna.nextTick(emitErrorNT, _this, err);\n      if (_this._writableState) {\n        _this._writableState.errorEmitted = true;\n      }\n    } else if (cb) {\n      cb(err);\n    }\n  });\n\n  return this;\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nutil.inherits(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var writableHwm = options.writableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function () {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function (object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function (object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\n    return new Writable(options);\n  }\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  pna.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    pna.nextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    pna.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    pna.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n      asyncWrite(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('_write() is not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      stream.emit('error', err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function') {\n      state.pendingcb++;\n      state.finalCalled = true;\n      pna.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n  if (state.corkedRequestsFree) {\n    state.corkedRequestsFree.next = corkReq;\n  } else {\n    state.corkedRequestsFree = corkReq;\n  }\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  get: function () {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\n\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  this.end();\n  cb(err);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) {\n    return this.emit('error', new Error('write callback called multiple times'));\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n\n  cb(er);\n\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function') {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('_transform() is not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  var _this2 = this;\n\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n    _this2.emit('close');\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}","import PickupFactory from './factory/pickup_factory'\nimport AjaxPickupFactory from './factory/ajax_pickup_factory'\nimport { store, waitForStoreToBeLoaded } from './background_data_store';\n\nimport watch from 'redux-watch'\nimport Rebates from './rebates/rebates';\n\nimport {REBATES_XML2_SERVER_INTERVAL, REBATES_SEARCH_POPUP_DISABLED_24HOURS, REBATES_SEARCH_POPUP_DISABLED_30DAYS} from '../../utilities/src/rebates_const';\nimport {PICKUP_BAR_ABTEST_URL_V2} from '../../utilities/src/pickup_const';\nimport {CONST_EXTENSION_SETTING, BANNER_DISABLE_OPTION, BANNER_DISABLED_TIMER, CONST_LOGIN_SETTING, CONST_RAKUTEN_WEBSEARCH} from '../../utilities/src/setting_config';\nimport {GOOGLE_ANALYTICS_TRACKING_ID} from '../../utilities/src/google_analytics_helper';\nimport {POSTINSTALL_PAGE_URL} from '../../utilities/src/common_const';\n\nimport XmlParser from '../../utilities/src/XmlParser';\nimport UserPoint from '../../utilities/src/user_point';\nimport {parseURL, setLongTimeout, findMatchPattern, sendMessageByPort} from '../../utilities/src/common_helper';\nimport PlatformSpecific from 'PlatformSpecific';\nimport ApplicationStateStorage from './application_state_storage'\n\n// This is for debug purpose only\n// platform_api_root.storage.onChanged.addListener((changes, namespace) => {\n//     for (let [key, { oldValue, newValue }] of Object.entries(changes)) {\n//       console.log(\n//         `Storage key \"${key}\" in namespace \"${namespace}\" changed.`,\n//         `Old value was \"${JSON.stringify(oldValue)}\", new value is \"${JSON.stringify(newValue)}\".`\n//       );\n//     }\n//   });\n\nvar TabController = {\n    TabData_: function() {  // constructor.\n        this.mainFrameRequestId = -1;\n        this.mainFrameRedirects = [];\n\n        this.searchbarStatus = true;\n\n        this.pickupData = { state: false, page: \"\" };\n        this.pickupDataPromise = Promise.resolve(this.pickupData);\n        this.resolvePickupDataPromise = () => {\n            if (this.pickupDataPromiseResolve) {\n                this.pickupDataPromiseResolve(this.pickupData);\n                delete this.pickupDataPromiseResolve;\n            }\n        };\n    },\n\n    openedTabsData_: {},  // mapping: tab.id -> TabData\n\n    addTab: function(tabId) {\n        if (!(tabId in this.openedTabsData_)) {\n            this.openedTabsData_[tabId] = new this.TabData_();\n        }\n    },\n    clear: function() {\n        this.openedTabsData_ = {};\n    },\n    removeTab: function(tabId) {\n        delete this.openedTabsData_[tabId];\n    },\n    replaceTab: function(oldTabId, newTabId) {\n        const dataRef = this.openedTabsData_[oldTabId];\n        if (dataRef) {\n            delete this.openedTabsData_[oldTabId];\n            this.openedTabsData_[newTabId] = dataRef;\n        } else {\n            this.openedTabsData_[newTabId] = new this.TabData_();\n        }\n    },\n    enumTabs: function(callback) {\n        Object.keys(this.openedTabsData_).forEach((tabIdKey) => {\n            callback(parseInt(tabIdKey, 10))\n        });\n    },\n\n    getTabData_: function(tabId) {\n        const dataRef = this.openedTabsData_[tabId];\n        // In case of unknown tab return a temp object as a failsafe solution.\n        return (dataRef) ? dataRef : new this.TabData_();\n    },\n\n    onBeforeRequestInMainFrame: function(tabId, requestId) {\n        let dataRef = this.getTabData_(tabId);\n        if (requestId != dataRef.mainFrameRequestId) {\n            // New top navigation is detected: drop saved redirects.\n            dataRef.mainFrameRequestId = requestId;\n            dataRef.mainFrameRedirects = [];\n        }\n    },\n    onBeforeRedirectInMainFrame: function(tabId, statusCode, redirectUrl) {\n        this.getTabData_(tabId).mainFrameRedirects.push({\n            httpstatus: statusCode,\n            url: redirectUrl\n        });\n    },\n    getRedirectsInMainFrame: function(tabId) {\n        return this.getTabData_(tabId).mainFrameRedirects;\n    },\n\n    updateSearchBarStatus: function(tabId, status) {\n        this.getTabData_(tabId).searchbarStatus = status;\n    },\n    getSearchBarStatus: function(tabId) {\n        return this.getTabData_(tabId).searchbarStatus;\n    },\n\n    getPickupDataPromise: function(tabId) {\n        return this.getTabData_(tabId).pickupDataPromise;\n    },\n    onPickupStateFetchStart: function(tabId) {\n        let dataRef = this.getTabData_(tabId);\n        dataRef.resolvePickupDataPromise();  // get rid of current waiters (if any).\n        dataRef.pickupDataPromise = new Promise((resolve, reject) => {\n            dataRef.pickupDataPromiseResolve = resolve;\n        });\n    },\n    setPickupState: function(tabId, state) {\n        const dataRef = this.getTabData_(tabId);\n        dataRef.pickupData.state = state;\n        // Drop the data page if state becomes OFF.\n        if (!state) {\n            dataRef.pickupData.page = \"\";\n            dataRef.resolvePickupDataPromise();\n        }\n    },\n    getPickupState: function(tabId) {\n        return this.getTabData_(tabId).pickupData.state;\n    },\n    setPickupDataPage: function(tabId, data_page) {\n        // Set the page only if state is ON.\n        const dataRef = this.getTabData_(tabId);\n        if (dataRef.pickupData.state) {\n            dataRef.pickupData.page = data_page;\n            dataRef.resolvePickupDataPromise();\n        }\n    },\n    getPickupDataPage: function(tabId) {\n        return this.getTabData_(tabId).pickupData.page;\n    }\n}\n\nvar RTBbg = {\n    content: undefined,\n    clsid: platform_specific_clsid, // script.jsにもあるので注意！\n    imgDir: \"https://image.infoseek.rakuten.co.jp/content/toolbar-platform/chrome/image/client/\",\n    toolid: 1,\n    loginCheckTime: 1000 * 60 * 30,\n    loadTime: 1000 * 3600 * 24,\n    messageReadTime: 60 * 30 * 1000,\n    rebates: undefined,\n    pickup: undefined,\n    usrPointInfo: undefined,\n    url_access_data: [],\n    RakutenWebSearch: {\n        host: `${CONST_RAKUTEN_WEBSEARCH.host}`,\n    },\n    // インストール完了時、ブラウザ起動時に呼び出される\n    init: async function() {\n        RTBbg.rebates = new Rebates();\n        RTBbg.pickup_factory = new PickupFactory();\n        RTBbg.ajax_pickup_factory = new AjaxPickupFactory();\n        await waitForStoreToBeLoaded();\n        await RTBbg.rebates.init(store);\n        RTBbg.updateIconInAllTabs();\n        RTBbg.prepareRakutenBarData();\n\n        this.getTbuid((tbuid) => {\n            this.maybeCallLoad();\n            this.getRtbSess();\n            this.getABTestSettings();\n        });\n\n        this.checkBannerSettingTimer();\n    },\n\n    openPostInstallPage: function() {\n        platform_api_root.tabs.create({\n            url: POSTINSTALL_PAGE_URL\n        });\n    },\n\n    getOSVersion: function() {\n        if (navigator.userAgent.indexOf(\"Win\") != -1) {\n            return \"Windows\";\n        }\n        if (navigator.userAgent.indexOf(\"Mac\") != -1) {\n            return \"MacOS\";\n        }\n        if (navigator.userAgent.indexOf(\"X11\") != -1) {\n            return \"UNIX\";\n        }\n        if (navigator.userAgent.indexOf(\"Linux\") != -1) {\n            return \"Linux\";\n        }\n        return \"Unknown OS\";\n    },\n\n    prepareRakutenBarData: async function() {\n        await waitForStoreToBeLoaded();\n        const lastUpdateTime =  store.getState().data.rakutenBarInfoConfig_update_time != undefined ?\n                                store.getState().data.rakutenBarInfoConfig_update_time :\n                                (new Date(0).getTime());\n        const currentTime = new Date().getTime();\n        const duration = currentTime  - lastUpdateTime;\n        if (duration > REBATES_XML2_SERVER_INTERVAL) {\n            let response;\n            try {\n                response = await fetch(\"https://xml2.toolbar.rakuten.ne.jp/?action=ivh\");\n            } catch (err) {\n                console.error(`Error when fetching rebates data at https://xml2.toolbar.rakuten.ne.jp/?action=ivh: ${err}`);\n            }\n            if (response && response.status === 200) {\n                let data = await response.text();\n                const xmlParser = new XmlParser(data);\n                // All of these items need to be stored in local storage. Confirm in application_state_storage.js file.\n                // this is not ideal way to set value because we are not checking tag name for each value. need to change from xml to json maybe...\n                store.dispatch({ type: 'SET_RBAR_ACTIVE', data: xmlParser.getAttributeValueByTagName(\"INVISIBLE_HAND\", \"active\") });\n                store.dispatch({ type: 'SET_RBAR_SEND_NUMBER', data: xmlParser.getAttributeValueByTagName(\"INVISIBLE_HAND\", \"send_number\") });\n                store.dispatch({ type: 'SET_RBAR_ACCESSURL', data: xmlParser.getAttributeValueByTagName(\"INVISIBLE_HAND\", \"access_url\") });\n                store.dispatch({ type: 'SET_RBAR_DOMAIN', data: xmlParser.getAttributeValueByTagName(\"DOMAIN\", \"name\") });\n                store.dispatch({ type: 'SET_RBAR_USERAGENT', data: navigator.userAgent });\n                store.dispatch({ type: 'SET_RBAR_OSVERSION', data: RTBbg.getOSVersion() });\n                store.dispatch({ type: 'SET_RAKUTEN_BAR_INFO_CONFIG_UPDATE_TIME', data: currentTime });\n                platform_api_root.cookies.get({ \"url\": `${CONST_RAKUTEN_WEBSEARCH.defaultUrl}`, \"name\": \"Rz\" }, function(cookie) {\n                    if (cookie != undefined) {\n                        store.dispatch({ type: 'SET_RBAR_RZ_COOKIE', data: cookie.value });\n                    }\n                });\n            }\n        }\n    },\n    // url response check\n    checkURLResponse: async function(url, port) {\n        let response;\n        try {\n            response = await fetch(url);\n        } catch (err) {\n            console.error(`Error when fetching at ${url}: ${err}`);\n        }\n        if (response && response.status === 200) {\n            store.dispatch({ type: 'SET_URLCHECK', data: 'OK' });\n            sendMessageByPort(port, { popup_url: url });\n        } else {\n            store.dispatch({ type: 'SET_URLCHECK', data: 'NG' });\n            sendMessageByPort(port, { popup_url: url });\n        }\n    },\n\n    // サブウィンドウの中身を取得\n    getSubwindow: function(port) {\n        let sp = 0;\n        if (store.getState().data.isRakutenAsDefault == \"true\" || !store.getState().data.isRakutenAsDefault) {\n            sp = 1;\n        } else if (store.getState().data.isRakutenAsDefault == \"false\") {\n            sp = 0;\n        }\n\n        RTBbg.popupUrl = `${CONST_RAKUTEN_WEBSEARCH.defaultUrl}/extension/subwindow`;\n        RTBbg.popupUrl += \"?sp=\" + sp;\n        RTBbg.popupUrl += \"&version=\" + RTBbg.getVersion();\n        RTBbg.popupUrl += \"&tbuid=\" + store.getState().data.tbuid;\n        RTBbg.popupUrl += \"&t=platform_type\";\n        RTBbg.checkURLResponse(RTBbg.popupUrl, port);\n\n        // Pass pickup state of the active tab.\n        RTBbg.passPickupDataPageToPopup(port);\n\n        // アイコンクリック時にアイコン上のタゲメ件数更新\n        RTBbg.checkLogin();\n        RTBbg.getTgmCount();\n        RTBbg.kuchisuCount();\n        RTBbg.yamawakeInfo();\n    },\n\n    getPageZoom: function(port) {\n        platform_api_root.tabs.query({ \"active\": true, \"currentWindow\": true }, function(activetabs) {\n            if (activetabs.length > 0) {\n                let currenttab = activetabs[0];\n                //Some browsers does not support api (ex: EDGE)\n                if(platform_api_root.tabs.getZoomSettings){\n                    platform_api_root.tabs.getZoomSettings(currenttab.tabid, function(settings) {\n                        if (settings) {\n                            sendMessageByPort(port, { \"ZoomFactor\": settings.defaultZoomFactor });\n                        }\n                    });\n                }\n                else{\n                    sendMessageByPort(port, { \"ZoomFactor\": 1 });\n                }\n            }\n        });\n    },\n    refreshRebatesCampaign:async function(port){\n        if(RTBbg.rebates != undefined && RTBbg.rebates!=null){\n            let ret = await RTBbg.rebates.getCampaignLists();\n            if (ret) {\n                store.dispatch({ type: 'SET_REBATES_CAMPAIGN', data: RTBbg.rebates.campaignList });\n            }\n        }\n        sendMessageByPort(port, { \"RebatesCampaign\": \"done\" });\n    },\n    // 未読メッセージ数をアイコンに表示\n    getTgmCount: async function() {\n        let date = new Date();\n        let requestUrl = \"https://msg.websearch.rakuten.co.jp/view/MsgApiGetMessageCount?version=\"\n            + RTBbg.getVersion()\n            + \"&datetime=\"\n            + date.getTime()\n            + \"&tuid=\"\n            + store.getState().data.tbuid + \"&callback=jQuery\";\n        let response;\n        try {\n            response = await fetch(requestUrl);\n        } catch (err) {\n            console.error(`Error when fetching at ${requestUrl}: ${err}`);\n        }\n        if (response && response.status === 200) {\n            try {\n                let text = await response.text();\n                let result = (text.match(/\\(([^)]+)\\)/) || [])[1];\n                result = JSON.parse(result);\n                store.dispatch({ type: 'SET_MESSAGEREAD_TIME', data: date.getTime() });\n\n                // Satusチェック（True->引き続き通常処理, False->表示なし）\n                if (result.header.status == \"Success\" &&\n                        result.header.islogin &&\n                        result.body.messageCount > 0) {\n                    const nmsgtxt = (result.body.messageCount > 10)\n                                        ? \"10+\"\n                                        : String(result.body.messageCount);\n                    platform_api_root.action.setBadgeText({\n                        text: nmsgtxt\n                    });\n                    platform_api_root.action.setBadgeBackgroundColor({\n                        color: [100, 100, 100, 255]\n                    });\n                } else {\n                    platform_api_root.action.setBadgeText({\n                        text: \"\"\n                    });\n                }\n            } catch(e) {\n            }\n        }\n    },\n\n    getABTestSettings: async function() {\n        await waitForStoreToBeLoaded();\n        const randomNumber = Math.floor(Math.random() * 1000000);\n        let requestUrl = PICKUP_BAR_ABTEST_URL_V2 + \"?rnd=\" + randomNumber;\n        let response;\n        try {\n            response = await fetch(requestUrl);\n        } catch (err) {\n            console.error(`Error when fetching at ${requestUrl}: ${err}`);\n        }\n        if (response && response.status === 200) {\n            let json = await response.json();\n            // 0 is not loggedin, 1 is loggedin and enable, 2 is loggedin and disable\n            let isPickupGo = \"1\";\n            let isCouponGo = \"1\";\n            let isSearchSERPPageGo = \"0\";\n            let allCampaigns = json.data.allCampaigns;\n            allCampaigns.forEach((element) => {\n                if (element.name.toLowerCase() == \"pickup\" && element.success == true) {\n                    isPickupGo = element.data.channel;\n                }\n                else if (element.name.toLowerCase() == \"coupon\" && element.success == true) {\n                    isCouponGo = element.data.channel;\n                }\n                else if (element.name.toLowerCase() == \"googleyahooserp\" && element.success == true) {\n                    isSearchSERPPageGo = element.data.channel;\n                }\n            });\n            let abTestSettings = {\n                isPickupGo: isPickupGo,\n                isCouponGo: isCouponGo,\n                isSearchSERPPageGo: isSearchSERPPageGo\n            }\n            store.dispatch({ type: 'SET_AB_TEST_SETTINGS', data: JSON.stringify(abTestSettings) });\n        } else {\n            store.dispatch({ type: 'CLEAR_AB_TEST_SETTINGS' });\n        }\n    },\n    // Get count of kuchisu\n    yamawakeInfo: async function() {\n        let response;\n        try {\n            response = await fetch(`${CONST_RAKUTEN_WEBSEARCH.defaultUrl}/xml/pnt_tlbrbx?tool_id=1`, {method: \"POST\"});\n        } catch (err) {\n            console.error(`Error when fetching at ${CONST_RAKUTEN_WEBSEARCH.defaultUrl}/xml/pnt_tlbrbx?tool_id=1: ${err}`);\n        }\n        if (response && response.status === 200) {\n            try {\n                let text = await response.text();\n                const xmlParser = new XmlParser(text);\n                const textElement = xmlParser.getElementsByTagName(\"text\");\n                store.dispatch({ type: 'SET_YAMAKAWE', data: textElement.textContent });\n            } catch(e) {\n            }\n        }\n    },\n\n    // Get count of kuchisu\n    kuchisuCount: async function() {\n        let response;\n        try {\n            response = await fetch(`${CONST_RAKUTEN_WEBSEARCH.defaultUrl}/xml/user_t?tool_id=1&pid=1&userid=` + store.getState().data.tbuid, {method: \"POST\"});\n        } catch (err) {\n            console.error(`Error when fetching at ${CONST_RAKUTEN_WEBSEARCH.defaultUrl}/xml/user_t?tool_id=1&pid=1&userid=: ${err}`);\n        }\n        if (response && response.status === 200) {\n            try {\n                let text = await response.text();\n                const xmlParser = new XmlParser(text);\n                const label = xmlParser.getAttributeValueByTagName(\"toolbarloginbutton\", \"label\");\n                store.dispatch({ type: 'SET_KUCHISU', data: label });\n            } catch(e) {\n            }\n        }\n    },\n\n    // ログインしてるかチェック\n    checkLogin: async function() {\n        let response;\n        try {\n            response = await fetch(`${CONST_RAKUTEN_WEBSEARCH.defaultUrl}/json/user`);\n        } catch (err) {\n            console.error(`Error when fetching at ${CONST_RAKUTEN_WEBSEARCH.defaultUrl}/json/user: ${err}`);\n        }\n        if (response && response.status === 200) {\n            let result = await response.json();\n            RTBbg.setUserPointInfo(result);\n            let date = new Date();\n            store.dispatch({ type: 'SET_LOGINCHECK_TIME', data: date.getTime() });\n            if (result.status == \"true\") {\n                store.dispatch({ type: 'SET_LOGIN', data: '1' });\n                RTBbg.updateIconInAllTabs();\n            } else if (result.status == \"false\") {\n                store.dispatch({ type: 'SET_LOGIN', data: '0' });\n                RTBbg.updateIconInAllTabs();\n                store.dispatch({\n                    type: 'CLEAR_REBATES_CAMPAIGN_HOVER_STATES'\n                });\n            }\n            RTBbg.getABTestSettings();\n        }\n\n        // we need to update rz cookie after login/logout\n        platform_api_root.cookies.get({ \"url\": `${CONST_RAKUTEN_WEBSEARCH.defaultUrl}`, \"name\": \"Rz\" }, function(cookie) {\n            if (cookie != undefined) {\n                store.dispatch({ type: 'SET_RBAR_RZ_COOKIE', data: cookie.value });\n            }\n        });\n    },\n\n    clearRebatesHoverData: function() {\n        store.dispatch({\n            type: 'CLEAR_ACTIVATED_SITE'\n        });\n        store.dispatch({\n            type: 'CLEAR_REBATES_POPUP_CLOSE_SITE'\n        });\n        store.dispatch({\n            type: 'CLEAR_REBATES_CAMPAIGN_HOVER_STATES'\n        });\n    },\n\n    updateIconInAllTabs: function() {\n       // Update icon in each tab depending on its pickup state.\n       platform_api_root.tabs.query({}, (tabs) => {\n           const logged_in = (store.getState().data.login === \"1\");\n           // Set `global` icon which will be used for new tabs.\n           platform_api_root.action.setIcon({\n               path: this.buildIconPath_(logged_in, false)\n           }, () => { if (platform_api_root.runtime.lastError) {return;}});\n\n           for (let tab of tabs) {\n               const pickup_found = TabController.getPickupState(tab.id);\n               platform_api_root.action.setIcon({\n                   tabId: tab.id,\n                   path: this.buildIconPath_(logged_in, pickup_found)\n               }, () => { if (platform_api_root.runtime.lastError) {return;}});\n           }\n       });\n    },\n\n    updateIconInTab: function(tabId) {\n       // Update icon in the specific tab only.\n       const logged_in = (store.getState().data.login === \"1\");\n       const pickup_found = TabController.getPickupState(tabId);\n       platform_api_root.action.setIcon({\n           tabId: tabId,\n           path: this.buildIconPath_(logged_in, pickup_found)\n       }, () => { if (platform_api_root.runtime.lastError) {return;}});\n    },\n\n    buildIconPath_: function(logged_in, pickup_found) {\n        if (logged_in) {\n            return (pickup_found) ? '/img/ic_login_pickup.png' : '/img/ic_login.png';\n        }\n        return (pickup_found) ? '/img/ic_non_login_pickup.png' : '/img/ic_non_login.png';\n    },\n\n    getVersion: function() {\n        return platform_api_root.runtime.getManifest().version;\n    },\n\n    maybeCallLoad: async function() {\n        await waitForStoreToBeLoaded();\n        const userid = store.getState().data.tbuid;\n        if (!userid) {\n            return;\n        }\n\n        let need_call_load = true;\n        if (store.getState().data.callLoad) {\n            try {\n                const last_call_load = store.getState().data.callLoad;\n                need_call_load =\n                    last_call_load.time !== RTBbg._getDateString() ||\n                    (last_call_load.login == \"0\" && store.getState().data.login == \"1\");\n            } catch (e) {\n                store.dispatch({ type: 'CLEAR_CALLLOAD' });\n            }\n        }\n        if (need_call_load) {\n            RTBbg.doCallLoad();\n        }\n    },\n\n    doCallLoad: async function() {\n        const login = (store.getState().data.login == \"1\") ? 1 : 0;\n        let response = await fetch(`https://xml2.toolbar.rakuten.ne.jp/?action=load_extension&client=platform_current&m=${store.getState().data.uuid}&g=${RTBbg.clsid}&toolid=${RTBbg.toolid}&userid=${store.getState().data.tbuid}&v=${RTBbg.getVersion()}&login=${login}`);\n        if (response && response.status === 200) {\n            const callLoad = {\n                time: RTBbg._getDateString(),\n                login: store.getState().data.login\n            }\n            store.dispatch({ type: 'SET_CALLLOAD', data: JSON.stringify(callLoad) });\n        }\n    },\n\n    // 日付（yyyy/mm/dd）取得\n    _getDateString: function() {\n        let date = new Date();\n        let yyyy = date.getFullYear();\n        let mm = date.getMonth() + 1;\n        let dd = date.getDate();\n        if (mm < 10) {\n            mm = \"0\" + mm;\n        }\n        if (dd < 10) {\n            dd = \"0\" + dd;\n        }\n        return yyyy + \"/\" + mm + \"/\" + dd;\n    },\n\n    // single sign-on\n    getRtbSess: async function() {\n        await waitForStoreToBeLoaded();\n        const userid = store.getState().data.tbuid;\n        if (!userid) {\n            return;\n        }\n        RTBbg.checkLogin();\n        RTBbg.getTgmCount();\n    },\n\n    _setTimeout: function(callback, arg1, time_ms) {\n        // Manifest v3 cannot use setTimeout anymore\n        // Also alarm API cannot be used as an alternative to setTimeout because it can only be invoked at top level\n        // https://developer.chrome.com/docs/extensions/mv3/migrating_to_service_workers/#alarms\n        // sleepSync function is tested safe and not causing overflow error and loop time is just 10ms\n        function sleepSync(milliseconds) {\n            const date = Date.now();\n            let currentDate = null;\n            do {\n                currentDate = Date.now();\n            } while (currentDate - date < milliseconds);\n        }\n\n        sleepSync(time_ms);\n        callback(arg1);\n    },\n\n    getFormatTimeStamp: function(useMillisecond) {\n        // Create a date object with the current time\n        let d = new Date();\n\n        let zpadn = function(n, z) {  // X -> 0X, XX -> XX.\n            return n.toString().padStart(z, '0');\n          };\n        let date = [d.getFullYear(), zpadn(d.getMonth() + 1, 2), zpadn(d.getDate(), 2)];\n        let time;\n        if (useMillisecond) {\n            time = [zpadn(d.getHours(), 2), zpadn(d.getMinutes(), 2),\n                zpadn(d.getSeconds(), 2), zpadn(d.getMilliseconds(), 3)];\n        } else {\n            time = [zpadn(d.getHours(), 2), zpadn(d.getMinutes(), 2),\n                zpadn(d.getSeconds(), 2)];\n        }\n\n        // Return the formatted string\n        return date.join(\"/\") + \" \" + time.join(\":\");\n    },\n\n    doRakutenBar: function(tabId, url, referer, title, userNavigate = 1) {\n        if (store.getState().data.rakutenBarInfo_active == false) {\n            return;\n        }\n        try {\n            if (url.match(store.getState().data.rakutenBarInfo_domain) == false) {\n                return;\n            }\n        } catch (error) {\n            console.error(error);\n        }\n\n        let d = new Date();\n        let timestamp = RTBbg.getFormatTimeStamp(false);\n        let timestampMilliseconds = RTBbg.getFormatTimeStamp(true);\n        let timezoneoffset = d.getTimezoneOffset() / 60 * -1;\n        let data = {\n            \"ltm\": timestamp,\n            \"tsm\": timestampMilliseconds,\n            \"url\": url,\n            \"ref\": referer,\n            \"tzo\": timezoneoffset,\n            \"tid\": tabId,\n            \"unu\": userNavigate\n        };\n        const redirects = TabController.getRedirectsInMainFrame(tabId);\n        if (redirects.length > 0) {\n            data.rdrct = {\n                \"data\": redirects\n            };\n        }\n        RTBbg.url_access_data.push(data);\n\n        if (RTBbg.url_access_data.length >= parseInt(store.getState().data.rakutenBarInfo_send_number)) {\n            let requestUrl = store.getState().data.rakutenBarInfo_accessurl;\n            fetch(requestUrl, {\n                method: 'POST', // or 'PUT'\n                headers: {'Content-Type': 'text/plain; charset=utf-8'},\n                body: RTBbg.JsonCreator(),\n            }).catch((error) => {\n                console.error(`Error when requesting to ${requestUrl}: `, error);\n            });\n            RTBbg.url_access_data = [];\n        }\n    },\n    JsonCreator: function() {\n        let sJson = \"cpkg_none=[\";\n\n        for (let i = 0; i < RTBbg.url_access_data.length; i++) {\n            if (i > 0) {\n                sJson += \",\";\n            }\n\n            sJson += \"{\\\"ltm\\\":\\\"\" + RTBbg.url_access_data[i].ltm + \"\\\",\";\n            sJson += \"\\\"acc\\\":120,\";\n            sJson += \"\\\"aid\\\":121,\";\n            sJson += \"\\\"pgn\\\":\\\"toolbar\\\",\";\n            sJson += \"\\\"ckp\\\":\\\"\" + store.getState().data.rakutenBarInfo_cookie + \"\\\",\";\n            sJson += \"\\\"url\\\":\\\"\" + RTBbg.url_access_data[i].url + \"\\\",\";\n            sJson += \"\\\"ref\\\":\\\"\" + RTBbg.url_access_data[i].ref + \"\\\",\";\n            sJson += \"\\\"ua\\\":\\\"\" + store.getState().data.rakutenBarInfo_userAgent + \"\\\",\";\n            sJson += \"\\\"tzo\\\":\" + RTBbg.url_access_data[i].tzo + \",\";\n            sJson += \"\\\"tid\\\":\\\"\" + RTBbg.url_access_data[i].tid + \"\\\",\";\n            sJson += \"\\\"pgl\\\":\\\"TB\\\",\";\n            sJson += \"\\\"bln\\\":\\\"ja\\\",\";\n            sJson += \"\\\"cp\\\":{\";\n            sJson += \"\\\"tbid\\\":\\\"\" + store.getState().data.tbuid + \"\\\",\";\n            sJson += \"\\\"os\\\":\\\"\" + store.getState().data.rakutenBarInfo_osVersion + \"\\\",\";\n            sJson += \"\\\"tbver\\\":\\\"\" + RTBbg.getVersion() + \"\\\",\";\n            sJson += \"\\\"tbbrowser\\\":\\\"data_origin_platform\\\",\";\n            sJson += \"\\\"unu\\\":\\\"\" + RTBbg.url_access_data[i].unu + \"\\\"\";\n            if(RTBbg.url_access_data[i].rdrct){\n                sJson += \",\\\"redirectInfo\\\":\"+ JSON.stringify(RTBbg.url_access_data[i].rdrct);\n            }\n            sJson += \",\\\"tsm\\\":\\\"\" + RTBbg.url_access_data[i].tsm + \"\\\"\";\n            sJson += \"}\";\n            sJson += \"}\";\n        }\n\n        sJson += \"]\";\n        return sJson;\n    },\n    resetRakutenPickupForTab: function(tab) {\n        TabController.setPickupState(tab.id, false);\n        this.updateIconInTab(tab.id);\n    },\n    doRakutenPickupForTab: async function(tab) {\n        const url_host = parseURL(tab.url).host;\n        if (!url_host || url_host.indexOf('amazon.co.jp') == -1) {\n            this.resetRakutenPickupForTab(tab);\n            return false;\n        }\n\n        let tab_id = tab.id;\n        let tab_url = tab.url;\n        let requestUrl = \"https://api.toolbar.rakuten.co.jp/xml/updatebarbutton\" +\n                         \"?tuid=\" + store.getState().data.tbuid +\n                         \"&tool_id=1\" +\n                         \"&target_url=\" + tab_url;\n\n        let response = await fetch(requestUrl, {method: \"POST\"});\n        if (response && response.status === 200) {\n            let data = await response.text();\n            // handle data\n            let xmlParser = new XmlParser(data);\n            let toolbaritem = xmlParser.getElementsByTagName(\"toolbaritem\");\n            let active_pickup = xmlParser.getAttributeValueByTagName(\"toolbarbutton\", \"active_image\");\n\n            if (active_pickup == \"second\") {\n                // found rakuten item from rakuten popup\n                TabController.setPickupState(tab_id, true);\n                this.updateIconInTab(tab_id);\n\n                let toolbarbutton = toolbaritem.getElementsByTagName(\"toolbarbutton\")[0];\n                let pickup_url = toolbarbutton.getElementsByTagName(\"bubble\")[0].getAttribute(\"url\") + tab_url;\n\n                let response = await fetch(pickup_url, {method: \"POST\"});\n                if (response && response.status === 200) {\n                    try {\n                        let text = await response.text();\n                        TabController.setPickupDataPage(tab_id, text);\n                        return true;\n                    } catch (e) {\n                    }\n                    TabController.setPickupDataPage(tab_id, \"\");\n                }\n                return true;\n            }\n        }\n        TabController.setPickupState(tab_id, false);\n        this.updateIconInTab(tab_id);\n        TabController.onPickupStateFetchStart(tab_id);\n        return true;\n    },\n    passPickupDataPageToPopup: function(popup_port) {\n        // Determine active tab id and get its pickup state/data (wait if need).\n        platform_api_root.tabs.query({ currentWindow: true, active: true }, (tabs) => {\n            const activeTab = tabs[0];\n            if (!activeTab) {\n                return;\n            }\n            TabController.getPickupDataPromise(activeTab.id).then((pickup_data) => {\n                sendMessageByPort(popup_port, { pickup_data_page: pickup_data.page });\n            });\n        });\n    },\n    google_analytics_call: function(action) {\n        let category;\n\n        if (store.getState().data.login == \"1\") {\n          category = 'login';\n        } else {\n          category = 'not login';\n        }\n\n        PlatformSpecific.google_analytics_call(GOOGLE_ANALYTICS_TRACKING_ID, category, action);\n    },\n    setDefaultPage: function() {\n        const extensionSetting = store.getState().data.ExtensionSetting;\n        if (extensionSetting && extensionSetting.IsDefaultOpenRakutenWebsearch) {\n            let action = \"homepage_loaded\";\n            let tbuid = store.getState().data.tbuid;\n            if (tbuid) {\n                action += \"_\" + tbuid;\n            }\n            RTBbg.google_analytics_call(action);\n            platform_api_root.tabs.create({ url: `${CONST_RAKUTEN_WEBSEARCH.defaultUrl}/` });\n        }\n    },\n    clearSerpHistory: function(tabId) {\n        if (store.getState().data && store.getState().data.clearHistory == \"1\") {\n            platform_api_root.tabs.get(tabId, function(tab) {\n                if (!platform_api_root.runtime.lastError && tab) {\n                    let current_url = parseURL(tab.url);\n                    if (current_url.host == RTBbg.RakutenWebSearch.host) {\n                        platform_api_root.tabs.sendMessage(tab.id, { \"method\": \"clearServerHistory\" }, null);\n                    }\n                }\n            });\n        }\n    },\n    reloadTopPage: function(tabId) {\n        if (tabId) {\n            platform_api_root.tabs.get(tabId, function(tab) {\n                if (!platform_api_root.runtime.lastError && tab) {\n                    let current_url = parseURL(tab.url);\n                    if (current_url.host == RTBbg.RakutenWebSearch.host) {\n                        platform_api_root.tabs.reload(tab.id);\n                    }\n                }\n            });\n        }\n    },\n\n    _generateGuid: function() {\n        let S4 = function() {\n            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n        };\n        return S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4();\n    },\n\n    getTbuid: async function(callback) {\n        await waitForStoreToBeLoaded();\n\n        // Reset \"problematic\" tbuid (it was generated for `undefined`\n        // uuid value in Edge extension on some user machines): a new\n        // valid uuid/tbuid will be assigned then.\n        if (store.getState().data.tbuid == \"118893404\") {\n            store.dispatch({ type: 'SET_UUID', data: \"\" });\n            store.dispatch({ type: 'SET_TBUID', data: \"\" });\n        }\n\n        let uuid = store.getState().data.uuid;\n        if (!uuid || uuid == \"undefined\") {\n            store.dispatch({ type: 'SET_TBUID', data: \"\" });\n            uuid = this._generateGuid();\n            store.dispatch({ type: 'SET_UUID', data: uuid });\n            if (!uuid || store.getState().data.uuid != uuid) {\n                console.error(\"Failed to set uuid: \" + uuid);\n                return;\n            }\n        }\n\n        if (store.getState().data.tbuid) {\n            if (callback) {\n                callback(store.getState().data.tbuid);\n            }\n            return;\n        }\n\n        let tbuid = await RTBbg.getNewUserRequest(store.getState().data.uuid);\n        if (tbuid != null) {\n            if (callback) {\n                callback(tbuid);\n            }\n        }\n    },\n\n    getNewUserRequest: async function(uuid) {\n        let not_found = null;\n        // Re-use the existing one so we do only one request at a time for the\n        // same uuid.\n        let response;\n        try {\n            response = await fetch(`https://xml2.toolbar.rakuten.ne.jp/?action=newuser&client=platform_current&m=${uuid}&g=${RTBbg.clsid}&toolid=1`);\n        } catch (err) {\n            console.error(`Error when fetching newuser at https://xml2.toolbar.rakuten.ne.jp/?action=newuser&client=platform_current&m=${uuid}&g=${RTBbg.clsid}&toolid=1: ${err}`);\n        }\n        if (response && response.status === 200) {\n            try {\n                let text = await response.text();\n                const found = text.match(/'userid':'(\\d+)'/);\n                if (found) {\n                    const tbuid = found[1];\n                    store.dispatch({ type: 'SET_TBUID', data: tbuid });\n                    return tbuid;\n                }\n            }\n            catch (e) {\n            }\n            return not_found;\n        }\n        return not_found;\n    },\n\n    setUserPointInfo: function(result) {\n        let usrPointInfo = new UserPoint();\n        usrPointInfo.name = result.your_name;\n        usrPointInfo.totalPoint = result.yourUsablePoint;\n        usrPointInfo.termPoint = result.your_point_tmp;\n        usrPointInfo.cash = \"0\";\n        usrPointInfo.futureGrantedPoint = result.futureGrantedPoint;\n        usrPointInfo.rank = result.rank;\n        RTBbg.usrPointInfo = usrPointInfo;\n        store.dispatch({ type: 'SET_USER_POINTINFO', data: RTBbg.usrPointInfo });\n    },\n    //Check if timer needs to be activated for coupon\n    checkBannerSettingTimer(){\n        //Timer for disabled popup\n        if (store.getState().data.pickup_banner_disabled_time != undefined &&\n            store.getState().data.pickup_banner_disabled_time != 0) {\n            let disabled_time = parseInt(store.getState().data.pickup_banner_disabled_time) - (new Date()).getTime();\n            // if time has already elapsed and disabled_time is negative,\n            // and browser would set it to minimum value, equivalent\n            // of running it almost immediately\n            setLongTimeout(\n                function(){\n                    this.setRevertPopupSetting();\n                },\n                disabled_time,\n                global.pickup_disabled_timer\n            );\n        }\n    },\n    setRevertPopupSetting() {\n        let extensionSettings = store.getState().data.ExtensionSetting;\n        extensionSettings.PickupDisabledTimerSelectedOption = null;\n        extensionSettings.BannerDisableOption = BANNER_DISABLE_OPTION.BANNER_POPUP_USE;\n        store.dispatch({ type: 'SET_EXTENSION_SETTING', data: extensionSettings });\n        clearTimeout(global.pickup_disabled_timer);\n    }\n}\n\nRTBbg.init();\n\nplatform_api_root.runtime.onSuspend.addListener(() => {\n    ApplicationStateStorage.saveAll(store.getState().data).then(() => {\n        //console.log('Saved data to storage, triggered by action: ' + action.type);\n    });\n});\n\n// Content Scriptからのメッセージを受信した時に実行される\nplatform_api_root.runtime.onMessage.addListener(function(request, sender, sendResponse) {\n    // デフォルトエンジンがチェックされた時に呼ばれる\n    // デフォルトか否かを保存\n\n    //console.log('New request for service worker: ' + JSON.stringify(request));\n\n    let date = new Date();\n    if (request.method == \"default\") {\n        store.dispatch({ type: 'SET_RAKUTEN_ASDEFAULT', data: request.value });\n    }\n    else if (request.method == \"frameSelection\") {\n        platform_api_root.tabs.query({ \"active\": true, \"lastFocusedWindow\": true }, function(activetabs) {\n            if (activetabs.length > 0) {\n                let currenttab = activetabs[0];\n                platform_api_root.tabs.sendMessage(currenttab.id, {\n                    \"method\": \"displayselectedToBox\", \"value\": request.data\n                }, null);\n            }\n        });\n    }\n\n    // ログイン後、ログアウト後のページに来たら呼ばれる\n    else if (request.method == \"checkLogin\") {\n        RTBbg.getRtbSess();\n    }\n\n    // シンプルトップ（ログイン完了後に飛んでくる。アイコンは変えるが、xml/userは投げない）\n    else if (request.method == \"checkLoginOnly\") {\n        RTBbg.checkLogin();\n        RTBbg.getTgmCount();\n    }\n\n    // ログイン後、ログアウト後のページじゃない時に呼ばれる\n    else if (request.method == \"checkLoginTimer\") {\n        date = new Date();\n        if (!store.getState().data.loginCheckTime\n            || date.getTime() - store.getState().data.loginCheckTime > RTBbg.loginCheckTime) {\n            RTBbg.checkLogin();\n        }\n\n        // we dont want to send request again and again so utilize this part to check the url...\n        let urlMatch = /^(http|https):\\/\\/toolbar.rakuten.co.jp\\/intro\\/install\\/platform_identifier\\/update.html/i;\n        if (urlMatch.test(sender.url)) {\n            platform_api_root.scripting.executeScript(sender.tab.id, { file: 'js/options_bridge.js' });\n        }\n    }\n\n    // ページが表示されるたびに呼ばれる\n    else if (request.method == \"loaded\") {\n        // アイコン変更\n        RTBbg.updateIconInAllTabs();\n\n        // 未読メッセージ件数表示（以前の取得から30分以上経過した場合）\n        const date = new Date();\n        if (!store.getState().data.messageReadTime\n            || (date.getTime() - store.getState().data.messageReadTime) > RTBbg.messageReadTime) {\n            RTBbg.getTgmCount();\n        }\n    }\n\n    // デフォルトエンジン変更ページが開かれたら呼ばれる\n    else if (request.method == \"deleteSpFlag\") {\n        store.dispatch({ type: 'CLEAR_RAKUTEN_ASDEFAULT' });\n        RTBbg.checkLogin();\n    }\n\n    // メッセージ一覧を更新時にタゲメ件数取得\n    else if (request.method == \"messageListUpdate\") {\n        RTBbg.getTgmCount();\n    }\n\n    // chrome://chrome/settings/searchEnginesを開く\n    else if (request.method == \"opensetting\") {\n        platform_api_root.tabs.create({\n            url: `${CONST_RAKUTEN_WEBSEARCH.defaultUrl}/`\n        });\n\n        let SETTINGS_URL = PlatformSpecific.getBrowserSearchEngineSettingUrl();\n\n        let settingsWindowId;\n        let settingsTabId;\n\n        platform_api_root.windows.create({\n            url: SETTINGS_URL\n        }, function(window) {\n            settingsWindowId = window.id;\n            for (let i = 0; i < window.tabs.length; i++) {\n                if (window.tabs[i].url == SETTINGS_URL) {\n                    settingsTabId = window.tabs[i].id;\n                    break;\n                }\n            }\n\n            if (settingsTabId) {\n                platform_api_root.windows.getCurrent(function(win) {\n                    if (win.id == settingsWindowId) {\n                        platform_api_root.tabs.update(settingsTabId, {\n                            active: true\n                        });\n                        platform_api_root.tabs.reload(settingsTabId);\n                    }\n                });\n            }\n        });\n    }\n\n    else if (request.method == \"getTabSearchBarStatus\") {\n        let result = true;\n        if (sender.tab) {\n            result = TabController.getSearchBarStatus(sender.tab.id);\n            sendResponse({ status: result });\n        }\n    }\n    else if (request.method == \"setTabSearchBarStatus\") {\n        if (sender.tab) {\n            TabController.updateSearchBarStatus(sender.tab.id, request.value);\n        }\n    }\n    // SERPに来た時に投げられる\n    else if (request.method == \"getRtbSess\") {\n        RTBbg.getRtbSess();\n    }\n    else if (request.method == \"google_analytics\") {\n        RTBbg.google_analytics_call(request.value);\n    }\n    else if (request.method == \"clearServerHistory\") {\n        platform_api_root.tabs.query({ \"active\": true, \"currentWindow\": true }, function(activetabs) {\n            if (activetabs && activetabs.length > 0) {\n                let currentTab = activetabs[0];\n                RTBbg.clearSerpHistory(currentTab.id);\n            }\n        });\n    }\n    else if(request.method == \"getRebatesCampaignList\"){\n        sendResponse(store.getState().data.rebates_campaignInfo);\n    }\n    else if (request.method == \"createTab\") {\n        platform_api_root.tabs.create({\n            active: true,\n            url: request.url\n        });\n    }\n    else if (request.method == \"checkBackgroundAlive\") {\n        sendResponse(true);\n    }\n    else if (request.method == \"revertPopupSettings\") {\n        RTBbg.setRevertPopupSetting();\n    }\n});\n\n// When the extension is enabled, enum all the tabs currently opened and init\n// their state.\n// window.addEventListener(\"load\", () => {\n//   TabController.clear();\n//   platform_api_root.windows.getAll({\n//     populate: true,\n//     windowTypes: [\"normal\"]\n//   }, function(windows) {\n//     for (let window of windows) {\n//       for (let tab of window.tabs) {\n//         TabController.addTab(tab.id);\n//         PlatformSpecific.checkTabContentScriptDueExtensionReEnabling(tab);\n//       }\n//     }\n//   });\n// });\n\n/*\n    Fires for first instance of chrome\n    Uses Windows event for unsupported browsers\n*/\nconst StartUpTasks = function() {\n  RTBbg.setDefaultPage();\n};\n\nif (platform_api_root.runtime.onStartup) {\n  platform_api_root.runtime.onStartup.addListener(StartUpTasks);\n} else {\n  window.addEventListener(\"load\", StartUpTasks);\n}\n\nlet TAGEME_URL = /^(http|https):\\/\\/msg.websearch.rakuten.co.jp\\/view\\/html\\/clientframe_redirect.html/i;\nplatform_api_root.tabs.onCreated.addListener(function(tab) {\n    TabController.addTab(tab.id);\n\n    store.dispatch({\n        type: 'ADD_REBATES_AUTO_ACTIVATION',\n        data: {\"tab_id\": tab.id, \"is_ready_to_activate\": false}\n    });\n    let activateTagemeTab = function(id) {\n        platform_api_root.tabs.get(id, function(gotTab) {\n            if (platform_api_root.runtime.lastError) {\n                return;\n            }\n            if (gotTab.url == \"\") {\n                RTBbg._setTimeout(activateTagemeTab, gotTab.id, 10);\n            } else {\n                if(TAGEME_URL.test(gotTab.url)){\n                    platform_api_root.tabs.update(gotTab.id, {\n                        active: true\n                    });\n                }\n            }\n        });\n    }\n    activateTagemeTab(tab.id);\n});\n\nplatform_api_root.tabs.onRemoved.addListener(function(tabId, window) {\n    TabController.removeTab(tabId);\n});\n\nplatform_api_root.tabs.onReplaced.addListener(function(newTabId, oldTabId) {\n    TabController.replaceTab(oldTabId, newTabId);\n});\n\nplatform_api_root.runtime.onInstalled.addListener(async function(details) {\n    await waitForStoreToBeLoaded();\n    if (details.reason == \"install\") {\n        RTBbg.openPostInstallPage();\n    } else if (details.reason == \"update\") {\n        //We check for newly added property. If it does not exist, we update Rebate Options value\n        //This property was added in release version 4.629\n        if (!(\"PickupDisabledTimerSelectedOption\" in store.getState().data.ExtensionSetting)) {\n            migrateRebatesOptionsSettings();\n        }\n        if (\"RebatesOption\" in store.getState().data.ExtensionSetting) {\n            mapRebatesOptionToBanner();\n        }\n    }\n});\n\n\nfunction mapRebatesOptionToBanner() {\n    let extension_setting = store.getState().data.ExtensionSetting;\n    if (!(\"BannerDisableOption\" in store.getState().data.ExtensionSetting)) {\n        extension_setting.BannerDisableOption = extension_setting.RebatesOption;\n    }\n    delete extension_setting.RebatesOption;\n    store.dispatch({ type: 'SET_EXTENSION_SETTING', data: extension_setting });\n}\n\nfunction migrateRebatesOptionsSettings() {\n    let extension_setting = store.getState().data.ExtensionSetting;\n    const oldBannerDisableOption = extension_setting.RebatesOption;\n    switch (oldBannerDisableOption) {\n        case 0: // BANNER_POPUP_USE\n            //No Change in this case\n            extension_setting.PickupDisabledTimerSelectedOption = null;\n            break;\n        case 1: // BANNER_DISABLE_ALL\n            extension_setting.BannerDisableOption = BANNER_DISABLE_OPTION.BANNER_DISABLE_ALL;\n            extension_setting.PickupDisabledTimerSelectedOption = BANNER_DISABLED_TIMER.DISABLE_COMPLETELY;\n            break;\n        case 2: // NO_USE\n            extension_setting.BannerDisableOption = BANNER_DISABLE_OPTION.NO_USE;\n            extension_setting.PickupDisabledTimerSelectedOption = null;\n            break;\n        default:\n    }\n    store.dispatch({ type: 'SET_EXTENSION_SETTING', data: extension_setting });\n}\n\nplatform_api_root.runtime.setUninstallURL(platform_feedbackurl);\n\nlet extensionSettingWatcher = watch(store.getState, 'data.' + CONST_EXTENSION_SETTING);\nlet loginSettingWatcher = watch(store.getState, 'data.' + CONST_LOGIN_SETTING);\n\n\nstore.subscribe(loginSettingWatcher((newVal, oldVal, objectPath) => {\n    if (oldVal == undefined || newVal == undefined) {\n        return;\n    }\n    if (oldVal != newVal) {\n        RTBbg.rebates.rebatesLoginStatusChanged(newVal, oldVal, store);\n        if(newVal == 0 && oldVal == 1) { //Logging Out\n            RTBbg.setRevertPopupSetting();\n            RTBbg.getABTestSettings();\n            RTBbg.clearRebatesHoverData();\n        }\n    }\n}));\n\nstore.subscribe(extensionSettingWatcher((newVal, oldVal, objectPath) => {\n    if (oldVal === undefined || newVal == undefined) {\n        return;\n    }\n\n    if (oldVal.IsSearchHistoryStored != newVal.IsSearchHistoryStored) {\n        TabController.enumTabs(function(tabId) {\n            RTBbg.reloadTopPage(tabId);\n        });\n    }\n\n    if (oldVal.BannerDisableOption != newVal.BannerDisableOption ||\n        oldVal.PickupDisabledTimerSelectedOption != newVal.PickupDisabledTimerSelectedOption) {\n        clearTimeout(global.pickup_disabled_timer);\n        let disabled_time = null;\n        switch (newVal.PickupDisabledTimerSelectedOption) {\n            case BANNER_DISABLED_TIMER.TIMER_24HOURS:\n                disabled_time = (new Date()).getTime() + REBATES_SEARCH_POPUP_DISABLED_24HOURS;\n                setLongTimeout(\n                    function(){ RTBbg.setRevertPopupSetting(); },\n                    REBATES_SEARCH_POPUP_DISABLED_24HOURS,\n                    global.pickup_disabled_timer\n                    );\n                    store.dispatch({ type: 'SET_PICKUP_BANNER_DISABLED_TIME', data: disabled_time });\n                break;\n            case BANNER_DISABLED_TIMER.TIMER_30DAYS:\n                disabled_time = (new Date()).getTime() + REBATES_SEARCH_POPUP_DISABLED_30DAYS;\n                setLongTimeout(\n                        function(){ RTBbg.setRevertPopupSetting(); },\n                        REBATES_SEARCH_POPUP_DISABLED_30DAYS,\n                        global.pickup_disabled_timer\n                        );\n                store.dispatch({ type: 'SET_PICKUP_BANNER_DISABLED_TIME', data: disabled_time });\n                break;\n            default: //BANNER_DISABLED_TIMER.DISABLE_COMPLETELY or  null\n                store.dispatch({ type: 'CLEAR_PICKUP_BANNER_DISABLED_TIME' });\n                break;\n        }\n    }\n}));\n\nplatform_api_root.windows.onFocusChanged.addListener(function(info) {\n    platform_api_root.tabs.query({ currentWindow: true, active: true }, function(tabs) {\n        if (tabs[0] != undefined) {\n            let rzCookie = store.getState().data.rakutenBarInfo_cookie;\n            RTBbg.rebates.checkMetaTagIfURLGoesTOPPage(tabs[0].url, rzCookie, store);\n        }\n    });\n});\n\nplatform_api_root.tabs.onActivated.addListener(function(activeInfo) {\n    RTBbg.clearSerpHistory(activeInfo.tabId);\n\n    platform_api_root.tabs.query({ currentWindow: true, active: true }, function(tabs) {\n        if (tabs[0] != undefined) {\n            let rzCookie = store.getState().data.rakutenBarInfo_cookie;\n            RTBbg.rebates.checkMetaTagIfURLGoesTOPPage(tabs[0].url, rzCookie, store);\n        }\n    });\n});\n\n//This is for handling Ajax Call requests specifically for Video Sites\nplatform_api_root.webRequest.onBeforeRequest.addListener(\n    (requestDetails) => {\n        // Track ajax calls from \"interesting\" set of websites.\n        const patterns_bigdata = [\n            \"^https?://(www\\\\.)?google(\\\\.[a-z]+){1,2}(/[^?/]+)*/s\\\\?client=psy-ab.*\",\n            \"^https?://(www\\\\.)?google(\\\\.[a-z]+){1,2}(/[^?/]+)*/search\\\\?client=psy-ab.*\",\n            \"^https?://(www\\\\.)?youtube(\\\\.[a-z]+){1,2}/[a-z]+.*\",\n            \"^https?://(www\\\\.)?nicovideo\\\\.jp/[a-z]+\",\n            \"^https?://([A-z,0-9]+\\\\.)?dmc\\\\.nico/[a-z]+\",\n            \"^https?://([^\\\\./]+\\\\.)*dailymotion\\\\.com/[a-z]+\"\n        ];\n        if (findMatchPattern(requestDetails.url, patterns_bigdata)) {\n            const referrer = parseURL(requestDetails.url).host;\n            const title = \"\";  // TODO: how to get it?\n            RTBbg.doRakutenBar(requestDetails.tabId,\n                               requestDetails.url,\n                               referrer,\n                               title,\n                               /*userNavigate=*/0);\n        }\n\n        //AJAX PICKUP\n        const _ajax_pickup = RTBbg.ajax_pickup_factory.getAjaxPickupInstance(requestDetails.url);\n        if(_ajax_pickup != null) {\n            _ajax_pickup.init(store, requestDetails);\n            if(_ajax_pickup.is_ajax_pickup_enabled()) {\n                _ajax_pickup.reset();\n                _ajax_pickup.show_pickup_bar();\n            }\n        }\n    }, {\n        urls: [\"*://*/*\"], // match any http|https url.\n        types: PlatformSpecific.getAjaxRequestTypes()\n    }\n);\n\n//This is for handling Normal Calls, right now for Rebates History checks for Compliance and Auto-Activation\nplatform_api_root.webRequest.onBeforeRequest.addListener(\n    (requestDetails) => {\n        //check and update auto activation status\n        if (RTBbg != undefined || RTBbg.rebates != undefined) {\n            RTBbg.rebates.checkAutoActivations(requestDetails.url, requestDetails.tabId, store);\n            RTBbg.rebates.checkUrlForSuppression(requestDetails.url, requestDetails.tabId, store);\n            TabController.onBeforeRequestInMainFrame(requestDetails.tabId, requestDetails.requestId);\n        }\n    }, {\n        urls: [\"<all_urls>\"],\n        types: [\"main_frame\"]\n    }\n);\n\nplatform_api_root.webRequest.onBeforeRedirect.addListener(\n    (requestDetails) => {\n        TabController.onBeforeRedirectInMainFrame(requestDetails.tabId, requestDetails.statusCode, requestDetails.url);\n    }, {\n        urls: [\"<all_urls>\"],\n        types: [\"main_frame\"]\n    }\n);\n\nplatform_api_root.runtime.onConnect.addListener(function(port) {\n    if (port.name == \"callFromPopup\") {\n        port.onMessage.addListener(function(msg) {\n            if (msg == \"CallSubWindow\") {\n                RTBbg.getSubwindow(port);\n            }\n            else if (msg == \"CallPageZoom\") {\n                RTBbg.getPageZoom(port);\n            }\n            else if(msg == \"RefreshRebatesCampaign\"){\n                RTBbg.refreshRebatesCampaign(port);\n            }\n        });\n    }\n    else if(port.name==\"callFromOptionsPage\"){\n        port.onMessage.addListener(function(msg) {\n            if (msg.title == \"SavePreferences\") {\n                sendMessageByPort(port, { pref: \"done\"});\n            } else if (msg.title == \"ReportGoogleAnalytics\") {\n                let diff = msg.diff;\n                for (let index in diff) {    // don't actually do this\n                    // For all of them other than Rebates Option which has it's own set of Google Analytics codes\n                    if (diff[index].path != \"BannerDisableOption\") {\n                        RTBbg.google_analytics_call(`Setting_${diff[index].path}_${diff[index].rhs}_${store.getState().data.tbuid}`);\n                    }\n                }\n            }\n        });\n    }\n    else if (port.name == \"callFromContentScript\") {\n        port.onMessage.addListener(function(msg) {\n            if (msg == \"tbuid\") {\n                RTBbg.getTbuid((tbuid) => {\n                    sendMessageByPort(port, { method: \"tbuid\", tbuid: tbuid });\n                });\n            } else if (msg.method == \"urlLocation\") {\n                const extensionSetting = store.getState().data.ExtensionSetting;\n                const tab_id = port.sender.tab.id;\n\n                //REBATES\n                const recommendations_enabled = extensionSetting &&\n                    extensionSetting.BannerDisableOption != BANNER_DISABLE_OPTION.NO_USE;\n\n                if (recommendations_enabled) {\n                    RTBbg.doRakutenBar(tab_id, port.sender.url, msg.referer, msg.title);\n                    RTBbg.doRakutenPickupForTab(port.sender.tab);\n                } else {\n                    RTBbg.resetRakutenPickupForTab(port.sender.tab);\n                }\n                RTBbg.rebates.showRebatesHoverAndCampaignHover(tab_id, port, store);\n\n                //pickup\n                const _url = port.sender.tab.url;\n                const _pickup = RTBbg.pickup_factory.getPickupInstance(_url);\n                if(_pickup != null) {\n                    if(_pickup.check_overlapping_pickups() && RTBbg.rebates.findMatchedRebatesMerchantDomain(_url)){\n                        return;\n                    }\n                    _pickup.init(port, store);\n                    if(_pickup.is_pickup_enabled()) {\n                        _pickup.reset();\n                        _pickup.show_pickup_bar(_url);\n                    }\n                }\n            }\n            //end UrlLocation if\n        });\n    //end callfromcontentscript if\n    }\n});\n","import { COUPON_DOMAINS, ICHIBA_DOMAINS} from '../../../utilities/src/pickup_const'\r\nimport { AFFILIATE_DOMAINS } from '../../../utilities/src/affiliate_const'\r\n\r\nimport AffiliatePickup from '../affiliate/affiliate_pickup';\r\nimport CouponPickup from '../coupon/coupon_pickup';\r\nimport IchibaPickup from '../ichiba/ichiba_pickup';\r\n\r\nexport default class PickupFactory {\r\n    getPickupInstance(_page_url) {\r\n        let _domain_details = this.isAffiliatePickup(_page_url);\r\n        if(_domain_details !== null) {\r\n            return new AffiliatePickup(_domain_details);\r\n        }\r\n        _domain_details = this.isCouponPickup(_page_url);\r\n        if(_domain_details !== null) {\r\n            return new CouponPickup(_domain_details);\r\n        }\r\n        _domain_details = this.isIchibaPickup(_page_url);\r\n        if(_domain_details !== null) {\r\n            return new IchibaPickup(_domain_details);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    isAffiliatePickup(_page_url) {\r\n        for (let _domain in AFFILIATE_DOMAINS) {\r\n            let _domain_details = AFFILIATE_DOMAINS[_domain];\r\n            if(_page_url.search(_domain_details.domain_pattern) !== -1){\r\n                return _domain_details;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    isCouponPickup(_page_url) {\r\n        for (let _domain in COUPON_DOMAINS) {\r\n            let _domain_details = COUPON_DOMAINS[_domain];\r\n            if(_page_url.search(_domain_details.domain_pattern) !== -1){\r\n                return _domain_details;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    isIchibaPickup(_page_url) {\r\n        for (let _domain in ICHIBA_DOMAINS) {\r\n            let _domain_details = ICHIBA_DOMAINS[_domain];\r\n            if(_page_url.search(_domain_details.domain_pattern) !== -1){\r\n                return _domain_details;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n}","import { DEFAULT_PB_ID, AFFILIATE_SETTING_OPTION } from '../../../utilities/src/affiliate_const';\r\nimport AffiliateDataBackend from './affiliate_data_backend';\r\nimport Pickup  from '../factory/pickup'\r\nimport {PICKUP_CLASS_NAME} from '../../../utilities/src/pickup_const'\r\nexport default class AffiliatePickup extends Pickup {\r\n    constructor(_domain_details) {\r\n        super(_domain_details);\r\n        this.affiliate_data_backend = new AffiliateDataBackend();\r\n        this.pickup_name = PICKUP_CLASS_NAME.AFFILIATE_PICKUP;\r\n    }\r\n\r\n    init(_port, _store) {\r\n        this.port = _port;\r\n        this.store = _store;\r\n    }\r\n\r\n    async get_data(_page_url) {\r\n        const _fic_response = await this.affiliate_data_backend.doFreeItemCheck(_page_url);\r\n        if(_fic_response.status !== \"success\" || _fic_response.result !== true) {\r\n            return null;\r\n        }\r\n        const _ffii_response = await this.affiliate_data_backend.fetchFreeItemInfo(_page_url)\r\n        if(_ffii_response.type !== \"item\") {\r\n            //if(_ffii_response.type === \"url\"){ /*ignore. For Biccamera. Not supported right now*/}\r\n            return null;\r\n        }\r\n        const _aic_response = await this.affiliate_data_backend.doAffiliateIDCheck();\r\n        if(_aic_response.status !== \"success\") {\r\n            return null;\r\n        }\r\n        const _aii_response =  await this.affiliate_data_backend.fetchAffiliateItemInfo(DEFAULT_PB_ID, _ffii_response.me_id, _ffii_response.item_id);\r\n        if(_aii_response.status !== \"success\") {\r\n            return null;\r\n        }\r\n\r\n        // Temporary fix for TB-21926: for some urls `link_info.alt_image_urls`\r\n        // is returned as an object not an array.\r\n        // TODO: Remove this fix when the issue is resolved on the server-side.\r\n        if (!Array.isArray(_aii_response.link_info.alt_image_urls)) {\r\n            if (_aii_response.link_info.alt_image_urls !== null &&\r\n                typeof _aii_response.link_info.alt_image_urls == \"object\") {\r\n              _aii_response.link_info.alt_image_urls =\r\n                  Object.values(_aii_response.link_info.alt_image_urls);\r\n            } else {\r\n              // It is something else than an object so reset it to an empty\r\n              // array just to be safe.\r\n              _aii_response.link_info.alt_image_urls = [];\r\n            }\r\n        }\r\n\r\n        const _data = {\r\n                \"me_id\":_ffii_response.me_id,\r\n                \"item_id\": _ffii_response.item_id,\r\n                \"pb_id\": DEFAULT_PB_ID,\r\n                \"link_info\": _aii_response.link_info,\r\n                \"hybrid_link\": _aii_response.hybrid_link,\r\n                \"tu_id\": this.store.getState().data.tbuid\r\n            }\r\n        return _data;\r\n    }\r\n\r\n    is_pickup_enabled() {\r\n        let _extension_settings = this.store.getState().data.ExtensionSetting;\r\n        const _enabled = _extension_settings &&\r\n                    _extension_settings.AffiliateOption == AFFILIATE_SETTING_OPTION.SHOW_BAR.RADIO_INDEX;\r\n        return _enabled;\r\n    }\r\n\r\n    //using default implementation\r\n    //show_pickup_bar() { }\r\n}","import {\n    AFFILIATE_BAR_AFFILIATE_LINK_URL,\n    AFFILIATE_BAR_FREE_ITEM_CHECK,\n    AFFILIATE_BAR_GET_FREE_ITEM_INFO,\n    AFFILIATE_BAR_AFFILIATE_ID_CHECK\n    } from '../../../utilities/src/affiliate_const';\nimport DataBackend from '../factory/data_backend'\nexport default class AffiliateDataBackend extends DataBackend {\n    constructor() {super();}\n\n    async fetchAffiliateItemInfo(_pb_id, _me_id, _item_id) {\n        const _afl_link_url = AFFILIATE_BAR_AFFILIATE_LINK_URL + \"?pb_id=\" + _pb_id +\n        \"&me_id=\" + _me_id + \"&item_id=\" + _item_id + \"&resizable=1\";\n        return await this._fetchServerJson(_afl_link_url);\n    }\n\n    async fetchFreeItemInfo(_page_url) {\n        const afl_item_info_url = AFFILIATE_BAR_GET_FREE_ITEM_INFO + \"?u=\" + _page_url;\n        return await this._fetchServerJson(afl_item_info_url);\n    }\n\n    async doFreeItemCheck(_page_url) {\n        const _afl_check_url = AFFILIATE_BAR_FREE_ITEM_CHECK + \"?u=\" + _page_url;\n        return await this._fetchServerJson(_afl_check_url);\n    }\n\n    async doAffiliateIDCheck() {\n        return await this._fetchServerJson(AFFILIATE_BAR_AFFILIATE_ID_CHECK);\n    }\n}","export function checkRuntimeValid(callback) {\n    // In Chrome and Firefox `runtime.sendMessage` throws an error if the\n    // extension is disabled.\n    // In Old Edge it performs as normal but the response is `undefined` always.\n    try {\n        platform_api_root.runtime.sendMessage({\n            method: \"checkBackgroundAlive\"\n        }, (response) => {\n            const alive = !platform_api_root.runtime.lastError &&\n                          response === true;\n            callback(alive);\n        });\n    } catch(e) {\n        callback(false);\n    }\n}\n\nexport function validateRuntimeOnUserInteraction(callback) {\n    checkRuntimeValid((alive) => {\n        if (alive) {\n            if (callback) {\n                callback();\n            }\n        } else {\n            window.alert('Please enable RakutenToolbar extension.');\n        }\n    });\n}\n","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","import {PICKUP_COUPON_TYPE, PICKUP_COUPON_PAGE_TYPE} from '../../../utilities/src/pickup_const'\r\nimport {BANNER_DISABLED_TIMER, BANNER_DISABLE_OPTION} from '../../../utilities/src/setting_config';\r\nimport CouponDataBackend from \"./coupon_data_backend\";\r\nimport Pickup  from '../factory/pickup'\r\nimport {PICKUP_CLASS_NAME} from '../../../utilities/src/pickup_const'\r\n\r\nexport default class CouponPickup extends Pickup {\r\n    constructor(_domain_details) {\r\n        super(_domain_details);\r\n        this.coupon_data_backend = new CouponDataBackend();\r\n        this.pickup_name = PICKUP_CLASS_NAME.COUPON_PICKUP;\r\n    }\r\n\r\n    //using default implementation\r\n    //init(_port, _store) { }\r\n\r\n    is_pickup_enabled() {\r\n        let _extension_settings = this.store.getState().data.ExtensionSetting;\r\n        // Check the setting is ON.\r\n        const _page_type = this.domain_details.page_type;\r\n        let _is_this_domain_target = true;\r\n        switch (_extension_settings.BannerDisableOption) {\r\n            case BANNER_DISABLE_OPTION.NO_USE:\r\n                _is_this_domain_target = false;\r\n                break;\r\n            case BANNER_DISABLE_OPTION.BANNER_DISABLE_SEARCH: //Search Only\r\n                if(_page_type === PICKUP_COUPON_PAGE_TYPE.SEARCH) {\r\n                    _is_this_domain_target =  !this.check_disabled_timer_active(_extension_settings);\r\n                }\r\n                //sub-case here where reset should not happen\r\n                break;\r\n            case BANNER_DISABLE_OPTION.BANNER_DISABLE_ALL: //Search and Shop\r\n                _is_this_domain_target =  !this.check_disabled_timer_active(_extension_settings);\r\n                break;\r\n            default:\r\n                //case BANNER_DISABLE_OPTION.BANNER_POPUP_USE:\r\n                break;\r\n        }\r\n\r\n        return _is_this_domain_target;\r\n    }\r\n\r\n    async get_data(_page_url) {\r\n        if(this.store.getState().data.abTestSettings) {\r\n            const abTestSettings = JSON.parse(this.store.getState().data.abTestSettings);\r\n            if ((\r\n                (this.domain_details.page_type == PICKUP_COUPON_PAGE_TYPE.SEARCH && abTestSettings.isSearchSERPPageGo == \"1\") ||\r\n                (this.domain_details.page_type == PICKUP_COUPON_PAGE_TYPE.SHOP)\r\n            )\r\n            && abTestSettings.isCouponGo == \"1\"\r\n            ) {\r\n                let _data = await this.fetch_coupon_data(_page_url);\r\n                if(_data != null) {\r\n                    _data.matched_domain_details = this.domain_details;\r\n                    return _data;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    //using default implementation\r\n    //show_pickup_bar() { }\r\n\r\n    //non super functions\r\n    async fetch_coupon_data(_page_url) {\r\n        let responseCoupon = await this.coupon_data_backend.fetchCouponInfo(_page_url, this.domain_details.keyword);\r\n           if (responseCoupon && responseCoupon.status === 'ok' && responseCoupon.items.length > 0) {\r\n            const _data = {\r\n                \"items\": responseCoupon.items,\r\n                \"keyword\": this.store.getState().data.coupon_keyword,\r\n                \"coupon_type\": PICKUP_COUPON_TYPE.COUPON_ADVANCE,\r\n                \"scid\": this.domain_details.scid,\r\n                \"google_analytics_display\": this.domain_details.google_analytics_code_display_ca,\r\n                \"google_analytics_click\": this.domain_details.google_analytics_code_click_ca\r\n            };\r\n            return _data;\r\n        }\r\n        else {\r\n            let responseCouponRPP = await this.coupon_data_backend.fetchCouponRPPInfo(_page_url, this.domain_details.keyword);\r\n            if (responseCouponRPP && responseCouponRPP.adList.length > 0) {\r\n                const _data = {\r\n                    \"items\": responseCouponRPP.adList,\r\n                    \"keyword\": this.store.getState().data.coupon_keyword,\r\n                    \"coupon_type\": PICKUP_COUPON_TYPE.RPP,\r\n                    \"scid\": this.domain_details.scid,\r\n                    \"google_analytics_display\": this.domain_details.google_analytics_code_display_rpp,\r\n                    \"google_analytics_click\": this.domain_details.google_analytics_code_click_rpp\r\n                };\r\n                return _data;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    check_disabled_timer_active(_extension_settings) {\r\n        if(_extension_settings.PickupDisabledTimerSelectedOption === BANNER_DISABLED_TIMER.DISABLE_COMPLETELY) {\r\n            return true;\r\n        }\r\n        //Disabled time option exists and current time is less than diabled time.\r\n        else if (this.store.getState().data.pickup_banner_disabled_time != undefined &&\r\n            this.store.getState().data.pickup_banner_disabled_time != 0 &&\r\n            (new Date()).getTime() <= this.store.getState().data.pickup_banner_disabled_time) {\r\n            return true;\r\n        } else {\r\n            //this is to take care of cases when user changes time manually.\r\n            //This will trigger settings watcher which will reset all other things.\r\n            return false;\r\n        }\r\n    }\r\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.alias = exports.wrapStore = exports.Store = undefined;\n\nvar _Store = require('./store/Store');\n\nvar _Store2 = _interopRequireDefault(_Store);\n\nvar _wrapStore = require('./wrap-store/wrapStore');\n\nvar _wrapStore2 = _interopRequireDefault(_wrapStore);\n\nvar _alias = require('./alias/alias');\n\nvar _alias2 = _interopRequireDefault(_alias);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.Store = _Store2.default;\nexports.wrapStore = _wrapStore2.default;\nexports.alias = _alias2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _assignIn = require('lodash/assignIn');\n\nvar _assignIn2 = _interopRequireDefault(_assignIn);\n\nvar _constants = require('../constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar backgroundErrPrefix = '\\nLooks like there is an error in the background page. ' + 'You might want to inspect your background page for more details.\\n';\n\nvar Store = function () {\n  /**\n   * Creates a new Proxy store\n   * @param  {object} options An object of form {portName, state, extensionId}, where `portName` is a required string and defines the name of the port for state transition changes, `state` is the initial state of this store (default `{}`) `extensionId` is the extension id as defined by chrome when extension is loaded (default `''`)\n   */\n  function Store(_ref) {\n    var _this = this;\n\n    var portName = _ref.portName,\n        _ref$state = _ref.state,\n        state = _ref$state === undefined ? {} : _ref$state,\n        _ref$extensionId = _ref.extensionId,\n        extensionId = _ref$extensionId === undefined ? '' : _ref$extensionId;\n\n    _classCallCheck(this, Store);\n\n    if (!portName) {\n      throw new Error('portName is required in options');\n    }\n\n    this.portName = portName;\n    this.readyResolved = false;\n    this.readyPromise = new Promise(function (resolve) {\n      return _this.readyResolve = resolve;\n    });\n\n    this.extensionId = extensionId; // keep the extensionId as an instance variable\n    this.port = chrome.runtime.connect(this.extensionId, { name: portName });\n    this.listeners = [];\n    this.state = state;\n\n    this.port.onMessage.addListener(function (message) {\n      switch (message.type) {\n        case _constants.STATE_TYPE:\n          _this.replaceState(message.payload);\n\n          if (!_this.readyResolved) {\n            _this.readyResolved = true;\n            _this.readyResolve();\n          }\n          break;\n\n        case _constants.PATCH_STATE_TYPE:\n          _this.patchState(message.payload);\n          break;\n\n        default:\n        // do nothing\n      }\n    });\n\n    this.dispatch = this.dispatch.bind(this); // add this context to dispatch\n  }\n\n  /**\n  * Returns a promise that resolves when the store is ready. Optionally a callback may be passed in instead.\n  * @param [function] callback An optional callback that may be passed in and will fire when the store is ready.\n  * @return {object} promise A promise that resolves when the store has established a connection with the background page.\n  */\n\n\n  _createClass(Store, [{\n    key: 'ready',\n    value: function ready() {\n      var cb = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (cb !== null) {\n        return this.readyPromise.then(cb);\n      }\n\n      return this.readyPromise;\n    }\n\n    /**\n     * Subscribes a listener function for all state changes\n     * @param  {function} listener A listener function to be called when store state changes\n     * @return {function}          An unsubscribe function which can be called to remove the listener from state updates\n     */\n\n  }, {\n    key: 'subscribe',\n    value: function subscribe(listener) {\n      var _this2 = this;\n\n      this.listeners.push(listener);\n\n      return function () {\n        _this2.listeners = _this2.listeners.filter(function (l) {\n          return l !== listener;\n        });\n      };\n    }\n\n    /**\n     * Replaces the state for only the keys in the updated state. Notifies all listeners of state change.\n     * @param {object} state the new (partial) redux state\n     */\n\n  }, {\n    key: 'patchState',\n    value: function patchState(difference) {\n      var state = Object.assign({}, this.state);\n\n      difference.forEach(function (_ref2) {\n        var change = _ref2.change,\n            key = _ref2.key,\n            value = _ref2.value;\n\n        switch (change) {\n          case _constants.DIFF_STATUS_UPDATED:\n            state[key] = value;\n            break;\n\n          case _constants.DIFF_STATUS_REMOVED:\n            Reflect.deleteProperty(state, key);\n            break;\n\n          default:\n          // do nothing\n        }\n      });\n\n      this.state = state;\n\n      this.listeners.forEach(function (l) {\n        return l();\n      });\n    }\n\n    /**\n     * Replace the current state with a new state. Notifies all listeners of state change.\n     * @param  {object} state The new state for the store\n     */\n\n  }, {\n    key: 'replaceState',\n    value: function replaceState(state) {\n      this.state = state;\n\n      this.listeners.forEach(function (l) {\n        return l();\n      });\n    }\n\n    /**\n     * Get the current state of the store\n     * @return {object} the current store state\n     */\n\n  }, {\n    key: 'getState',\n    value: function getState() {\n      return this.state;\n    }\n\n    /**\n     * Stub function to stay consistent with Redux Store API. No-op.\n     */\n\n  }, {\n    key: 'replaceReducer',\n    value: function replaceReducer() {\n      return;\n    }\n\n    /**\n     * Dispatch an action to the background using messaging passing\n     * @param  {object} data The action data to dispatch\n     * @return {Promise}     Promise that will resolve/reject based on the action response from the background\n     */\n\n  }, {\n    key: 'dispatch',\n    value: function dispatch(data) {\n      var _this3 = this;\n\n      return new Promise(function (resolve, reject) {\n        chrome.runtime.sendMessage(_this3.extensionId, {\n          type: _constants.DISPATCH_TYPE,\n          portName: _this3.portName,\n          payload: data\n        }, function (resp) {\n          var error = resp.error,\n              value = resp.value;\n\n\n          if (error) {\n            var bgErr = new Error('' + backgroundErrPrefix + error);\n\n            reject((0, _assignIn2.default)(bgErr, error));\n          } else {\n            resolve(value && value.payload);\n          }\n        });\n      });\n    }\n  }]);\n\n  return Store;\n}();\n\nexports.default = Store;","var copyObject = require('./_copyObject'),\n    createAssigner = require('./_createAssigner'),\n    keysIn = require('./keysIn');\n\n/**\n * This method is like `_.assign` except that it iterates over own and\n * inherited source properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @alias extend\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assign\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assignIn({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }\n */\nvar assignIn = createAssigner(function(object, source) {\n  copyObject(source, keysIn(source), object);\n});\n\nmodule.exports = assignIn;\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _constants = require('../constants');\n\nvar _shallowDiff = require('./shallowDiff');\n\nvar _shallowDiff2 = _interopRequireDefault(_shallowDiff);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Responder for promisified results\n * @param  {object} dispatchResult The result from `store.dispatch()`\n * @param  {function} send         The function used to respond to original message\n * @return {undefined}\n */\nvar promiseResponder = function promiseResponder(dispatchResult, send) {\n  Promise.resolve(dispatchResult).then(function (res) {\n    send({\n      error: null,\n      value: res\n    });\n  }).catch(function (err) {\n    console.error('error dispatching result:', err);\n    send({\n      error: err.message,\n      value: null\n    });\n  });\n};\n\nexports.default = function (store, _ref) {\n  var portName = _ref.portName,\n      dispatchResponder = _ref.dispatchResponder;\n\n  if (!portName) {\n    throw new Error('portName is required in options');\n  }\n\n  // set dispatch responder as promise responder\n  if (!dispatchResponder) {\n    dispatchResponder = promiseResponder;\n  }\n\n  /**\n   * Respond to dispatches from UI components\n   */\n  var dispatchResponse = function dispatchResponse(request, sender, sendResponse) {\n    if (request.type === _constants.DISPATCH_TYPE && request.portName === portName) {\n      var action = Object.assign({}, request.payload, {\n        _sender: sender\n      });\n\n      var dispatchResult = null;\n\n      try {\n        dispatchResult = store.dispatch(action);\n      } catch (e) {\n        dispatchResult = Promise.reject(e.message);\n        console.error(e);\n      }\n\n      dispatchResponder(dispatchResult, sendResponse);\n      return true;\n    }\n  };\n\n  /**\n  * Setup for state updates\n  */\n  var connectState = function connectState(port) {\n    if (port.name !== portName) {\n      return;\n    }\n\n    var prevState = store.getState();\n\n    var patchState = function patchState() {\n      var state = store.getState();\n      var diff = (0, _shallowDiff2.default)(prevState, state);\n\n      if (diff.length) {\n        prevState = state;\n\n        port.postMessage({\n          type: _constants.PATCH_STATE_TYPE,\n          payload: diff\n        });\n      }\n    };\n\n    // Send patched state down connected port on every redux store state change\n    var unsubscribe = store.subscribe(patchState);\n\n    // when the port disconnects, unsubscribe the sendState listener\n    port.onDisconnect.addListener(unsubscribe);\n\n    // Send store's initial state through port\n    port.postMessage({\n      type: _constants.STATE_TYPE,\n      payload: prevState\n    });\n  };\n\n  /**\n   * Setup action handler\n   */\n  chrome.runtime.onMessage.addListener(dispatchResponse);\n\n  /**\n   * Setup external action handler\n   */\n  if (chrome.runtime.onMessageExternal) {\n    chrome.runtime.onMessageExternal.addListener(dispatchResponse);\n  } else {\n    console.warn('runtime.onMessageExternal is not supported');\n  }\n\n  /**\n   * Setup extended connection\n   */\n  chrome.runtime.onConnect.addListener(connectState);\n\n  /**\n   * Setup extended external connection\n   */\n  if (chrome.runtime.onConnectExternal) {\n    chrome.runtime.onConnectExternal.addListener(connectState);\n  } else {\n    console.warn('runtime.onConnectExternal is not supported');\n  }\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = shallowDiff;\n\nvar _constants = require('../constants');\n\n/**\n * Returns a new Object containing only the fields in `new` that differ from `old`\n *\n * @param {Object} old\n * @param {Object} new\n * @return {Array} An array of changes. The changes have a `key`, `value`, and `change`.\n *   The change is either `updated`, which is if the value has changed or been added,\n *   or `removed`.\n */\nfunction shallowDiff(oldObj, newObj) {\n  var difference = [];\n\n  Object.keys(newObj).forEach(function (key) {\n    if (oldObj[key] !== newObj[key]) {\n      difference.push({\n        key: key,\n        value: newObj[key],\n        change: _constants.DIFF_STATUS_UPDATED\n      });\n    }\n  });\n\n  Object.keys(oldObj).forEach(function (key) {\n    if (!newObj[key]) {\n      difference.push({\n        key: key,\n        change: _constants.DIFF_STATUS_REMOVED\n      });\n    }\n  });\n\n  return difference;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * Simple middleware intercepts actions and replaces with\n * another by calling an alias function with the original action\n * @type {object} aliases an object that maps action types (keys) to alias functions (values) (e.g. { SOME_ACTION: newActionAliasFunc })\n */\nexports.default = function (aliases) {\n  return function () {\n    return function (next) {\n      return function (action) {\n        var alias = aliases[action.type];\n\n        if (alias) {\n          return next(alias(action));\n        }\n\n        return next(action);\n      };\n    };\n  };\n};","import Immutable from 'immutable';\nimport { RebatesInfo } from '../../../utilities/src/rebates_const';\n// Important\n// We get data from here\n\nconst getInitialState = () => {\n  let stateobj = {};\n  stateobj.rebates_info = new RebatesInfo();\n  stateobj.rebates_close_popup = [];\n  stateobj.rebates_activated_sites = [];\n  stateobj.coupon_keyword = \"\";\n  stateobj.rebates_auto_activation_info = [];\n  return stateobj;\n};\n\nexport default (state, action) => {\n  state = Immutable.fromJS(state ? state : getInitialState());\n  let value = \"\";\n  let cur_data =\"\";\n  switch (action.type) {\n    case 'SET_KEY_WITH_DATA':\n      return state.set(action.data.key, action.data.value).toJS();\n    case 'ADD_HISTORY':\n      value = (action.data.local?state.get('history').slice(-5).unshift(action.data.input):state.get('history').slice(-5).push(action.data.input));\n      return state.set('history', value).toJS();\n    case 'CLEAR_HISTORY':\n      value = state.get('history').clear();\n      return state.set('history', value).toJS();\n    case 'SET_UUID':\n      return state.set('uuid', action.data).toJS();\n    case 'SET_TBUID':\n      return state.set('tbuid', action.data).toJS();\n    case 'SET_CLEAR_HISTORY_FLAG':\n      return state.set('clearHistory', action.data).toJS();\n    case 'SET_REBATES_INFO':\n      return state.set('rebates_info', action.data).toJS();\n    case 'ADD_REBATES_POPUP_CLOSE_SITE':\n      value = state.get('rebates_close_popup').push(action.data);\n      return state.set('rebates_close_popup', value).toJS();\n    case 'REMOVE_REBATES_POPUP_CLOSE_SITE':\n      cur_data = state.get('rebates_close_popup');\n      value = cur_data.filter((item) => { return item !== action.data });\n      return state.set('rebates_close_popup', value).toJS();\n    case 'CLEAR_REBATES_POPUP_CLOSE_SITE':\n      value = state.get('rebates_close_popup').clear();\n      return state.set('rebates_close_popup', value).toJS();\n    case 'ADD_ACTIVATED_SITE':\n      value = state.get('rebates_activated_sites').push(action.data);\n      return state.set('rebates_activated_sites', value).toJS();\n    case 'UPDATE_ACTIVATED_SITE':\n      cur_data = state.get('rebates_activated_sites');\n      value = cur_data.map(item => item.get(\"domain\") == action.data.domain ? action.data : item);\n      return state.set('rebates_activated_sites', value).toJS();\n    case 'REMOVE_EXPIRED_ACTIVATED_SITE':\n      cur_data = state.get('rebates_activated_sites');\n      value = cur_data.filter((item) => { return item.get('domain') !== action.data.domain });\n      return state.set('rebates_activated_sites', value).toJS();\n    case 'CLEAR_ACTIVATED_SITE':\n      value = state.get('rebates_activated_sites').clear();\n      return state.set('rebates_activated_sites', value).toJS();\n    case 'SET_RBAR_ACTIVE':\n      return state.set('rakutenBarInfo_active', action.data).toJS();\n    case 'SET_RBAR_SEND_NUMBER':\n      return state.set('rakutenBarInfo_send_number', action.data).toJS();\n    case 'SET_RBAR_ACCESSURL':\n      return state.set('rakutenBarInfo_accessurl', action.data).toJS();\n    case 'SET_RBAR_DOMAIN':\n      return state.set('rakutenBarInfo_domain', action.data).toJS();\n    case 'SET_RBAR_USERAGENT':\n      return state.set('rakutenBarInfo_userAgent', action.data).toJS();\n    case 'SET_RBAR_OSVERSION':\n      return state.set('rakutenBarInfo_osVersion', action.data).toJS();\n    case 'SET_RBAR_RZ_COOKIE':\n      return state.set('rakutenBarInfo_cookie', action.data).toJS();\n    case 'SET_URLCHECK':\n      return state.set('URLCheck', action.data).toJS();\n    case 'SET_RAKUTEN_ASDEFAULT':\n      return state.set('isRakutenAsDefault', action.data).toJS();\n    case 'CLEAR_RAKUTEN_ASDEFAULT':\n      value = undefined;\n      return state.set('isRakutenAsDefault', value).toJS();\n    case 'SET_MESSAGEREAD_TIME':\n      return state.set('messageReadTime', action.data).toJS();\n    case 'SET_YAMAKAWE':\n      return state.set('yamawakeInfo', action.data).toJS();\n    case 'SET_KUCHISU':\n      return state.set('kuchisuCount', action.data).toJS();\n    case 'SET_LOGINCHECK_TIME':\n      return state.set('loginCheckTime', action.data).toJS();\n    case 'SET_LOGIN':\n      return state.set('login', action.data).toJS();\n    case 'SET_CALLLOAD':\n      return state.set('callLoad', action.data).toJS();\n    case 'CLEAR_CALLLOAD':\n      value = undefined;\n      return state.set('callLoad', value).toJS();\n    case 'SET_AB_TEST_SETTINGS':\n      return state.set('abTestSettings', action.data).toJS();\n    case 'CLEAR_AB_TEST_SETTINGS':\n      value = state.get('abTestSettings').clear();\n      return state.set('abTestSettings', value).toJS();\n    case 'SET_EXTENSION_SETTING':\n      return state.set('ExtensionSetting', action.data).toJS();\n    case 'SET_SEARCHBAR_SETTING':\n      return state.set('SearchBarSetting', action.data).toJS();\n    case 'SET_PICKUP_BANNER_DISABLED_TIME':\n      return state.set('pickup_banner_disabled_time', action.data).toJS();\n    case 'CLEAR_PICKUP_BANNER_DISABLED_TIME':\n      value = 0;\n      return state.set('pickup_banner_disabled_time', value).toJS();\n\n    /*Not stored permanantly*/\n    case 'SET_USER_POINTINFO':\n      return state.set('userPointInfo', action.data).toJS();\n    case 'SET_REBATES_CAMPAIGN':\n      return state.set('rebates_campaignInfo', action.data).toJS();\n    case 'SET_COUPON_KEYWORD':\n      return state.set('coupon_keyword', action.data).toJS();\n    case 'SET_REBATES_WORKFLOW_STATE':\n      return state.set('rebates_workflowState', action.data).toJS();\n    case 'SET_CID':\n      return state.set('cid', action.data).toJS();\n    case 'SET_RAKUTEN_BAR_INFO_CONFIG_UPDATE_TIME':\n      return state.set('rakutenBarInfoConfig_update_time', action.data).toJS();\n    case 'ADD_REBATES_CAMPAIGN_HOVER_STATE':\n      value = state.get('rebates_campaign_hover_states').push(action.data);\n      return state.set('rebates_campaign_hover_states', value).toJS();\n    case 'UPDATE_REBATES_CAMPAIGN_HOVER_STATE':\n      cur_data = state.get('rebates_campaign_hover_states');\n      value = cur_data.map(item => item.get(\"_domainName\") == action.data._domainName ? action.data : item);\n      return state.set('rebates_campaign_hover_states', value).toJS();\n    case 'REMOVE_REBATES_CAMPAIGN_HOVER_STATE':\n      cur_data = state.get('rebates_campaign_hover_states');\n      value = cur_data.filter(item => item.get(\"_domainName\") != action.data);\n      return state.set('rebates_campaign_hover_states', value).toJS();\n    case 'CLEAR_REBATES_CAMPAIGN_HOVER_STATES':\n      value = state.get('rebates_campaign_hover_states').clear();\n      return state.set('rebates_campaign_hover_states', value).toJS();\n    case 'UPDATE_REBATES_AUTO_ACTIVATION':\n        cur_data = state.get('rebates_auto_activation_info');\n        value = cur_data.map(item => item.get(\"tab_id\") != action.data.tab_id ? item : action.data);\n        return state.set('rebates_auto_activation_info', value).toJS();\n    case 'ADD_REBATES_AUTO_ACTIVATION':\n          value = state.get('rebates_auto_activation_info').push(action.data);\n          return state.set('rebates_auto_activation_info', value).toJS();\n    case 'CLEAR_REBATES_AUTO_ACTIVATION':\n          cur_data = state.get('rebates_auto_activation_info');\n          value = cur_data.filter(item => item.get(\"tab_id\") !== action.data);\n          return state.set('rebates_auto_activation_info', value).toJS();\n    case 'SET_REBATE_ADDITIONAL_DISCOUNT_TARGET_INFO':\n      return state.set('rebates_additional_discount_target_info', action.data).toJS();\n    default:\n      return state.toJS();\n  }\n};\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.Immutable = factory());\n}(this, function () { 'use strict';var SLICE$0 = Array.prototype.slice;\n\n  function createClass(ctor, superClass) {\n    if (superClass) {\n      ctor.prototype = Object.create(superClass.prototype);\n    }\n    ctor.prototype.constructor = ctor;\n  }\n\n  function Iterable(value) {\n      return isIterable(value) ? value : Seq(value);\n    }\n\n\n  createClass(KeyedIterable, Iterable);\n    function KeyedIterable(value) {\n      return isKeyed(value) ? value : KeyedSeq(value);\n    }\n\n\n  createClass(IndexedIterable, Iterable);\n    function IndexedIterable(value) {\n      return isIndexed(value) ? value : IndexedSeq(value);\n    }\n\n\n  createClass(SetIterable, Iterable);\n    function SetIterable(value) {\n      return isIterable(value) && !isAssociative(value) ? value : SetSeq(value);\n    }\n\n\n\n  function isIterable(maybeIterable) {\n    return !!(maybeIterable && maybeIterable[IS_ITERABLE_SENTINEL]);\n  }\n\n  function isKeyed(maybeKeyed) {\n    return !!(maybeKeyed && maybeKeyed[IS_KEYED_SENTINEL]);\n  }\n\n  function isIndexed(maybeIndexed) {\n    return !!(maybeIndexed && maybeIndexed[IS_INDEXED_SENTINEL]);\n  }\n\n  function isAssociative(maybeAssociative) {\n    return isKeyed(maybeAssociative) || isIndexed(maybeAssociative);\n  }\n\n  function isOrdered(maybeOrdered) {\n    return !!(maybeOrdered && maybeOrdered[IS_ORDERED_SENTINEL]);\n  }\n\n  Iterable.isIterable = isIterable;\n  Iterable.isKeyed = isKeyed;\n  Iterable.isIndexed = isIndexed;\n  Iterable.isAssociative = isAssociative;\n  Iterable.isOrdered = isOrdered;\n\n  Iterable.Keyed = KeyedIterable;\n  Iterable.Indexed = IndexedIterable;\n  Iterable.Set = SetIterable;\n\n\n  var IS_ITERABLE_SENTINEL = '@@__IMMUTABLE_ITERABLE__@@';\n  var IS_KEYED_SENTINEL = '@@__IMMUTABLE_KEYED__@@';\n  var IS_INDEXED_SENTINEL = '@@__IMMUTABLE_INDEXED__@@';\n  var IS_ORDERED_SENTINEL = '@@__IMMUTABLE_ORDERED__@@';\n\n  // Used for setting prototype methods that IE8 chokes on.\n  var DELETE = 'delete';\n\n  // Constants describing the size of trie nodes.\n  var SHIFT = 5; // Resulted in best performance after ______?\n  var SIZE = 1 << SHIFT;\n  var MASK = SIZE - 1;\n\n  // A consistent shared value representing \"not set\" which equals nothing other\n  // than itself, and nothing that could be provided externally.\n  var NOT_SET = {};\n\n  // Boolean references, Rough equivalent of `bool &`.\n  var CHANGE_LENGTH = { value: false };\n  var DID_ALTER = { value: false };\n\n  function MakeRef(ref) {\n    ref.value = false;\n    return ref;\n  }\n\n  function SetRef(ref) {\n    ref && (ref.value = true);\n  }\n\n  // A function which returns a value representing an \"owner\" for transient writes\n  // to tries. The return value will only ever equal itself, and will not equal\n  // the return of any subsequent call of this function.\n  function OwnerID() {}\n\n  // http://jsperf.com/copy-array-inline\n  function arrCopy(arr, offset) {\n    offset = offset || 0;\n    var len = Math.max(0, arr.length - offset);\n    var newArr = new Array(len);\n    for (var ii = 0; ii < len; ii++) {\n      newArr[ii] = arr[ii + offset];\n    }\n    return newArr;\n  }\n\n  function ensureSize(iter) {\n    if (iter.size === undefined) {\n      iter.size = iter.__iterate(returnTrue);\n    }\n    return iter.size;\n  }\n\n  function wrapIndex(iter, index) {\n    // This implements \"is array index\" which the ECMAString spec defines as:\n    //\n    //     A String property name P is an array index if and only if\n    //     ToString(ToUint32(P)) is equal to P and ToUint32(P) is not equal\n    //     to 2^32−1.\n    //\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-array-exotic-objects\n    if (typeof index !== 'number') {\n      var uint32Index = index >>> 0; // N >>> 0 is shorthand for ToUint32\n      if ('' + uint32Index !== index || uint32Index === 4294967295) {\n        return NaN;\n      }\n      index = uint32Index;\n    }\n    return index < 0 ? ensureSize(iter) + index : index;\n  }\n\n  function returnTrue() {\n    return true;\n  }\n\n  function wholeSlice(begin, end, size) {\n    return (begin === 0 || (size !== undefined && begin <= -size)) &&\n      (end === undefined || (size !== undefined && end >= size));\n  }\n\n  function resolveBegin(begin, size) {\n    return resolveIndex(begin, size, 0);\n  }\n\n  function resolveEnd(end, size) {\n    return resolveIndex(end, size, size);\n  }\n\n  function resolveIndex(index, size, defaultIndex) {\n    return index === undefined ?\n      defaultIndex :\n      index < 0 ?\n        Math.max(0, size + index) :\n        size === undefined ?\n          index :\n          Math.min(size, index);\n  }\n\n  /* global Symbol */\n\n  var ITERATE_KEYS = 0;\n  var ITERATE_VALUES = 1;\n  var ITERATE_ENTRIES = 2;\n\n  var REAL_ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator';\n\n  var ITERATOR_SYMBOL = REAL_ITERATOR_SYMBOL || FAUX_ITERATOR_SYMBOL;\n\n\n  function Iterator(next) {\n      this.next = next;\n    }\n\n    Iterator.prototype.toString = function() {\n      return '[Iterator]';\n    };\n\n\n  Iterator.KEYS = ITERATE_KEYS;\n  Iterator.VALUES = ITERATE_VALUES;\n  Iterator.ENTRIES = ITERATE_ENTRIES;\n\n  Iterator.prototype.inspect =\n  Iterator.prototype.toSource = function () { return this.toString(); }\n  Iterator.prototype[ITERATOR_SYMBOL] = function () {\n    return this;\n  };\n\n\n  function iteratorValue(type, k, v, iteratorResult) {\n    var value = type === 0 ? k : type === 1 ? v : [k, v];\n    iteratorResult ? (iteratorResult.value = value) : (iteratorResult = {\n      value: value, done: false\n    });\n    return iteratorResult;\n  }\n\n  function iteratorDone() {\n    return { value: undefined, done: true };\n  }\n\n  function hasIterator(maybeIterable) {\n    return !!getIteratorFn(maybeIterable);\n  }\n\n  function isIterator(maybeIterator) {\n    return maybeIterator && typeof maybeIterator.next === 'function';\n  }\n\n  function getIterator(iterable) {\n    var iteratorFn = getIteratorFn(iterable);\n    return iteratorFn && iteratorFn.call(iterable);\n  }\n\n  function getIteratorFn(iterable) {\n    var iteratorFn = iterable && (\n      (REAL_ITERATOR_SYMBOL && iterable[REAL_ITERATOR_SYMBOL]) ||\n      iterable[FAUX_ITERATOR_SYMBOL]\n    );\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  function isArrayLike(value) {\n    return value && typeof value.length === 'number';\n  }\n\n  createClass(Seq, Iterable);\n    function Seq(value) {\n      return value === null || value === undefined ? emptySequence() :\n        isIterable(value) ? value.toSeq() : seqFromValue(value);\n    }\n\n    Seq.of = function(/*...values*/) {\n      return Seq(arguments);\n    };\n\n    Seq.prototype.toSeq = function() {\n      return this;\n    };\n\n    Seq.prototype.toString = function() {\n      return this.__toString('Seq {', '}');\n    };\n\n    Seq.prototype.cacheResult = function() {\n      if (!this._cache && this.__iterateUncached) {\n        this._cache = this.entrySeq().toArray();\n        this.size = this._cache.length;\n      }\n      return this;\n    };\n\n    // abstract __iterateUncached(fn, reverse)\n\n    Seq.prototype.__iterate = function(fn, reverse) {\n      return seqIterate(this, fn, reverse, true);\n    };\n\n    // abstract __iteratorUncached(type, reverse)\n\n    Seq.prototype.__iterator = function(type, reverse) {\n      return seqIterator(this, type, reverse, true);\n    };\n\n\n\n  createClass(KeyedSeq, Seq);\n    function KeyedSeq(value) {\n      return value === null || value === undefined ?\n        emptySequence().toKeyedSeq() :\n        isIterable(value) ?\n          (isKeyed(value) ? value.toSeq() : value.fromEntrySeq()) :\n          keyedSeqFromValue(value);\n    }\n\n    KeyedSeq.prototype.toKeyedSeq = function() {\n      return this;\n    };\n\n\n\n  createClass(IndexedSeq, Seq);\n    function IndexedSeq(value) {\n      return value === null || value === undefined ? emptySequence() :\n        !isIterable(value) ? indexedSeqFromValue(value) :\n        isKeyed(value) ? value.entrySeq() : value.toIndexedSeq();\n    }\n\n    IndexedSeq.of = function(/*...values*/) {\n      return IndexedSeq(arguments);\n    };\n\n    IndexedSeq.prototype.toIndexedSeq = function() {\n      return this;\n    };\n\n    IndexedSeq.prototype.toString = function() {\n      return this.__toString('Seq [', ']');\n    };\n\n    IndexedSeq.prototype.__iterate = function(fn, reverse) {\n      return seqIterate(this, fn, reverse, false);\n    };\n\n    IndexedSeq.prototype.__iterator = function(type, reverse) {\n      return seqIterator(this, type, reverse, false);\n    };\n\n\n\n  createClass(SetSeq, Seq);\n    function SetSeq(value) {\n      return (\n        value === null || value === undefined ? emptySequence() :\n        !isIterable(value) ? indexedSeqFromValue(value) :\n        isKeyed(value) ? value.entrySeq() : value\n      ).toSetSeq();\n    }\n\n    SetSeq.of = function(/*...values*/) {\n      return SetSeq(arguments);\n    };\n\n    SetSeq.prototype.toSetSeq = function() {\n      return this;\n    };\n\n\n\n  Seq.isSeq = isSeq;\n  Seq.Keyed = KeyedSeq;\n  Seq.Set = SetSeq;\n  Seq.Indexed = IndexedSeq;\n\n  var IS_SEQ_SENTINEL = '@@__IMMUTABLE_SEQ__@@';\n\n  Seq.prototype[IS_SEQ_SENTINEL] = true;\n\n\n\n  createClass(ArraySeq, IndexedSeq);\n    function ArraySeq(array) {\n      this._array = array;\n      this.size = array.length;\n    }\n\n    ArraySeq.prototype.get = function(index, notSetValue) {\n      return this.has(index) ? this._array[wrapIndex(this, index)] : notSetValue;\n    };\n\n    ArraySeq.prototype.__iterate = function(fn, reverse) {\n      var array = this._array;\n      var maxIndex = array.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        if (fn(array[reverse ? maxIndex - ii : ii], ii, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    ArraySeq.prototype.__iterator = function(type, reverse) {\n      var array = this._array;\n      var maxIndex = array.length - 1;\n      var ii = 0;\n      return new Iterator(function() \n        {return ii > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, ii, array[reverse ? maxIndex - ii++ : ii++])}\n      );\n    };\n\n\n\n  createClass(ObjectSeq, KeyedSeq);\n    function ObjectSeq(object) {\n      var keys = Object.keys(object);\n      this._object = object;\n      this._keys = keys;\n      this.size = keys.length;\n    }\n\n    ObjectSeq.prototype.get = function(key, notSetValue) {\n      if (notSetValue !== undefined && !this.has(key)) {\n        return notSetValue;\n      }\n      return this._object[key];\n    };\n\n    ObjectSeq.prototype.has = function(key) {\n      return this._object.hasOwnProperty(key);\n    };\n\n    ObjectSeq.prototype.__iterate = function(fn, reverse) {\n      var object = this._object;\n      var keys = this._keys;\n      var maxIndex = keys.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        var key = keys[reverse ? maxIndex - ii : ii];\n        if (fn(object[key], key, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    ObjectSeq.prototype.__iterator = function(type, reverse) {\n      var object = this._object;\n      var keys = this._keys;\n      var maxIndex = keys.length - 1;\n      var ii = 0;\n      return new Iterator(function()  {\n        var key = keys[reverse ? maxIndex - ii : ii];\n        return ii++ > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, key, object[key]);\n      });\n    };\n\n  ObjectSeq.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n  createClass(IterableSeq, IndexedSeq);\n    function IterableSeq(iterable) {\n      this._iterable = iterable;\n      this.size = iterable.length || iterable.size;\n    }\n\n    IterableSeq.prototype.__iterateUncached = function(fn, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterable = this._iterable;\n      var iterator = getIterator(iterable);\n      var iterations = 0;\n      if (isIterator(iterator)) {\n        var step;\n        while (!(step = iterator.next()).done) {\n          if (fn(step.value, iterations++, this) === false) {\n            break;\n          }\n        }\n      }\n      return iterations;\n    };\n\n    IterableSeq.prototype.__iteratorUncached = function(type, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterable = this._iterable;\n      var iterator = getIterator(iterable);\n      if (!isIterator(iterator)) {\n        return new Iterator(iteratorDone);\n      }\n      var iterations = 0;\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step : iteratorValue(type, iterations++, step.value);\n      });\n    };\n\n\n\n  createClass(IteratorSeq, IndexedSeq);\n    function IteratorSeq(iterator) {\n      this._iterator = iterator;\n      this._iteratorCache = [];\n    }\n\n    IteratorSeq.prototype.__iterateUncached = function(fn, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterator = this._iterator;\n      var cache = this._iteratorCache;\n      var iterations = 0;\n      while (iterations < cache.length) {\n        if (fn(cache[iterations], iterations++, this) === false) {\n          return iterations;\n        }\n      }\n      var step;\n      while (!(step = iterator.next()).done) {\n        var val = step.value;\n        cache[iterations] = val;\n        if (fn(val, iterations++, this) === false) {\n          break;\n        }\n      }\n      return iterations;\n    };\n\n    IteratorSeq.prototype.__iteratorUncached = function(type, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = this._iterator;\n      var cache = this._iteratorCache;\n      var iterations = 0;\n      return new Iterator(function()  {\n        if (iterations >= cache.length) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          cache[iterations] = step.value;\n        }\n        return iteratorValue(type, iterations, cache[iterations++]);\n      });\n    };\n\n\n\n\n  // # pragma Helper functions\n\n  function isSeq(maybeSeq) {\n    return !!(maybeSeq && maybeSeq[IS_SEQ_SENTINEL]);\n  }\n\n  var EMPTY_SEQ;\n\n  function emptySequence() {\n    return EMPTY_SEQ || (EMPTY_SEQ = new ArraySeq([]));\n  }\n\n  function keyedSeqFromValue(value) {\n    var seq =\n      Array.isArray(value) ? new ArraySeq(value).fromEntrySeq() :\n      isIterator(value) ? new IteratorSeq(value).fromEntrySeq() :\n      hasIterator(value) ? new IterableSeq(value).fromEntrySeq() :\n      typeof value === 'object' ? new ObjectSeq(value) :\n      undefined;\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of [k, v] entries, '+\n        'or keyed object: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function indexedSeqFromValue(value) {\n    var seq = maybeIndexedSeqFromValue(value);\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of values: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function seqFromValue(value) {\n    var seq = maybeIndexedSeqFromValue(value) ||\n      (typeof value === 'object' && new ObjectSeq(value));\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of values, or keyed object: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function maybeIndexedSeqFromValue(value) {\n    return (\n      isArrayLike(value) ? new ArraySeq(value) :\n      isIterator(value) ? new IteratorSeq(value) :\n      hasIterator(value) ? new IterableSeq(value) :\n      undefined\n    );\n  }\n\n  function seqIterate(seq, fn, reverse, useKeys) {\n    var cache = seq._cache;\n    if (cache) {\n      var maxIndex = cache.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        var entry = cache[reverse ? maxIndex - ii : ii];\n        if (fn(entry[1], useKeys ? entry[0] : ii, seq) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    }\n    return seq.__iterateUncached(fn, reverse);\n  }\n\n  function seqIterator(seq, type, reverse, useKeys) {\n    var cache = seq._cache;\n    if (cache) {\n      var maxIndex = cache.length - 1;\n      var ii = 0;\n      return new Iterator(function()  {\n        var entry = cache[reverse ? maxIndex - ii : ii];\n        return ii++ > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, useKeys ? entry[0] : ii - 1, entry[1]);\n      });\n    }\n    return seq.__iteratorUncached(type, reverse);\n  }\n\n  function fromJS(json, converter) {\n    return converter ?\n      fromJSWith(converter, json, '', {'': json}) :\n      fromJSDefault(json);\n  }\n\n  function fromJSWith(converter, json, key, parentJSON) {\n    if (Array.isArray(json)) {\n      return converter.call(parentJSON, key, IndexedSeq(json).map(function(v, k)  {return fromJSWith(converter, v, k, json)}));\n    }\n    if (isPlainObj(json)) {\n      return converter.call(parentJSON, key, KeyedSeq(json).map(function(v, k)  {return fromJSWith(converter, v, k, json)}));\n    }\n    return json;\n  }\n\n  function fromJSDefault(json) {\n    if (Array.isArray(json)) {\n      return IndexedSeq(json).map(fromJSDefault).toList();\n    }\n    if (isPlainObj(json)) {\n      return KeyedSeq(json).map(fromJSDefault).toMap();\n    }\n    return json;\n  }\n\n  function isPlainObj(value) {\n    return value && (value.constructor === Object || value.constructor === undefined);\n  }\n\n  /**\n   * An extension of the \"same-value\" algorithm as [described for use by ES6 Map\n   * and Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#Key_equality)\n   *\n   * NaN is considered the same as NaN, however -0 and 0 are considered the same\n   * value, which is different from the algorithm described by\n   * [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is).\n   *\n   * This is extended further to allow Objects to describe the values they\n   * represent, by way of `valueOf` or `equals` (and `hashCode`).\n   *\n   * Note: because of this extension, the key equality of Immutable.Map and the\n   * value equality of Immutable.Set will differ from ES6 Map and Set.\n   *\n   * ### Defining custom values\n   *\n   * The easiest way to describe the value an object represents is by implementing\n   * `valueOf`. For example, `Date` represents a value by returning a unix\n   * timestamp for `valueOf`:\n   *\n   *     var date1 = new Date(1234567890000); // Fri Feb 13 2009 ...\n   *     var date2 = new Date(1234567890000);\n   *     date1.valueOf(); // 1234567890000\n   *     assert( date1 !== date2 );\n   *     assert( Immutable.is( date1, date2 ) );\n   *\n   * Note: overriding `valueOf` may have other implications if you use this object\n   * where JavaScript expects a primitive, such as implicit string coercion.\n   *\n   * For more complex types, especially collections, implementing `valueOf` may\n   * not be performant. An alternative is to implement `equals` and `hashCode`.\n   *\n   * `equals` takes another object, presumably of similar type, and returns true\n   * if the it is equal. Equality is symmetrical, so the same result should be\n   * returned if this and the argument are flipped.\n   *\n   *     assert( a.equals(b) === b.equals(a) );\n   *\n   * `hashCode` returns a 32bit integer number representing the object which will\n   * be used to determine how to store the value object in a Map or Set. You must\n   * provide both or neither methods, one must not exist without the other.\n   *\n   * Also, an important relationship between these methods must be upheld: if two\n   * values are equal, they *must* return the same hashCode. If the values are not\n   * equal, they might have the same hashCode; this is called a hash collision,\n   * and while undesirable for performance reasons, it is acceptable.\n   *\n   *     if (a.equals(b)) {\n   *       assert( a.hashCode() === b.hashCode() );\n   *     }\n   *\n   * All Immutable collections implement `equals` and `hashCode`.\n   *\n   */\n  function is(valueA, valueB) {\n    if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n      return true;\n    }\n    if (!valueA || !valueB) {\n      return false;\n    }\n    if (typeof valueA.valueOf === 'function' &&\n        typeof valueB.valueOf === 'function') {\n      valueA = valueA.valueOf();\n      valueB = valueB.valueOf();\n      if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n        return true;\n      }\n      if (!valueA || !valueB) {\n        return false;\n      }\n    }\n    if (typeof valueA.equals === 'function' &&\n        typeof valueB.equals === 'function' &&\n        valueA.equals(valueB)) {\n      return true;\n    }\n    return false;\n  }\n\n  function deepEqual(a, b) {\n    if (a === b) {\n      return true;\n    }\n\n    if (\n      !isIterable(b) ||\n      a.size !== undefined && b.size !== undefined && a.size !== b.size ||\n      a.__hash !== undefined && b.__hash !== undefined && a.__hash !== b.__hash ||\n      isKeyed(a) !== isKeyed(b) ||\n      isIndexed(a) !== isIndexed(b) ||\n      isOrdered(a) !== isOrdered(b)\n    ) {\n      return false;\n    }\n\n    if (a.size === 0 && b.size === 0) {\n      return true;\n    }\n\n    var notAssociative = !isAssociative(a);\n\n    if (isOrdered(a)) {\n      var entries = a.entries();\n      return b.every(function(v, k)  {\n        var entry = entries.next().value;\n        return entry && is(entry[1], v) && (notAssociative || is(entry[0], k));\n      }) && entries.next().done;\n    }\n\n    var flipped = false;\n\n    if (a.size === undefined) {\n      if (b.size === undefined) {\n        if (typeof a.cacheResult === 'function') {\n          a.cacheResult();\n        }\n      } else {\n        flipped = true;\n        var _ = a;\n        a = b;\n        b = _;\n      }\n    }\n\n    var allEqual = true;\n    var bSize = b.__iterate(function(v, k)  {\n      if (notAssociative ? !a.has(v) :\n          flipped ? !is(v, a.get(k, NOT_SET)) : !is(a.get(k, NOT_SET), v)) {\n        allEqual = false;\n        return false;\n      }\n    });\n\n    return allEqual && a.size === bSize;\n  }\n\n  createClass(Repeat, IndexedSeq);\n\n    function Repeat(value, times) {\n      if (!(this instanceof Repeat)) {\n        return new Repeat(value, times);\n      }\n      this._value = value;\n      this.size = times === undefined ? Infinity : Math.max(0, times);\n      if (this.size === 0) {\n        if (EMPTY_REPEAT) {\n          return EMPTY_REPEAT;\n        }\n        EMPTY_REPEAT = this;\n      }\n    }\n\n    Repeat.prototype.toString = function() {\n      if (this.size === 0) {\n        return 'Repeat []';\n      }\n      return 'Repeat [ ' + this._value + ' ' + this.size + ' times ]';\n    };\n\n    Repeat.prototype.get = function(index, notSetValue) {\n      return this.has(index) ? this._value : notSetValue;\n    };\n\n    Repeat.prototype.includes = function(searchValue) {\n      return is(this._value, searchValue);\n    };\n\n    Repeat.prototype.slice = function(begin, end) {\n      var size = this.size;\n      return wholeSlice(begin, end, size) ? this :\n        new Repeat(this._value, resolveEnd(end, size) - resolveBegin(begin, size));\n    };\n\n    Repeat.prototype.reverse = function() {\n      return this;\n    };\n\n    Repeat.prototype.indexOf = function(searchValue) {\n      if (is(this._value, searchValue)) {\n        return 0;\n      }\n      return -1;\n    };\n\n    Repeat.prototype.lastIndexOf = function(searchValue) {\n      if (is(this._value, searchValue)) {\n        return this.size;\n      }\n      return -1;\n    };\n\n    Repeat.prototype.__iterate = function(fn, reverse) {\n      for (var ii = 0; ii < this.size; ii++) {\n        if (fn(this._value, ii, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    Repeat.prototype.__iterator = function(type, reverse) {var this$0 = this;\n      var ii = 0;\n      return new Iterator(function() \n        {return ii < this$0.size ? iteratorValue(type, ii++, this$0._value) : iteratorDone()}\n      );\n    };\n\n    Repeat.prototype.equals = function(other) {\n      return other instanceof Repeat ?\n        is(this._value, other._value) :\n        deepEqual(other);\n    };\n\n\n  var EMPTY_REPEAT;\n\n  function invariant(condition, error) {\n    if (!condition) throw new Error(error);\n  }\n\n  createClass(Range, IndexedSeq);\n\n    function Range(start, end, step) {\n      if (!(this instanceof Range)) {\n        return new Range(start, end, step);\n      }\n      invariant(step !== 0, 'Cannot step a Range by 0');\n      start = start || 0;\n      if (end === undefined) {\n        end = Infinity;\n      }\n      step = step === undefined ? 1 : Math.abs(step);\n      if (end < start) {\n        step = -step;\n      }\n      this._start = start;\n      this._end = end;\n      this._step = step;\n      this.size = Math.max(0, Math.ceil((end - start) / step - 1) + 1);\n      if (this.size === 0) {\n        if (EMPTY_RANGE) {\n          return EMPTY_RANGE;\n        }\n        EMPTY_RANGE = this;\n      }\n    }\n\n    Range.prototype.toString = function() {\n      if (this.size === 0) {\n        return 'Range []';\n      }\n      return 'Range [ ' +\n        this._start + '...' + this._end +\n        (this._step !== 1 ? ' by ' + this._step : '') +\n      ' ]';\n    };\n\n    Range.prototype.get = function(index, notSetValue) {\n      return this.has(index) ?\n        this._start + wrapIndex(this, index) * this._step :\n        notSetValue;\n    };\n\n    Range.prototype.includes = function(searchValue) {\n      var possibleIndex = (searchValue - this._start) / this._step;\n      return possibleIndex >= 0 &&\n        possibleIndex < this.size &&\n        possibleIndex === Math.floor(possibleIndex);\n    };\n\n    Range.prototype.slice = function(begin, end) {\n      if (wholeSlice(begin, end, this.size)) {\n        return this;\n      }\n      begin = resolveBegin(begin, this.size);\n      end = resolveEnd(end, this.size);\n      if (end <= begin) {\n        return new Range(0, 0);\n      }\n      return new Range(this.get(begin, this._end), this.get(end, this._end), this._step);\n    };\n\n    Range.prototype.indexOf = function(searchValue) {\n      var offsetValue = searchValue - this._start;\n      if (offsetValue % this._step === 0) {\n        var index = offsetValue / this._step;\n        if (index >= 0 && index < this.size) {\n          return index\n        }\n      }\n      return -1;\n    };\n\n    Range.prototype.lastIndexOf = function(searchValue) {\n      return this.indexOf(searchValue);\n    };\n\n    Range.prototype.__iterate = function(fn, reverse) {\n      var maxIndex = this.size - 1;\n      var step = this._step;\n      var value = reverse ? this._start + maxIndex * step : this._start;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        if (fn(value, ii, this) === false) {\n          return ii + 1;\n        }\n        value += reverse ? -step : step;\n      }\n      return ii;\n    };\n\n    Range.prototype.__iterator = function(type, reverse) {\n      var maxIndex = this.size - 1;\n      var step = this._step;\n      var value = reverse ? this._start + maxIndex * step : this._start;\n      var ii = 0;\n      return new Iterator(function()  {\n        var v = value;\n        value += reverse ? -step : step;\n        return ii > maxIndex ? iteratorDone() : iteratorValue(type, ii++, v);\n      });\n    };\n\n    Range.prototype.equals = function(other) {\n      return other instanceof Range ?\n        this._start === other._start &&\n        this._end === other._end &&\n        this._step === other._step :\n        deepEqual(this, other);\n    };\n\n\n  var EMPTY_RANGE;\n\n  createClass(Collection, Iterable);\n    function Collection() {\n      throw TypeError('Abstract');\n    }\n\n\n  createClass(KeyedCollection, Collection);function KeyedCollection() {}\n\n  createClass(IndexedCollection, Collection);function IndexedCollection() {}\n\n  createClass(SetCollection, Collection);function SetCollection() {}\n\n\n  Collection.Keyed = KeyedCollection;\n  Collection.Indexed = IndexedCollection;\n  Collection.Set = SetCollection;\n\n  var imul =\n    typeof Math.imul === 'function' && Math.imul(0xffffffff, 2) === -2 ?\n    Math.imul :\n    function imul(a, b) {\n      a = a | 0; // int\n      b = b | 0; // int\n      var c = a & 0xffff;\n      var d = b & 0xffff;\n      // Shift by 0 fixes the sign on the high part.\n      return (c * d) + ((((a >>> 16) * d + c * (b >>> 16)) << 16) >>> 0) | 0; // int\n    };\n\n  // v8 has an optimization for storing 31-bit signed numbers.\n  // Values which have either 00 or 11 as the high order bits qualify.\n  // This function drops the highest order bit in a signed number, maintaining\n  // the sign bit.\n  function smi(i32) {\n    return ((i32 >>> 1) & 0x40000000) | (i32 & 0xBFFFFFFF);\n  }\n\n  function hash(o) {\n    if (o === false || o === null || o === undefined) {\n      return 0;\n    }\n    if (typeof o.valueOf === 'function') {\n      o = o.valueOf();\n      if (o === false || o === null || o === undefined) {\n        return 0;\n      }\n    }\n    if (o === true) {\n      return 1;\n    }\n    var type = typeof o;\n    if (type === 'number') {\n      if (o !== o || o === Infinity) {\n        return 0;\n      }\n      var h = o | 0;\n      if (h !== o) {\n        h ^= o * 0xFFFFFFFF;\n      }\n      while (o > 0xFFFFFFFF) {\n        o /= 0xFFFFFFFF;\n        h ^= o;\n      }\n      return smi(h);\n    }\n    if (type === 'string') {\n      return o.length > STRING_HASH_CACHE_MIN_STRLEN ? cachedHashString(o) : hashString(o);\n    }\n    if (typeof o.hashCode === 'function') {\n      return o.hashCode();\n    }\n    if (type === 'object') {\n      return hashJSObj(o);\n    }\n    if (typeof o.toString === 'function') {\n      return hashString(o.toString());\n    }\n    throw new Error('Value type ' + type + ' cannot be hashed.');\n  }\n\n  function cachedHashString(string) {\n    var hash = stringHashCache[string];\n    if (hash === undefined) {\n      hash = hashString(string);\n      if (STRING_HASH_CACHE_SIZE === STRING_HASH_CACHE_MAX_SIZE) {\n        STRING_HASH_CACHE_SIZE = 0;\n        stringHashCache = {};\n      }\n      STRING_HASH_CACHE_SIZE++;\n      stringHashCache[string] = hash;\n    }\n    return hash;\n  }\n\n  // http://jsperf.com/hashing-strings\n  function hashString(string) {\n    // This is the hash from JVM\n    // The hash code for a string is computed as\n    // s[0] * 31 ^ (n - 1) + s[1] * 31 ^ (n - 2) + ... + s[n - 1],\n    // where s[i] is the ith character of the string and n is the length of\n    // the string. We \"mod\" the result to make it between 0 (inclusive) and 2^31\n    // (exclusive) by dropping high bits.\n    var hash = 0;\n    for (var ii = 0; ii < string.length; ii++) {\n      hash = 31 * hash + string.charCodeAt(ii) | 0;\n    }\n    return smi(hash);\n  }\n\n  function hashJSObj(obj) {\n    var hash;\n    if (usingWeakMap) {\n      hash = weakMap.get(obj);\n      if (hash !== undefined) {\n        return hash;\n      }\n    }\n\n    hash = obj[UID_HASH_KEY];\n    if (hash !== undefined) {\n      return hash;\n    }\n\n    if (!canDefineProperty) {\n      hash = obj.propertyIsEnumerable && obj.propertyIsEnumerable[UID_HASH_KEY];\n      if (hash !== undefined) {\n        return hash;\n      }\n\n      hash = getIENodeHash(obj);\n      if (hash !== undefined) {\n        return hash;\n      }\n    }\n\n    hash = ++objHashUID;\n    if (objHashUID & 0x40000000) {\n      objHashUID = 0;\n    }\n\n    if (usingWeakMap) {\n      weakMap.set(obj, hash);\n    } else if (isExtensible !== undefined && isExtensible(obj) === false) {\n      throw new Error('Non-extensible objects are not allowed as keys.');\n    } else if (canDefineProperty) {\n      Object.defineProperty(obj, UID_HASH_KEY, {\n        'enumerable': false,\n        'configurable': false,\n        'writable': false,\n        'value': hash\n      });\n    } else if (obj.propertyIsEnumerable !== undefined &&\n               obj.propertyIsEnumerable === obj.constructor.prototype.propertyIsEnumerable) {\n      // Since we can't define a non-enumerable property on the object\n      // we'll hijack one of the less-used non-enumerable properties to\n      // save our hash on it. Since this is a function it will not show up in\n      // `JSON.stringify` which is what we want.\n      obj.propertyIsEnumerable = function() {\n        return this.constructor.prototype.propertyIsEnumerable.apply(this, arguments);\n      };\n      obj.propertyIsEnumerable[UID_HASH_KEY] = hash;\n    } else if (obj.nodeType !== undefined) {\n      // At this point we couldn't get the IE `uniqueID` to use as a hash\n      // and we couldn't use a non-enumerable property to exploit the\n      // dontEnum bug so we simply add the `UID_HASH_KEY` on the node\n      // itself.\n      obj[UID_HASH_KEY] = hash;\n    } else {\n      throw new Error('Unable to set a non-enumerable property on object.');\n    }\n\n    return hash;\n  }\n\n  // Get references to ES5 object methods.\n  var isExtensible = Object.isExtensible;\n\n  // True if Object.defineProperty works as expected. IE8 fails this test.\n  var canDefineProperty = (function() {\n    try {\n      Object.defineProperty({}, '@', {});\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }());\n\n  // IE has a `uniqueID` property on DOM nodes. We can construct the hash from it\n  // and avoid memory leaks from the IE cloneNode bug.\n  function getIENodeHash(node) {\n    if (node && node.nodeType > 0) {\n      switch (node.nodeType) {\n        case 1: // Element\n          return node.uniqueID;\n        case 9: // Document\n          return node.documentElement && node.documentElement.uniqueID;\n      }\n    }\n  }\n\n  // If possible, use a WeakMap.\n  var usingWeakMap = typeof WeakMap === 'function';\n  var weakMap;\n  if (usingWeakMap) {\n    weakMap = new WeakMap();\n  }\n\n  var objHashUID = 0;\n\n  var UID_HASH_KEY = '__immutablehash__';\n  if (typeof Symbol === 'function') {\n    UID_HASH_KEY = Symbol(UID_HASH_KEY);\n  }\n\n  var STRING_HASH_CACHE_MIN_STRLEN = 16;\n  var STRING_HASH_CACHE_MAX_SIZE = 255;\n  var STRING_HASH_CACHE_SIZE = 0;\n  var stringHashCache = {};\n\n  function assertNotInfinite(size) {\n    invariant(\n      size !== Infinity,\n      'Cannot perform this action with an infinite size.'\n    );\n  }\n\n  createClass(Map, KeyedCollection);\n\n    // @pragma Construction\n\n    function Map(value) {\n      return value === null || value === undefined ? emptyMap() :\n        isMap(value) && !isOrdered(value) ? value :\n        emptyMap().withMutations(function(map ) {\n          var iter = KeyedIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v, k)  {return map.set(k, v)});\n        });\n    }\n\n    Map.of = function() {var keyValues = SLICE$0.call(arguments, 0);\n      return emptyMap().withMutations(function(map ) {\n        for (var i = 0; i < keyValues.length; i += 2) {\n          if (i + 1 >= keyValues.length) {\n            throw new Error('Missing value for key: ' + keyValues[i]);\n          }\n          map.set(keyValues[i], keyValues[i + 1]);\n        }\n      });\n    };\n\n    Map.prototype.toString = function() {\n      return this.__toString('Map {', '}');\n    };\n\n    // @pragma Access\n\n    Map.prototype.get = function(k, notSetValue) {\n      return this._root ?\n        this._root.get(0, undefined, k, notSetValue) :\n        notSetValue;\n    };\n\n    // @pragma Modification\n\n    Map.prototype.set = function(k, v) {\n      return updateMap(this, k, v);\n    };\n\n    Map.prototype.setIn = function(keyPath, v) {\n      return this.updateIn(keyPath, NOT_SET, function()  {return v});\n    };\n\n    Map.prototype.remove = function(k) {\n      return updateMap(this, k, NOT_SET);\n    };\n\n    Map.prototype.deleteIn = function(keyPath) {\n      return this.updateIn(keyPath, function()  {return NOT_SET});\n    };\n\n    Map.prototype.update = function(k, notSetValue, updater) {\n      return arguments.length === 1 ?\n        k(this) :\n        this.updateIn([k], notSetValue, updater);\n    };\n\n    Map.prototype.updateIn = function(keyPath, notSetValue, updater) {\n      if (!updater) {\n        updater = notSetValue;\n        notSetValue = undefined;\n      }\n      var updatedValue = updateInDeepMap(\n        this,\n        forceIterator(keyPath),\n        notSetValue,\n        updater\n      );\n      return updatedValue === NOT_SET ? undefined : updatedValue;\n    };\n\n    Map.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._root = null;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyMap();\n    };\n\n    // @pragma Composition\n\n    Map.prototype.merge = function(/*...iters*/) {\n      return mergeIntoMapWith(this, undefined, arguments);\n    };\n\n    Map.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoMapWith(this, merger, iters);\n    };\n\n    Map.prototype.mergeIn = function(keyPath) {var iters = SLICE$0.call(arguments, 1);\n      return this.updateIn(\n        keyPath,\n        emptyMap(),\n        function(m ) {return typeof m.merge === 'function' ?\n          m.merge.apply(m, iters) :\n          iters[iters.length - 1]}\n      );\n    };\n\n    Map.prototype.mergeDeep = function(/*...iters*/) {\n      return mergeIntoMapWith(this, deepMerger, arguments);\n    };\n\n    Map.prototype.mergeDeepWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoMapWith(this, deepMergerWith(merger), iters);\n    };\n\n    Map.prototype.mergeDeepIn = function(keyPath) {var iters = SLICE$0.call(arguments, 1);\n      return this.updateIn(\n        keyPath,\n        emptyMap(),\n        function(m ) {return typeof m.mergeDeep === 'function' ?\n          m.mergeDeep.apply(m, iters) :\n          iters[iters.length - 1]}\n      );\n    };\n\n    Map.prototype.sort = function(comparator) {\n      // Late binding\n      return OrderedMap(sortFactory(this, comparator));\n    };\n\n    Map.prototype.sortBy = function(mapper, comparator) {\n      // Late binding\n      return OrderedMap(sortFactory(this, comparator, mapper));\n    };\n\n    // @pragma Mutability\n\n    Map.prototype.withMutations = function(fn) {\n      var mutable = this.asMutable();\n      fn(mutable);\n      return mutable.wasAltered() ? mutable.__ensureOwner(this.__ownerID) : this;\n    };\n\n    Map.prototype.asMutable = function() {\n      return this.__ownerID ? this : this.__ensureOwner(new OwnerID());\n    };\n\n    Map.prototype.asImmutable = function() {\n      return this.__ensureOwner();\n    };\n\n    Map.prototype.wasAltered = function() {\n      return this.__altered;\n    };\n\n    Map.prototype.__iterator = function(type, reverse) {\n      return new MapIterator(this, type, reverse);\n    };\n\n    Map.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      this._root && this._root.iterate(function(entry ) {\n        iterations++;\n        return fn(entry[1], entry[0], this$0);\n      }, reverse);\n      return iterations;\n    };\n\n    Map.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this.__altered = false;\n        return this;\n      }\n      return makeMap(this.size, this._root, ownerID, this.__hash);\n    };\n\n\n  function isMap(maybeMap) {\n    return !!(maybeMap && maybeMap[IS_MAP_SENTINEL]);\n  }\n\n  Map.isMap = isMap;\n\n  var IS_MAP_SENTINEL = '@@__IMMUTABLE_MAP__@@';\n\n  var MapPrototype = Map.prototype;\n  MapPrototype[IS_MAP_SENTINEL] = true;\n  MapPrototype[DELETE] = MapPrototype.remove;\n  MapPrototype.removeIn = MapPrototype.deleteIn;\n\n\n  // #pragma Trie Nodes\n\n\n\n    function ArrayMapNode(ownerID, entries) {\n      this.ownerID = ownerID;\n      this.entries = entries;\n    }\n\n    ArrayMapNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      var entries = this.entries;\n      for (var ii = 0, len = entries.length; ii < len; ii++) {\n        if (is(key, entries[ii][0])) {\n          return entries[ii][1];\n        }\n      }\n      return notSetValue;\n    };\n\n    ArrayMapNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      var removed = value === NOT_SET;\n\n      var entries = this.entries;\n      var idx = 0;\n      for (var len = entries.length; idx < len; idx++) {\n        if (is(key, entries[idx][0])) {\n          break;\n        }\n      }\n      var exists = idx < len;\n\n      if (exists ? entries[idx][1] === value : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n      (removed || !exists) && SetRef(didChangeSize);\n\n      if (removed && entries.length === 1) {\n        return; // undefined\n      }\n\n      if (!exists && !removed && entries.length >= MAX_ARRAY_MAP_SIZE) {\n        return createNodes(ownerID, entries, key, value);\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newEntries = isEditable ? entries : arrCopy(entries);\n\n      if (exists) {\n        if (removed) {\n          idx === len - 1 ? newEntries.pop() : (newEntries[idx] = newEntries.pop());\n        } else {\n          newEntries[idx] = [key, value];\n        }\n      } else {\n        newEntries.push([key, value]);\n      }\n\n      if (isEditable) {\n        this.entries = newEntries;\n        return this;\n      }\n\n      return new ArrayMapNode(ownerID, newEntries);\n    };\n\n\n\n\n    function BitmapIndexedNode(ownerID, bitmap, nodes) {\n      this.ownerID = ownerID;\n      this.bitmap = bitmap;\n      this.nodes = nodes;\n    }\n\n    BitmapIndexedNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var bit = (1 << ((shift === 0 ? keyHash : keyHash >>> shift) & MASK));\n      var bitmap = this.bitmap;\n      return (bitmap & bit) === 0 ? notSetValue :\n        this.nodes[popCount(bitmap & (bit - 1))].get(shift + SHIFT, keyHash, key, notSetValue);\n    };\n\n    BitmapIndexedNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var keyHashFrag = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var bit = 1 << keyHashFrag;\n      var bitmap = this.bitmap;\n      var exists = (bitmap & bit) !== 0;\n\n      if (!exists && value === NOT_SET) {\n        return this;\n      }\n\n      var idx = popCount(bitmap & (bit - 1));\n      var nodes = this.nodes;\n      var node = exists ? nodes[idx] : undefined;\n      var newNode = updateNode(node, ownerID, shift + SHIFT, keyHash, key, value, didChangeSize, didAlter);\n\n      if (newNode === node) {\n        return this;\n      }\n\n      if (!exists && newNode && nodes.length >= MAX_BITMAP_INDEXED_SIZE) {\n        return expandNodes(ownerID, nodes, bitmap, keyHashFrag, newNode);\n      }\n\n      if (exists && !newNode && nodes.length === 2 && isLeafNode(nodes[idx ^ 1])) {\n        return nodes[idx ^ 1];\n      }\n\n      if (exists && newNode && nodes.length === 1 && isLeafNode(newNode)) {\n        return newNode;\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newBitmap = exists ? newNode ? bitmap : bitmap ^ bit : bitmap | bit;\n      var newNodes = exists ? newNode ?\n        setIn(nodes, idx, newNode, isEditable) :\n        spliceOut(nodes, idx, isEditable) :\n        spliceIn(nodes, idx, newNode, isEditable);\n\n      if (isEditable) {\n        this.bitmap = newBitmap;\n        this.nodes = newNodes;\n        return this;\n      }\n\n      return new BitmapIndexedNode(ownerID, newBitmap, newNodes);\n    };\n\n\n\n\n    function HashArrayMapNode(ownerID, count, nodes) {\n      this.ownerID = ownerID;\n      this.count = count;\n      this.nodes = nodes;\n    }\n\n    HashArrayMapNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var node = this.nodes[idx];\n      return node ? node.get(shift + SHIFT, keyHash, key, notSetValue) : notSetValue;\n    };\n\n    HashArrayMapNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var removed = value === NOT_SET;\n      var nodes = this.nodes;\n      var node = nodes[idx];\n\n      if (removed && !node) {\n        return this;\n      }\n\n      var newNode = updateNode(node, ownerID, shift + SHIFT, keyHash, key, value, didChangeSize, didAlter);\n      if (newNode === node) {\n        return this;\n      }\n\n      var newCount = this.count;\n      if (!node) {\n        newCount++;\n      } else if (!newNode) {\n        newCount--;\n        if (newCount < MIN_HASH_ARRAY_MAP_SIZE) {\n          return packNodes(ownerID, nodes, newCount, idx);\n        }\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newNodes = setIn(nodes, idx, newNode, isEditable);\n\n      if (isEditable) {\n        this.count = newCount;\n        this.nodes = newNodes;\n        return this;\n      }\n\n      return new HashArrayMapNode(ownerID, newCount, newNodes);\n    };\n\n\n\n\n    function HashCollisionNode(ownerID, keyHash, entries) {\n      this.ownerID = ownerID;\n      this.keyHash = keyHash;\n      this.entries = entries;\n    }\n\n    HashCollisionNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      var entries = this.entries;\n      for (var ii = 0, len = entries.length; ii < len; ii++) {\n        if (is(key, entries[ii][0])) {\n          return entries[ii][1];\n        }\n      }\n      return notSetValue;\n    };\n\n    HashCollisionNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n\n      var removed = value === NOT_SET;\n\n      if (keyHash !== this.keyHash) {\n        if (removed) {\n          return this;\n        }\n        SetRef(didAlter);\n        SetRef(didChangeSize);\n        return mergeIntoNode(this, ownerID, shift, keyHash, [key, value]);\n      }\n\n      var entries = this.entries;\n      var idx = 0;\n      for (var len = entries.length; idx < len; idx++) {\n        if (is(key, entries[idx][0])) {\n          break;\n        }\n      }\n      var exists = idx < len;\n\n      if (exists ? entries[idx][1] === value : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n      (removed || !exists) && SetRef(didChangeSize);\n\n      if (removed && len === 2) {\n        return new ValueNode(ownerID, this.keyHash, entries[idx ^ 1]);\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newEntries = isEditable ? entries : arrCopy(entries);\n\n      if (exists) {\n        if (removed) {\n          idx === len - 1 ? newEntries.pop() : (newEntries[idx] = newEntries.pop());\n        } else {\n          newEntries[idx] = [key, value];\n        }\n      } else {\n        newEntries.push([key, value]);\n      }\n\n      if (isEditable) {\n        this.entries = newEntries;\n        return this;\n      }\n\n      return new HashCollisionNode(ownerID, this.keyHash, newEntries);\n    };\n\n\n\n\n    function ValueNode(ownerID, keyHash, entry) {\n      this.ownerID = ownerID;\n      this.keyHash = keyHash;\n      this.entry = entry;\n    }\n\n    ValueNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      return is(key, this.entry[0]) ? this.entry[1] : notSetValue;\n    };\n\n    ValueNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      var removed = value === NOT_SET;\n      var keyMatch = is(key, this.entry[0]);\n      if (keyMatch ? value === this.entry[1] : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n\n      if (removed) {\n        SetRef(didChangeSize);\n        return; // undefined\n      }\n\n      if (keyMatch) {\n        if (ownerID && ownerID === this.ownerID) {\n          this.entry[1] = value;\n          return this;\n        }\n        return new ValueNode(ownerID, this.keyHash, [key, value]);\n      }\n\n      SetRef(didChangeSize);\n      return mergeIntoNode(this, ownerID, shift, hash(key), [key, value]);\n    };\n\n\n\n  // #pragma Iterators\n\n  ArrayMapNode.prototype.iterate =\n  HashCollisionNode.prototype.iterate = function (fn, reverse) {\n    var entries = this.entries;\n    for (var ii = 0, maxIndex = entries.length - 1; ii <= maxIndex; ii++) {\n      if (fn(entries[reverse ? maxIndex - ii : ii]) === false) {\n        return false;\n      }\n    }\n  }\n\n  BitmapIndexedNode.prototype.iterate =\n  HashArrayMapNode.prototype.iterate = function (fn, reverse) {\n    var nodes = this.nodes;\n    for (var ii = 0, maxIndex = nodes.length - 1; ii <= maxIndex; ii++) {\n      var node = nodes[reverse ? maxIndex - ii : ii];\n      if (node && node.iterate(fn, reverse) === false) {\n        return false;\n      }\n    }\n  }\n\n  ValueNode.prototype.iterate = function (fn, reverse) {\n    return fn(this.entry);\n  }\n\n  createClass(MapIterator, Iterator);\n\n    function MapIterator(map, type, reverse) {\n      this._type = type;\n      this._reverse = reverse;\n      this._stack = map._root && mapIteratorFrame(map._root);\n    }\n\n    MapIterator.prototype.next = function() {\n      var type = this._type;\n      var stack = this._stack;\n      while (stack) {\n        var node = stack.node;\n        var index = stack.index++;\n        var maxIndex;\n        if (node.entry) {\n          if (index === 0) {\n            return mapIteratorValue(type, node.entry);\n          }\n        } else if (node.entries) {\n          maxIndex = node.entries.length - 1;\n          if (index <= maxIndex) {\n            return mapIteratorValue(type, node.entries[this._reverse ? maxIndex - index : index]);\n          }\n        } else {\n          maxIndex = node.nodes.length - 1;\n          if (index <= maxIndex) {\n            var subNode = node.nodes[this._reverse ? maxIndex - index : index];\n            if (subNode) {\n              if (subNode.entry) {\n                return mapIteratorValue(type, subNode.entry);\n              }\n              stack = this._stack = mapIteratorFrame(subNode, stack);\n            }\n            continue;\n          }\n        }\n        stack = this._stack = this._stack.__prev;\n      }\n      return iteratorDone();\n    };\n\n\n  function mapIteratorValue(type, entry) {\n    return iteratorValue(type, entry[0], entry[1]);\n  }\n\n  function mapIteratorFrame(node, prev) {\n    return {\n      node: node,\n      index: 0,\n      __prev: prev\n    };\n  }\n\n  function makeMap(size, root, ownerID, hash) {\n    var map = Object.create(MapPrototype);\n    map.size = size;\n    map._root = root;\n    map.__ownerID = ownerID;\n    map.__hash = hash;\n    map.__altered = false;\n    return map;\n  }\n\n  var EMPTY_MAP;\n  function emptyMap() {\n    return EMPTY_MAP || (EMPTY_MAP = makeMap(0));\n  }\n\n  function updateMap(map, k, v) {\n    var newRoot;\n    var newSize;\n    if (!map._root) {\n      if (v === NOT_SET) {\n        return map;\n      }\n      newSize = 1;\n      newRoot = new ArrayMapNode(map.__ownerID, [[k, v]]);\n    } else {\n      var didChangeSize = MakeRef(CHANGE_LENGTH);\n      var didAlter = MakeRef(DID_ALTER);\n      newRoot = updateNode(map._root, map.__ownerID, 0, undefined, k, v, didChangeSize, didAlter);\n      if (!didAlter.value) {\n        return map;\n      }\n      newSize = map.size + (didChangeSize.value ? v === NOT_SET ? -1 : 1 : 0);\n    }\n    if (map.__ownerID) {\n      map.size = newSize;\n      map._root = newRoot;\n      map.__hash = undefined;\n      map.__altered = true;\n      return map;\n    }\n    return newRoot ? makeMap(newSize, newRoot) : emptyMap();\n  }\n\n  function updateNode(node, ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n    if (!node) {\n      if (value === NOT_SET) {\n        return node;\n      }\n      SetRef(didAlter);\n      SetRef(didChangeSize);\n      return new ValueNode(ownerID, keyHash, [key, value]);\n    }\n    return node.update(ownerID, shift, keyHash, key, value, didChangeSize, didAlter);\n  }\n\n  function isLeafNode(node) {\n    return node.constructor === ValueNode || node.constructor === HashCollisionNode;\n  }\n\n  function mergeIntoNode(node, ownerID, shift, keyHash, entry) {\n    if (node.keyHash === keyHash) {\n      return new HashCollisionNode(ownerID, keyHash, [node.entry, entry]);\n    }\n\n    var idx1 = (shift === 0 ? node.keyHash : node.keyHash >>> shift) & MASK;\n    var idx2 = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n\n    var newNode;\n    var nodes = idx1 === idx2 ?\n      [mergeIntoNode(node, ownerID, shift + SHIFT, keyHash, entry)] :\n      ((newNode = new ValueNode(ownerID, keyHash, entry)), idx1 < idx2 ? [node, newNode] : [newNode, node]);\n\n    return new BitmapIndexedNode(ownerID, (1 << idx1) | (1 << idx2), nodes);\n  }\n\n  function createNodes(ownerID, entries, key, value) {\n    if (!ownerID) {\n      ownerID = new OwnerID();\n    }\n    var node = new ValueNode(ownerID, hash(key), [key, value]);\n    for (var ii = 0; ii < entries.length; ii++) {\n      var entry = entries[ii];\n      node = node.update(ownerID, 0, undefined, entry[0], entry[1]);\n    }\n    return node;\n  }\n\n  function packNodes(ownerID, nodes, count, excluding) {\n    var bitmap = 0;\n    var packedII = 0;\n    var packedNodes = new Array(count);\n    for (var ii = 0, bit = 1, len = nodes.length; ii < len; ii++, bit <<= 1) {\n      var node = nodes[ii];\n      if (node !== undefined && ii !== excluding) {\n        bitmap |= bit;\n        packedNodes[packedII++] = node;\n      }\n    }\n    return new BitmapIndexedNode(ownerID, bitmap, packedNodes);\n  }\n\n  function expandNodes(ownerID, nodes, bitmap, including, node) {\n    var count = 0;\n    var expandedNodes = new Array(SIZE);\n    for (var ii = 0; bitmap !== 0; ii++, bitmap >>>= 1) {\n      expandedNodes[ii] = bitmap & 1 ? nodes[count++] : undefined;\n    }\n    expandedNodes[including] = node;\n    return new HashArrayMapNode(ownerID, count + 1, expandedNodes);\n  }\n\n  function mergeIntoMapWith(map, merger, iterables) {\n    var iters = [];\n    for (var ii = 0; ii < iterables.length; ii++) {\n      var value = iterables[ii];\n      var iter = KeyedIterable(value);\n      if (!isIterable(value)) {\n        iter = iter.map(function(v ) {return fromJS(v)});\n      }\n      iters.push(iter);\n    }\n    return mergeIntoCollectionWith(map, merger, iters);\n  }\n\n  function deepMerger(existing, value, key) {\n    return existing && existing.mergeDeep && isIterable(value) ?\n      existing.mergeDeep(value) :\n      is(existing, value) ? existing : value;\n  }\n\n  function deepMergerWith(merger) {\n    return function(existing, value, key)  {\n      if (existing && existing.mergeDeepWith && isIterable(value)) {\n        return existing.mergeDeepWith(merger, value);\n      }\n      var nextValue = merger(existing, value, key);\n      return is(existing, nextValue) ? existing : nextValue;\n    };\n  }\n\n  function mergeIntoCollectionWith(collection, merger, iters) {\n    iters = iters.filter(function(x ) {return x.size !== 0});\n    if (iters.length === 0) {\n      return collection;\n    }\n    if (collection.size === 0 && !collection.__ownerID && iters.length === 1) {\n      return collection.constructor(iters[0]);\n    }\n    return collection.withMutations(function(collection ) {\n      var mergeIntoMap = merger ?\n        function(value, key)  {\n          collection.update(key, NOT_SET, function(existing )\n            {return existing === NOT_SET ? value : merger(existing, value, key)}\n          );\n        } :\n        function(value, key)  {\n          collection.set(key, value);\n        }\n      for (var ii = 0; ii < iters.length; ii++) {\n        iters[ii].forEach(mergeIntoMap);\n      }\n    });\n  }\n\n  function updateInDeepMap(existing, keyPathIter, notSetValue, updater) {\n    var isNotSet = existing === NOT_SET;\n    var step = keyPathIter.next();\n    if (step.done) {\n      var existingValue = isNotSet ? notSetValue : existing;\n      var newValue = updater(existingValue);\n      return newValue === existingValue ? existing : newValue;\n    }\n    invariant(\n      isNotSet || (existing && existing.set),\n      'invalid keyPath'\n    );\n    var key = step.value;\n    var nextExisting = isNotSet ? NOT_SET : existing.get(key, NOT_SET);\n    var nextUpdated = updateInDeepMap(\n      nextExisting,\n      keyPathIter,\n      notSetValue,\n      updater\n    );\n    return nextUpdated === nextExisting ? existing :\n      nextUpdated === NOT_SET ? existing.remove(key) :\n      (isNotSet ? emptyMap() : existing).set(key, nextUpdated);\n  }\n\n  function popCount(x) {\n    x = x - ((x >> 1) & 0x55555555);\n    x = (x & 0x33333333) + ((x >> 2) & 0x33333333);\n    x = (x + (x >> 4)) & 0x0f0f0f0f;\n    x = x + (x >> 8);\n    x = x + (x >> 16);\n    return x & 0x7f;\n  }\n\n  function setIn(array, idx, val, canEdit) {\n    var newArray = canEdit ? array : arrCopy(array);\n    newArray[idx] = val;\n    return newArray;\n  }\n\n  function spliceIn(array, idx, val, canEdit) {\n    var newLen = array.length + 1;\n    if (canEdit && idx + 1 === newLen) {\n      array[idx] = val;\n      return array;\n    }\n    var newArray = new Array(newLen);\n    var after = 0;\n    for (var ii = 0; ii < newLen; ii++) {\n      if (ii === idx) {\n        newArray[ii] = val;\n        after = -1;\n      } else {\n        newArray[ii] = array[ii + after];\n      }\n    }\n    return newArray;\n  }\n\n  function spliceOut(array, idx, canEdit) {\n    var newLen = array.length - 1;\n    if (canEdit && idx === newLen) {\n      array.pop();\n      return array;\n    }\n    var newArray = new Array(newLen);\n    var after = 0;\n    for (var ii = 0; ii < newLen; ii++) {\n      if (ii === idx) {\n        after = 1;\n      }\n      newArray[ii] = array[ii + after];\n    }\n    return newArray;\n  }\n\n  var MAX_ARRAY_MAP_SIZE = SIZE / 4;\n  var MAX_BITMAP_INDEXED_SIZE = SIZE / 2;\n  var MIN_HASH_ARRAY_MAP_SIZE = SIZE / 4;\n\n  createClass(List, IndexedCollection);\n\n    // @pragma Construction\n\n    function List(value) {\n      var empty = emptyList();\n      if (value === null || value === undefined) {\n        return empty;\n      }\n      if (isList(value)) {\n        return value;\n      }\n      var iter = IndexedIterable(value);\n      var size = iter.size;\n      if (size === 0) {\n        return empty;\n      }\n      assertNotInfinite(size);\n      if (size > 0 && size < SIZE) {\n        return makeList(0, size, SHIFT, null, new VNode(iter.toArray()));\n      }\n      return empty.withMutations(function(list ) {\n        list.setSize(size);\n        iter.forEach(function(v, i)  {return list.set(i, v)});\n      });\n    }\n\n    List.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    List.prototype.toString = function() {\n      return this.__toString('List [', ']');\n    };\n\n    // @pragma Access\n\n    List.prototype.get = function(index, notSetValue) {\n      index = wrapIndex(this, index);\n      if (index >= 0 && index < this.size) {\n        index += this._origin;\n        var node = listNodeFor(this, index);\n        return node && node.array[index & MASK];\n      }\n      return notSetValue;\n    };\n\n    // @pragma Modification\n\n    List.prototype.set = function(index, value) {\n      return updateList(this, index, value);\n    };\n\n    List.prototype.remove = function(index) {\n      return !this.has(index) ? this :\n        index === 0 ? this.shift() :\n        index === this.size - 1 ? this.pop() :\n        this.splice(index, 1);\n    };\n\n    List.prototype.insert = function(index, value) {\n      return this.splice(index, 0, value);\n    };\n\n    List.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = this._origin = this._capacity = 0;\n        this._level = SHIFT;\n        this._root = this._tail = null;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyList();\n    };\n\n    List.prototype.push = function(/*...values*/) {\n      var values = arguments;\n      var oldSize = this.size;\n      return this.withMutations(function(list ) {\n        setListBounds(list, 0, oldSize + values.length);\n        for (var ii = 0; ii < values.length; ii++) {\n          list.set(oldSize + ii, values[ii]);\n        }\n      });\n    };\n\n    List.prototype.pop = function() {\n      return setListBounds(this, 0, -1);\n    };\n\n    List.prototype.unshift = function(/*...values*/) {\n      var values = arguments;\n      return this.withMutations(function(list ) {\n        setListBounds(list, -values.length);\n        for (var ii = 0; ii < values.length; ii++) {\n          list.set(ii, values[ii]);\n        }\n      });\n    };\n\n    List.prototype.shift = function() {\n      return setListBounds(this, 1);\n    };\n\n    // @pragma Composition\n\n    List.prototype.merge = function(/*...iters*/) {\n      return mergeIntoListWith(this, undefined, arguments);\n    };\n\n    List.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoListWith(this, merger, iters);\n    };\n\n    List.prototype.mergeDeep = function(/*...iters*/) {\n      return mergeIntoListWith(this, deepMerger, arguments);\n    };\n\n    List.prototype.mergeDeepWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoListWith(this, deepMergerWith(merger), iters);\n    };\n\n    List.prototype.setSize = function(size) {\n      return setListBounds(this, 0, size);\n    };\n\n    // @pragma Iteration\n\n    List.prototype.slice = function(begin, end) {\n      var size = this.size;\n      if (wholeSlice(begin, end, size)) {\n        return this;\n      }\n      return setListBounds(\n        this,\n        resolveBegin(begin, size),\n        resolveEnd(end, size)\n      );\n    };\n\n    List.prototype.__iterator = function(type, reverse) {\n      var index = 0;\n      var values = iterateList(this, reverse);\n      return new Iterator(function()  {\n        var value = values();\n        return value === DONE ?\n          iteratorDone() :\n          iteratorValue(type, index++, value);\n      });\n    };\n\n    List.prototype.__iterate = function(fn, reverse) {\n      var index = 0;\n      var values = iterateList(this, reverse);\n      var value;\n      while ((value = values()) !== DONE) {\n        if (fn(value, index++, this) === false) {\n          break;\n        }\n      }\n      return index;\n    };\n\n    List.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        return this;\n      }\n      return makeList(this._origin, this._capacity, this._level, this._root, this._tail, ownerID, this.__hash);\n    };\n\n\n  function isList(maybeList) {\n    return !!(maybeList && maybeList[IS_LIST_SENTINEL]);\n  }\n\n  List.isList = isList;\n\n  var IS_LIST_SENTINEL = '@@__IMMUTABLE_LIST__@@';\n\n  var ListPrototype = List.prototype;\n  ListPrototype[IS_LIST_SENTINEL] = true;\n  ListPrototype[DELETE] = ListPrototype.remove;\n  ListPrototype.setIn = MapPrototype.setIn;\n  ListPrototype.deleteIn =\n  ListPrototype.removeIn = MapPrototype.removeIn;\n  ListPrototype.update = MapPrototype.update;\n  ListPrototype.updateIn = MapPrototype.updateIn;\n  ListPrototype.mergeIn = MapPrototype.mergeIn;\n  ListPrototype.mergeDeepIn = MapPrototype.mergeDeepIn;\n  ListPrototype.withMutations = MapPrototype.withMutations;\n  ListPrototype.asMutable = MapPrototype.asMutable;\n  ListPrototype.asImmutable = MapPrototype.asImmutable;\n  ListPrototype.wasAltered = MapPrototype.wasAltered;\n\n\n\n    function VNode(array, ownerID) {\n      this.array = array;\n      this.ownerID = ownerID;\n    }\n\n    // TODO: seems like these methods are very similar\n\n    VNode.prototype.removeBefore = function(ownerID, level, index) {\n      if (index === level ? 1 << level : 0 || this.array.length === 0) {\n        return this;\n      }\n      var originIndex = (index >>> level) & MASK;\n      if (originIndex >= this.array.length) {\n        return new VNode([], ownerID);\n      }\n      var removingFirst = originIndex === 0;\n      var newChild;\n      if (level > 0) {\n        var oldChild = this.array[originIndex];\n        newChild = oldChild && oldChild.removeBefore(ownerID, level - SHIFT, index);\n        if (newChild === oldChild && removingFirst) {\n          return this;\n        }\n      }\n      if (removingFirst && !newChild) {\n        return this;\n      }\n      var editable = editableVNode(this, ownerID);\n      if (!removingFirst) {\n        for (var ii = 0; ii < originIndex; ii++) {\n          editable.array[ii] = undefined;\n        }\n      }\n      if (newChild) {\n        editable.array[originIndex] = newChild;\n      }\n      return editable;\n    };\n\n    VNode.prototype.removeAfter = function(ownerID, level, index) {\n      if (index === (level ? 1 << level : 0) || this.array.length === 0) {\n        return this;\n      }\n      var sizeIndex = ((index - 1) >>> level) & MASK;\n      if (sizeIndex >= this.array.length) {\n        return this;\n      }\n\n      var newChild;\n      if (level > 0) {\n        var oldChild = this.array[sizeIndex];\n        newChild = oldChild && oldChild.removeAfter(ownerID, level - SHIFT, index);\n        if (newChild === oldChild && sizeIndex === this.array.length - 1) {\n          return this;\n        }\n      }\n\n      var editable = editableVNode(this, ownerID);\n      editable.array.splice(sizeIndex + 1);\n      if (newChild) {\n        editable.array[sizeIndex] = newChild;\n      }\n      return editable;\n    };\n\n\n\n  var DONE = {};\n\n  function iterateList(list, reverse) {\n    var left = list._origin;\n    var right = list._capacity;\n    var tailPos = getTailOffset(right);\n    var tail = list._tail;\n\n    return iterateNodeOrLeaf(list._root, list._level, 0);\n\n    function iterateNodeOrLeaf(node, level, offset) {\n      return level === 0 ?\n        iterateLeaf(node, offset) :\n        iterateNode(node, level, offset);\n    }\n\n    function iterateLeaf(node, offset) {\n      var array = offset === tailPos ? tail && tail.array : node && node.array;\n      var from = offset > left ? 0 : left - offset;\n      var to = right - offset;\n      if (to > SIZE) {\n        to = SIZE;\n      }\n      return function()  {\n        if (from === to) {\n          return DONE;\n        }\n        var idx = reverse ? --to : from++;\n        return array && array[idx];\n      };\n    }\n\n    function iterateNode(node, level, offset) {\n      var values;\n      var array = node && node.array;\n      var from = offset > left ? 0 : (left - offset) >> level;\n      var to = ((right - offset) >> level) + 1;\n      if (to > SIZE) {\n        to = SIZE;\n      }\n      return function()  {\n        do {\n          if (values) {\n            var value = values();\n            if (value !== DONE) {\n              return value;\n            }\n            values = null;\n          }\n          if (from === to) {\n            return DONE;\n          }\n          var idx = reverse ? --to : from++;\n          values = iterateNodeOrLeaf(\n            array && array[idx], level - SHIFT, offset + (idx << level)\n          );\n        } while (true);\n      };\n    }\n  }\n\n  function makeList(origin, capacity, level, root, tail, ownerID, hash) {\n    var list = Object.create(ListPrototype);\n    list.size = capacity - origin;\n    list._origin = origin;\n    list._capacity = capacity;\n    list._level = level;\n    list._root = root;\n    list._tail = tail;\n    list.__ownerID = ownerID;\n    list.__hash = hash;\n    list.__altered = false;\n    return list;\n  }\n\n  var EMPTY_LIST;\n  function emptyList() {\n    return EMPTY_LIST || (EMPTY_LIST = makeList(0, 0, SHIFT));\n  }\n\n  function updateList(list, index, value) {\n    index = wrapIndex(list, index);\n\n    if (index !== index) {\n      return list;\n    }\n\n    if (index >= list.size || index < 0) {\n      return list.withMutations(function(list ) {\n        index < 0 ?\n          setListBounds(list, index).set(0, value) :\n          setListBounds(list, 0, index + 1).set(index, value)\n      });\n    }\n\n    index += list._origin;\n\n    var newTail = list._tail;\n    var newRoot = list._root;\n    var didAlter = MakeRef(DID_ALTER);\n    if (index >= getTailOffset(list._capacity)) {\n      newTail = updateVNode(newTail, list.__ownerID, 0, index, value, didAlter);\n    } else {\n      newRoot = updateVNode(newRoot, list.__ownerID, list._level, index, value, didAlter);\n    }\n\n    if (!didAlter.value) {\n      return list;\n    }\n\n    if (list.__ownerID) {\n      list._root = newRoot;\n      list._tail = newTail;\n      list.__hash = undefined;\n      list.__altered = true;\n      return list;\n    }\n    return makeList(list._origin, list._capacity, list._level, newRoot, newTail);\n  }\n\n  function updateVNode(node, ownerID, level, index, value, didAlter) {\n    var idx = (index >>> level) & MASK;\n    var nodeHas = node && idx < node.array.length;\n    if (!nodeHas && value === undefined) {\n      return node;\n    }\n\n    var newNode;\n\n    if (level > 0) {\n      var lowerNode = node && node.array[idx];\n      var newLowerNode = updateVNode(lowerNode, ownerID, level - SHIFT, index, value, didAlter);\n      if (newLowerNode === lowerNode) {\n        return node;\n      }\n      newNode = editableVNode(node, ownerID);\n      newNode.array[idx] = newLowerNode;\n      return newNode;\n    }\n\n    if (nodeHas && node.array[idx] === value) {\n      return node;\n    }\n\n    SetRef(didAlter);\n\n    newNode = editableVNode(node, ownerID);\n    if (value === undefined && idx === newNode.array.length - 1) {\n      newNode.array.pop();\n    } else {\n      newNode.array[idx] = value;\n    }\n    return newNode;\n  }\n\n  function editableVNode(node, ownerID) {\n    if (ownerID && node && ownerID === node.ownerID) {\n      return node;\n    }\n    return new VNode(node ? node.array.slice() : [], ownerID);\n  }\n\n  function listNodeFor(list, rawIndex) {\n    if (rawIndex >= getTailOffset(list._capacity)) {\n      return list._tail;\n    }\n    if (rawIndex < 1 << (list._level + SHIFT)) {\n      var node = list._root;\n      var level = list._level;\n      while (node && level > 0) {\n        node = node.array[(rawIndex >>> level) & MASK];\n        level -= SHIFT;\n      }\n      return node;\n    }\n  }\n\n  function setListBounds(list, begin, end) {\n    // Sanitize begin & end using this shorthand for ToInt32(argument)\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n    if (begin !== undefined) {\n      begin = begin | 0;\n    }\n    if (end !== undefined) {\n      end = end | 0;\n    }\n    var owner = list.__ownerID || new OwnerID();\n    var oldOrigin = list._origin;\n    var oldCapacity = list._capacity;\n    var newOrigin = oldOrigin + begin;\n    var newCapacity = end === undefined ? oldCapacity : end < 0 ? oldCapacity + end : oldOrigin + end;\n    if (newOrigin === oldOrigin && newCapacity === oldCapacity) {\n      return list;\n    }\n\n    // If it's going to end after it starts, it's empty.\n    if (newOrigin >= newCapacity) {\n      return list.clear();\n    }\n\n    var newLevel = list._level;\n    var newRoot = list._root;\n\n    // New origin might need creating a higher root.\n    var offsetShift = 0;\n    while (newOrigin + offsetShift < 0) {\n      newRoot = new VNode(newRoot && newRoot.array.length ? [undefined, newRoot] : [], owner);\n      newLevel += SHIFT;\n      offsetShift += 1 << newLevel;\n    }\n    if (offsetShift) {\n      newOrigin += offsetShift;\n      oldOrigin += offsetShift;\n      newCapacity += offsetShift;\n      oldCapacity += offsetShift;\n    }\n\n    var oldTailOffset = getTailOffset(oldCapacity);\n    var newTailOffset = getTailOffset(newCapacity);\n\n    // New size might need creating a higher root.\n    while (newTailOffset >= 1 << (newLevel + SHIFT)) {\n      newRoot = new VNode(newRoot && newRoot.array.length ? [newRoot] : [], owner);\n      newLevel += SHIFT;\n    }\n\n    // Locate or create the new tail.\n    var oldTail = list._tail;\n    var newTail = newTailOffset < oldTailOffset ?\n      listNodeFor(list, newCapacity - 1) :\n      newTailOffset > oldTailOffset ? new VNode([], owner) : oldTail;\n\n    // Merge Tail into tree.\n    if (oldTail && newTailOffset > oldTailOffset && newOrigin < oldCapacity && oldTail.array.length) {\n      newRoot = editableVNode(newRoot, owner);\n      var node = newRoot;\n      for (var level = newLevel; level > SHIFT; level -= SHIFT) {\n        var idx = (oldTailOffset >>> level) & MASK;\n        node = node.array[idx] = editableVNode(node.array[idx], owner);\n      }\n      node.array[(oldTailOffset >>> SHIFT) & MASK] = oldTail;\n    }\n\n    // If the size has been reduced, there's a chance the tail needs to be trimmed.\n    if (newCapacity < oldCapacity) {\n      newTail = newTail && newTail.removeAfter(owner, 0, newCapacity);\n    }\n\n    // If the new origin is within the tail, then we do not need a root.\n    if (newOrigin >= newTailOffset) {\n      newOrigin -= newTailOffset;\n      newCapacity -= newTailOffset;\n      newLevel = SHIFT;\n      newRoot = null;\n      newTail = newTail && newTail.removeBefore(owner, 0, newOrigin);\n\n    // Otherwise, if the root has been trimmed, garbage collect.\n    } else if (newOrigin > oldOrigin || newTailOffset < oldTailOffset) {\n      offsetShift = 0;\n\n      // Identify the new top root node of the subtree of the old root.\n      while (newRoot) {\n        var beginIndex = (newOrigin >>> newLevel) & MASK;\n        if (beginIndex !== (newTailOffset >>> newLevel) & MASK) {\n          break;\n        }\n        if (beginIndex) {\n          offsetShift += (1 << newLevel) * beginIndex;\n        }\n        newLevel -= SHIFT;\n        newRoot = newRoot.array[beginIndex];\n      }\n\n      // Trim the new sides of the new root.\n      if (newRoot && newOrigin > oldOrigin) {\n        newRoot = newRoot.removeBefore(owner, newLevel, newOrigin - offsetShift);\n      }\n      if (newRoot && newTailOffset < oldTailOffset) {\n        newRoot = newRoot.removeAfter(owner, newLevel, newTailOffset - offsetShift);\n      }\n      if (offsetShift) {\n        newOrigin -= offsetShift;\n        newCapacity -= offsetShift;\n      }\n    }\n\n    if (list.__ownerID) {\n      list.size = newCapacity - newOrigin;\n      list._origin = newOrigin;\n      list._capacity = newCapacity;\n      list._level = newLevel;\n      list._root = newRoot;\n      list._tail = newTail;\n      list.__hash = undefined;\n      list.__altered = true;\n      return list;\n    }\n    return makeList(newOrigin, newCapacity, newLevel, newRoot, newTail);\n  }\n\n  function mergeIntoListWith(list, merger, iterables) {\n    var iters = [];\n    var maxSize = 0;\n    for (var ii = 0; ii < iterables.length; ii++) {\n      var value = iterables[ii];\n      var iter = IndexedIterable(value);\n      if (iter.size > maxSize) {\n        maxSize = iter.size;\n      }\n      if (!isIterable(value)) {\n        iter = iter.map(function(v ) {return fromJS(v)});\n      }\n      iters.push(iter);\n    }\n    if (maxSize > list.size) {\n      list = list.setSize(maxSize);\n    }\n    return mergeIntoCollectionWith(list, merger, iters);\n  }\n\n  function getTailOffset(size) {\n    return size < SIZE ? 0 : (((size - 1) >>> SHIFT) << SHIFT);\n  }\n\n  createClass(OrderedMap, Map);\n\n    // @pragma Construction\n\n    function OrderedMap(value) {\n      return value === null || value === undefined ? emptyOrderedMap() :\n        isOrderedMap(value) ? value :\n        emptyOrderedMap().withMutations(function(map ) {\n          var iter = KeyedIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v, k)  {return map.set(k, v)});\n        });\n    }\n\n    OrderedMap.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    OrderedMap.prototype.toString = function() {\n      return this.__toString('OrderedMap {', '}');\n    };\n\n    // @pragma Access\n\n    OrderedMap.prototype.get = function(k, notSetValue) {\n      var index = this._map.get(k);\n      return index !== undefined ? this._list.get(index)[1] : notSetValue;\n    };\n\n    // @pragma Modification\n\n    OrderedMap.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._map.clear();\n        this._list.clear();\n        return this;\n      }\n      return emptyOrderedMap();\n    };\n\n    OrderedMap.prototype.set = function(k, v) {\n      return updateOrderedMap(this, k, v);\n    };\n\n    OrderedMap.prototype.remove = function(k) {\n      return updateOrderedMap(this, k, NOT_SET);\n    };\n\n    OrderedMap.prototype.wasAltered = function() {\n      return this._map.wasAltered() || this._list.wasAltered();\n    };\n\n    OrderedMap.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._list.__iterate(\n        function(entry ) {return entry && fn(entry[1], entry[0], this$0)},\n        reverse\n      );\n    };\n\n    OrderedMap.prototype.__iterator = function(type, reverse) {\n      return this._list.fromEntrySeq().__iterator(type, reverse);\n    };\n\n    OrderedMap.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map.__ensureOwner(ownerID);\n      var newList = this._list.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        this._list = newList;\n        return this;\n      }\n      return makeOrderedMap(newMap, newList, ownerID, this.__hash);\n    };\n\n\n  function isOrderedMap(maybeOrderedMap) {\n    return isMap(maybeOrderedMap) && isOrdered(maybeOrderedMap);\n  }\n\n  OrderedMap.isOrderedMap = isOrderedMap;\n\n  OrderedMap.prototype[IS_ORDERED_SENTINEL] = true;\n  OrderedMap.prototype[DELETE] = OrderedMap.prototype.remove;\n\n\n\n  function makeOrderedMap(map, list, ownerID, hash) {\n    var omap = Object.create(OrderedMap.prototype);\n    omap.size = map ? map.size : 0;\n    omap._map = map;\n    omap._list = list;\n    omap.__ownerID = ownerID;\n    omap.__hash = hash;\n    return omap;\n  }\n\n  var EMPTY_ORDERED_MAP;\n  function emptyOrderedMap() {\n    return EMPTY_ORDERED_MAP || (EMPTY_ORDERED_MAP = makeOrderedMap(emptyMap(), emptyList()));\n  }\n\n  function updateOrderedMap(omap, k, v) {\n    var map = omap._map;\n    var list = omap._list;\n    var i = map.get(k);\n    var has = i !== undefined;\n    var newMap;\n    var newList;\n    if (v === NOT_SET) { // removed\n      if (!has) {\n        return omap;\n      }\n      if (list.size >= SIZE && list.size >= map.size * 2) {\n        newList = list.filter(function(entry, idx)  {return entry !== undefined && i !== idx});\n        newMap = newList.toKeyedSeq().map(function(entry ) {return entry[0]}).flip().toMap();\n        if (omap.__ownerID) {\n          newMap.__ownerID = newList.__ownerID = omap.__ownerID;\n        }\n      } else {\n        newMap = map.remove(k);\n        newList = i === list.size - 1 ? list.pop() : list.set(i, undefined);\n      }\n    } else {\n      if (has) {\n        if (v === list.get(i)[1]) {\n          return omap;\n        }\n        newMap = map;\n        newList = list.set(i, [k, v]);\n      } else {\n        newMap = map.set(k, list.size);\n        newList = list.set(list.size, [k, v]);\n      }\n    }\n    if (omap.__ownerID) {\n      omap.size = newMap.size;\n      omap._map = newMap;\n      omap._list = newList;\n      omap.__hash = undefined;\n      return omap;\n    }\n    return makeOrderedMap(newMap, newList);\n  }\n\n  createClass(ToKeyedSequence, KeyedSeq);\n    function ToKeyedSequence(indexed, useKeys) {\n      this._iter = indexed;\n      this._useKeys = useKeys;\n      this.size = indexed.size;\n    }\n\n    ToKeyedSequence.prototype.get = function(key, notSetValue) {\n      return this._iter.get(key, notSetValue);\n    };\n\n    ToKeyedSequence.prototype.has = function(key) {\n      return this._iter.has(key);\n    };\n\n    ToKeyedSequence.prototype.valueSeq = function() {\n      return this._iter.valueSeq();\n    };\n\n    ToKeyedSequence.prototype.reverse = function() {var this$0 = this;\n      var reversedSequence = reverseFactory(this, true);\n      if (!this._useKeys) {\n        reversedSequence.valueSeq = function()  {return this$0._iter.toSeq().reverse()};\n      }\n      return reversedSequence;\n    };\n\n    ToKeyedSequence.prototype.map = function(mapper, context) {var this$0 = this;\n      var mappedSequence = mapFactory(this, mapper, context);\n      if (!this._useKeys) {\n        mappedSequence.valueSeq = function()  {return this$0._iter.toSeq().map(mapper, context)};\n      }\n      return mappedSequence;\n    };\n\n    ToKeyedSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var ii;\n      return this._iter.__iterate(\n        this._useKeys ?\n          function(v, k)  {return fn(v, k, this$0)} :\n          ((ii = reverse ? resolveSize(this) : 0),\n            function(v ) {return fn(v, reverse ? --ii : ii++, this$0)}),\n        reverse\n      );\n    };\n\n    ToKeyedSequence.prototype.__iterator = function(type, reverse) {\n      if (this._useKeys) {\n        return this._iter.__iterator(type, reverse);\n      }\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      var ii = reverse ? resolveSize(this) : 0;\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, reverse ? --ii : ii++, step.value, step);\n      });\n    };\n\n  ToKeyedSequence.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n  createClass(ToIndexedSequence, IndexedSeq);\n    function ToIndexedSequence(iter) {\n      this._iter = iter;\n      this.size = iter.size;\n    }\n\n    ToIndexedSequence.prototype.includes = function(value) {\n      return this._iter.includes(value);\n    };\n\n    ToIndexedSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      return this._iter.__iterate(function(v ) {return fn(v, iterations++, this$0)}, reverse);\n    };\n\n    ToIndexedSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      var iterations = 0;\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, iterations++, step.value, step)\n      });\n    };\n\n\n\n  createClass(ToSetSequence, SetSeq);\n    function ToSetSequence(iter) {\n      this._iter = iter;\n      this.size = iter.size;\n    }\n\n    ToSetSequence.prototype.has = function(key) {\n      return this._iter.includes(key);\n    };\n\n    ToSetSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._iter.__iterate(function(v ) {return fn(v, v, this$0)}, reverse);\n    };\n\n    ToSetSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, step.value, step.value, step);\n      });\n    };\n\n\n\n  createClass(FromEntriesSequence, KeyedSeq);\n    function FromEntriesSequence(entries) {\n      this._iter = entries;\n      this.size = entries.size;\n    }\n\n    FromEntriesSequence.prototype.entrySeq = function() {\n      return this._iter.toSeq();\n    };\n\n    FromEntriesSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._iter.__iterate(function(entry ) {\n        // Check if entry exists first so array access doesn't throw for holes\n        // in the parent iteration.\n        if (entry) {\n          validateEntry(entry);\n          var indexedIterable = isIterable(entry);\n          return fn(\n            indexedIterable ? entry.get(1) : entry[1],\n            indexedIterable ? entry.get(0) : entry[0],\n            this$0\n          );\n        }\n      }, reverse);\n    };\n\n    FromEntriesSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      return new Iterator(function()  {\n        while (true) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          var entry = step.value;\n          // Check if entry exists first so array access doesn't throw for holes\n          // in the parent iteration.\n          if (entry) {\n            validateEntry(entry);\n            var indexedIterable = isIterable(entry);\n            return iteratorValue(\n              type,\n              indexedIterable ? entry.get(0) : entry[0],\n              indexedIterable ? entry.get(1) : entry[1],\n              step\n            );\n          }\n        }\n      });\n    };\n\n\n  ToIndexedSequence.prototype.cacheResult =\n  ToKeyedSequence.prototype.cacheResult =\n  ToSetSequence.prototype.cacheResult =\n  FromEntriesSequence.prototype.cacheResult =\n    cacheResultThrough;\n\n\n  function flipFactory(iterable) {\n    var flipSequence = makeSequence(iterable);\n    flipSequence._iter = iterable;\n    flipSequence.size = iterable.size;\n    flipSequence.flip = function()  {return iterable};\n    flipSequence.reverse = function () {\n      var reversedSequence = iterable.reverse.apply(this); // super.reverse()\n      reversedSequence.flip = function()  {return iterable.reverse()};\n      return reversedSequence;\n    };\n    flipSequence.has = function(key ) {return iterable.includes(key)};\n    flipSequence.includes = function(key ) {return iterable.has(key)};\n    flipSequence.cacheResult = cacheResultThrough;\n    flipSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(function(v, k)  {return fn(k, v, this$0) !== false}, reverse);\n    }\n    flipSequence.__iteratorUncached = function(type, reverse) {\n      if (type === ITERATE_ENTRIES) {\n        var iterator = iterable.__iterator(type, reverse);\n        return new Iterator(function()  {\n          var step = iterator.next();\n          if (!step.done) {\n            var k = step.value[0];\n            step.value[0] = step.value[1];\n            step.value[1] = k;\n          }\n          return step;\n        });\n      }\n      return iterable.__iterator(\n        type === ITERATE_VALUES ? ITERATE_KEYS : ITERATE_VALUES,\n        reverse\n      );\n    }\n    return flipSequence;\n  }\n\n\n  function mapFactory(iterable, mapper, context) {\n    var mappedSequence = makeSequence(iterable);\n    mappedSequence.size = iterable.size;\n    mappedSequence.has = function(key ) {return iterable.has(key)};\n    mappedSequence.get = function(key, notSetValue)  {\n      var v = iterable.get(key, NOT_SET);\n      return v === NOT_SET ?\n        notSetValue :\n        mapper.call(context, v, key, iterable);\n    };\n    mappedSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(\n        function(v, k, c)  {return fn(mapper.call(context, v, k, c), k, this$0) !== false},\n        reverse\n      );\n    }\n    mappedSequence.__iteratorUncached = function (type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      return new Iterator(function()  {\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var key = entry[0];\n        return iteratorValue(\n          type,\n          key,\n          mapper.call(context, entry[1], key, iterable),\n          step\n        );\n      });\n    }\n    return mappedSequence;\n  }\n\n\n  function reverseFactory(iterable, useKeys) {\n    var reversedSequence = makeSequence(iterable);\n    reversedSequence._iter = iterable;\n    reversedSequence.size = iterable.size;\n    reversedSequence.reverse = function()  {return iterable};\n    if (iterable.flip) {\n      reversedSequence.flip = function () {\n        var flipSequence = flipFactory(iterable);\n        flipSequence.reverse = function()  {return iterable.flip()};\n        return flipSequence;\n      };\n    }\n    reversedSequence.get = function(key, notSetValue) \n      {return iterable.get(useKeys ? key : -1 - key, notSetValue)};\n    reversedSequence.has = function(key )\n      {return iterable.has(useKeys ? key : -1 - key)};\n    reversedSequence.includes = function(value ) {return iterable.includes(value)};\n    reversedSequence.cacheResult = cacheResultThrough;\n    reversedSequence.__iterate = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(function(v, k)  {return fn(v, k, this$0)}, !reverse);\n    };\n    reversedSequence.__iterator =\n      function(type, reverse)  {return iterable.__iterator(type, !reverse)};\n    return reversedSequence;\n  }\n\n\n  function filterFactory(iterable, predicate, context, useKeys) {\n    var filterSequence = makeSequence(iterable);\n    if (useKeys) {\n      filterSequence.has = function(key ) {\n        var v = iterable.get(key, NOT_SET);\n        return v !== NOT_SET && !!predicate.call(context, v, key, iterable);\n      };\n      filterSequence.get = function(key, notSetValue)  {\n        var v = iterable.get(key, NOT_SET);\n        return v !== NOT_SET && predicate.call(context, v, key, iterable) ?\n          v : notSetValue;\n      };\n    }\n    filterSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c)  {\n        if (predicate.call(context, v, k, c)) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0);\n        }\n      }, reverse);\n      return iterations;\n    };\n    filterSequence.__iteratorUncached = function (type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var iterations = 0;\n      return new Iterator(function()  {\n        while (true) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          var entry = step.value;\n          var key = entry[0];\n          var value = entry[1];\n          if (predicate.call(context, value, key, iterable)) {\n            return iteratorValue(type, useKeys ? key : iterations++, value, step);\n          }\n        }\n      });\n    }\n    return filterSequence;\n  }\n\n\n  function countByFactory(iterable, grouper, context) {\n    var groups = Map().asMutable();\n    iterable.__iterate(function(v, k)  {\n      groups.update(\n        grouper.call(context, v, k, iterable),\n        0,\n        function(a ) {return a + 1}\n      );\n    });\n    return groups.asImmutable();\n  }\n\n\n  function groupByFactory(iterable, grouper, context) {\n    var isKeyedIter = isKeyed(iterable);\n    var groups = (isOrdered(iterable) ? OrderedMap() : Map()).asMutable();\n    iterable.__iterate(function(v, k)  {\n      groups.update(\n        grouper.call(context, v, k, iterable),\n        function(a ) {return (a = a || [], a.push(isKeyedIter ? [k, v] : v), a)}\n      );\n    });\n    var coerce = iterableClass(iterable);\n    return groups.map(function(arr ) {return reify(iterable, coerce(arr))});\n  }\n\n\n  function sliceFactory(iterable, begin, end, useKeys) {\n    var originalSize = iterable.size;\n\n    // Sanitize begin & end using this shorthand for ToInt32(argument)\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n    if (begin !== undefined) {\n      begin = begin | 0;\n    }\n    if (end !== undefined) {\n      if (end === Infinity) {\n        end = originalSize;\n      } else {\n        end = end | 0;\n      }\n    }\n\n    if (wholeSlice(begin, end, originalSize)) {\n      return iterable;\n    }\n\n    var resolvedBegin = resolveBegin(begin, originalSize);\n    var resolvedEnd = resolveEnd(end, originalSize);\n\n    // begin or end will be NaN if they were provided as negative numbers and\n    // this iterable's size is unknown. In that case, cache first so there is\n    // a known size and these do not resolve to NaN.\n    if (resolvedBegin !== resolvedBegin || resolvedEnd !== resolvedEnd) {\n      return sliceFactory(iterable.toSeq().cacheResult(), begin, end, useKeys);\n    }\n\n    // Note: resolvedEnd is undefined when the original sequence's length is\n    // unknown and this slice did not supply an end and should contain all\n    // elements after resolvedBegin.\n    // In that case, resolvedSize will be NaN and sliceSize will remain undefined.\n    var resolvedSize = resolvedEnd - resolvedBegin;\n    var sliceSize;\n    if (resolvedSize === resolvedSize) {\n      sliceSize = resolvedSize < 0 ? 0 : resolvedSize;\n    }\n\n    var sliceSeq = makeSequence(iterable);\n\n    // If iterable.size is undefined, the size of the realized sliceSeq is\n    // unknown at this point unless the number of items to slice is 0\n    sliceSeq.size = sliceSize === 0 ? sliceSize : iterable.size && sliceSize || undefined;\n\n    if (!useKeys && isSeq(iterable) && sliceSize >= 0) {\n      sliceSeq.get = function (index, notSetValue) {\n        index = wrapIndex(this, index);\n        return index >= 0 && index < sliceSize ?\n          iterable.get(index + resolvedBegin, notSetValue) :\n          notSetValue;\n      }\n    }\n\n    sliceSeq.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      if (sliceSize === 0) {\n        return 0;\n      }\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var skipped = 0;\n      var isSkipping = true;\n      var iterations = 0;\n      iterable.__iterate(function(v, k)  {\n        if (!(isSkipping && (isSkipping = skipped++ < resolvedBegin))) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0) !== false &&\n                 iterations !== sliceSize;\n        }\n      });\n      return iterations;\n    };\n\n    sliceSeq.__iteratorUncached = function(type, reverse) {\n      if (sliceSize !== 0 && reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      // Don't bother instantiating parent iterator if taking 0.\n      var iterator = sliceSize !== 0 && iterable.__iterator(type, reverse);\n      var skipped = 0;\n      var iterations = 0;\n      return new Iterator(function()  {\n        while (skipped++ < resolvedBegin) {\n          iterator.next();\n        }\n        if (++iterations > sliceSize) {\n          return iteratorDone();\n        }\n        var step = iterator.next();\n        if (useKeys || type === ITERATE_VALUES) {\n          return step;\n        } else if (type === ITERATE_KEYS) {\n          return iteratorValue(type, iterations - 1, undefined, step);\n        } else {\n          return iteratorValue(type, iterations - 1, step.value[1], step);\n        }\n      });\n    }\n\n    return sliceSeq;\n  }\n\n\n  function takeWhileFactory(iterable, predicate, context) {\n    var takeSequence = makeSequence(iterable);\n    takeSequence.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c) \n        {return predicate.call(context, v, k, c) && ++iterations && fn(v, k, this$0)}\n      );\n      return iterations;\n    };\n    takeSequence.__iteratorUncached = function(type, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var iterating = true;\n      return new Iterator(function()  {\n        if (!iterating) {\n          return iteratorDone();\n        }\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var k = entry[0];\n        var v = entry[1];\n        if (!predicate.call(context, v, k, this$0)) {\n          iterating = false;\n          return iteratorDone();\n        }\n        return type === ITERATE_ENTRIES ? step :\n          iteratorValue(type, k, v, step);\n      });\n    };\n    return takeSequence;\n  }\n\n\n  function skipWhileFactory(iterable, predicate, context, useKeys) {\n    var skipSequence = makeSequence(iterable);\n    skipSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var isSkipping = true;\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c)  {\n        if (!(isSkipping && (isSkipping = predicate.call(context, v, k, c)))) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0);\n        }\n      });\n      return iterations;\n    };\n    skipSequence.__iteratorUncached = function(type, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var skipping = true;\n      var iterations = 0;\n      return new Iterator(function()  {\n        var step, k, v;\n        do {\n          step = iterator.next();\n          if (step.done) {\n            if (useKeys || type === ITERATE_VALUES) {\n              return step;\n            } else if (type === ITERATE_KEYS) {\n              return iteratorValue(type, iterations++, undefined, step);\n            } else {\n              return iteratorValue(type, iterations++, step.value[1], step);\n            }\n          }\n          var entry = step.value;\n          k = entry[0];\n          v = entry[1];\n          skipping && (skipping = predicate.call(context, v, k, this$0));\n        } while (skipping);\n        return type === ITERATE_ENTRIES ? step :\n          iteratorValue(type, k, v, step);\n      });\n    };\n    return skipSequence;\n  }\n\n\n  function concatFactory(iterable, values) {\n    var isKeyedIterable = isKeyed(iterable);\n    var iters = [iterable].concat(values).map(function(v ) {\n      if (!isIterable(v)) {\n        v = isKeyedIterable ?\n          keyedSeqFromValue(v) :\n          indexedSeqFromValue(Array.isArray(v) ? v : [v]);\n      } else if (isKeyedIterable) {\n        v = KeyedIterable(v);\n      }\n      return v;\n    }).filter(function(v ) {return v.size !== 0});\n\n    if (iters.length === 0) {\n      return iterable;\n    }\n\n    if (iters.length === 1) {\n      var singleton = iters[0];\n      if (singleton === iterable ||\n          isKeyedIterable && isKeyed(singleton) ||\n          isIndexed(iterable) && isIndexed(singleton)) {\n        return singleton;\n      }\n    }\n\n    var concatSeq = new ArraySeq(iters);\n    if (isKeyedIterable) {\n      concatSeq = concatSeq.toKeyedSeq();\n    } else if (!isIndexed(iterable)) {\n      concatSeq = concatSeq.toSetSeq();\n    }\n    concatSeq = concatSeq.flatten(true);\n    concatSeq.size = iters.reduce(\n      function(sum, seq)  {\n        if (sum !== undefined) {\n          var size = seq.size;\n          if (size !== undefined) {\n            return sum + size;\n          }\n        }\n      },\n      0\n    );\n    return concatSeq;\n  }\n\n\n  function flattenFactory(iterable, depth, useKeys) {\n    var flatSequence = makeSequence(iterable);\n    flatSequence.__iterateUncached = function(fn, reverse) {\n      var iterations = 0;\n      var stopped = false;\n      function flatDeep(iter, currentDepth) {var this$0 = this;\n        iter.__iterate(function(v, k)  {\n          if ((!depth || currentDepth < depth) && isIterable(v)) {\n            flatDeep(v, currentDepth + 1);\n          } else if (fn(v, useKeys ? k : iterations++, this$0) === false) {\n            stopped = true;\n          }\n          return !stopped;\n        }, reverse);\n      }\n      flatDeep(iterable, 0);\n      return iterations;\n    }\n    flatSequence.__iteratorUncached = function(type, reverse) {\n      var iterator = iterable.__iterator(type, reverse);\n      var stack = [];\n      var iterations = 0;\n      return new Iterator(function()  {\n        while (iterator) {\n          var step = iterator.next();\n          if (step.done !== false) {\n            iterator = stack.pop();\n            continue;\n          }\n          var v = step.value;\n          if (type === ITERATE_ENTRIES) {\n            v = v[1];\n          }\n          if ((!depth || stack.length < depth) && isIterable(v)) {\n            stack.push(iterator);\n            iterator = v.__iterator(type, reverse);\n          } else {\n            return useKeys ? step : iteratorValue(type, iterations++, v, step);\n          }\n        }\n        return iteratorDone();\n      });\n    }\n    return flatSequence;\n  }\n\n\n  function flatMapFactory(iterable, mapper, context) {\n    var coerce = iterableClass(iterable);\n    return iterable.toSeq().map(\n      function(v, k)  {return coerce(mapper.call(context, v, k, iterable))}\n    ).flatten(true);\n  }\n\n\n  function interposeFactory(iterable, separator) {\n    var interposedSequence = makeSequence(iterable);\n    interposedSequence.size = iterable.size && iterable.size * 2 -1;\n    interposedSequence.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      iterable.__iterate(function(v, k) \n        {return (!iterations || fn(separator, iterations++, this$0) !== false) &&\n        fn(v, iterations++, this$0) !== false},\n        reverse\n      );\n      return iterations;\n    };\n    interposedSequence.__iteratorUncached = function(type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_VALUES, reverse);\n      var iterations = 0;\n      var step;\n      return new Iterator(function()  {\n        if (!step || iterations % 2) {\n          step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n        }\n        return iterations % 2 ?\n          iteratorValue(type, iterations++, separator) :\n          iteratorValue(type, iterations++, step.value, step);\n      });\n    };\n    return interposedSequence;\n  }\n\n\n  function sortFactory(iterable, comparator, mapper) {\n    if (!comparator) {\n      comparator = defaultComparator;\n    }\n    var isKeyedIterable = isKeyed(iterable);\n    var index = 0;\n    var entries = iterable.toSeq().map(\n      function(v, k)  {return [k, v, index++, mapper ? mapper(v, k, iterable) : v]}\n    ).toArray();\n    entries.sort(function(a, b)  {return comparator(a[3], b[3]) || a[2] - b[2]}).forEach(\n      isKeyedIterable ?\n      function(v, i)  { entries[i].length = 2; } :\n      function(v, i)  { entries[i] = v[1]; }\n    );\n    return isKeyedIterable ? KeyedSeq(entries) :\n      isIndexed(iterable) ? IndexedSeq(entries) :\n      SetSeq(entries);\n  }\n\n\n  function maxFactory(iterable, comparator, mapper) {\n    if (!comparator) {\n      comparator = defaultComparator;\n    }\n    if (mapper) {\n      var entry = iterable.toSeq()\n        .map(function(v, k)  {return [v, mapper(v, k, iterable)]})\n        .reduce(function(a, b)  {return maxCompare(comparator, a[1], b[1]) ? b : a});\n      return entry && entry[0];\n    } else {\n      return iterable.reduce(function(a, b)  {return maxCompare(comparator, a, b) ? b : a});\n    }\n  }\n\n  function maxCompare(comparator, a, b) {\n    var comp = comparator(b, a);\n    // b is considered the new max if the comparator declares them equal, but\n    // they are not equal and b is in fact a nullish value.\n    return (comp === 0 && b !== a && (b === undefined || b === null || b !== b)) || comp > 0;\n  }\n\n\n  function zipWithFactory(keyIter, zipper, iters) {\n    var zipSequence = makeSequence(keyIter);\n    zipSequence.size = new ArraySeq(iters).map(function(i ) {return i.size}).min();\n    // Note: this a generic base implementation of __iterate in terms of\n    // __iterator which may be more generically useful in the future.\n    zipSequence.__iterate = function(fn, reverse) {\n      /* generic:\n      var iterator = this.__iterator(ITERATE_ENTRIES, reverse);\n      var step;\n      var iterations = 0;\n      while (!(step = iterator.next()).done) {\n        iterations++;\n        if (fn(step.value[1], step.value[0], this) === false) {\n          break;\n        }\n      }\n      return iterations;\n      */\n      // indexed:\n      var iterator = this.__iterator(ITERATE_VALUES, reverse);\n      var step;\n      var iterations = 0;\n      while (!(step = iterator.next()).done) {\n        if (fn(step.value, iterations++, this) === false) {\n          break;\n        }\n      }\n      return iterations;\n    };\n    zipSequence.__iteratorUncached = function(type, reverse) {\n      var iterators = iters.map(function(i )\n        {return (i = Iterable(i), getIterator(reverse ? i.reverse() : i))}\n      );\n      var iterations = 0;\n      var isDone = false;\n      return new Iterator(function()  {\n        var steps;\n        if (!isDone) {\n          steps = iterators.map(function(i ) {return i.next()});\n          isDone = steps.some(function(s ) {return s.done});\n        }\n        if (isDone) {\n          return iteratorDone();\n        }\n        return iteratorValue(\n          type,\n          iterations++,\n          zipper.apply(null, steps.map(function(s ) {return s.value}))\n        );\n      });\n    };\n    return zipSequence\n  }\n\n\n  // #pragma Helper Functions\n\n  function reify(iter, seq) {\n    return isSeq(iter) ? seq : iter.constructor(seq);\n  }\n\n  function validateEntry(entry) {\n    if (entry !== Object(entry)) {\n      throw new TypeError('Expected [K, V] tuple: ' + entry);\n    }\n  }\n\n  function resolveSize(iter) {\n    assertNotInfinite(iter.size);\n    return ensureSize(iter);\n  }\n\n  function iterableClass(iterable) {\n    return isKeyed(iterable) ? KeyedIterable :\n      isIndexed(iterable) ? IndexedIterable :\n      SetIterable;\n  }\n\n  function makeSequence(iterable) {\n    return Object.create(\n      (\n        isKeyed(iterable) ? KeyedSeq :\n        isIndexed(iterable) ? IndexedSeq :\n        SetSeq\n      ).prototype\n    );\n  }\n\n  function cacheResultThrough() {\n    if (this._iter.cacheResult) {\n      this._iter.cacheResult();\n      this.size = this._iter.size;\n      return this;\n    } else {\n      return Seq.prototype.cacheResult.call(this);\n    }\n  }\n\n  function defaultComparator(a, b) {\n    return a > b ? 1 : a < b ? -1 : 0;\n  }\n\n  function forceIterator(keyPath) {\n    var iter = getIterator(keyPath);\n    if (!iter) {\n      // Array might not be iterable in this environment, so we need a fallback\n      // to our wrapped type.\n      if (!isArrayLike(keyPath)) {\n        throw new TypeError('Expected iterable or array-like: ' + keyPath);\n      }\n      iter = getIterator(Iterable(keyPath));\n    }\n    return iter;\n  }\n\n  createClass(Record, KeyedCollection);\n\n    function Record(defaultValues, name) {\n      var hasInitialized;\n\n      var RecordType = function Record(values) {\n        if (values instanceof RecordType) {\n          return values;\n        }\n        if (!(this instanceof RecordType)) {\n          return new RecordType(values);\n        }\n        if (!hasInitialized) {\n          hasInitialized = true;\n          var keys = Object.keys(defaultValues);\n          setProps(RecordTypePrototype, keys);\n          RecordTypePrototype.size = keys.length;\n          RecordTypePrototype._name = name;\n          RecordTypePrototype._keys = keys;\n          RecordTypePrototype._defaultValues = defaultValues;\n        }\n        this._map = Map(values);\n      };\n\n      var RecordTypePrototype = RecordType.prototype = Object.create(RecordPrototype);\n      RecordTypePrototype.constructor = RecordType;\n\n      return RecordType;\n    }\n\n    Record.prototype.toString = function() {\n      return this.__toString(recordName(this) + ' {', '}');\n    };\n\n    // @pragma Access\n\n    Record.prototype.has = function(k) {\n      return this._defaultValues.hasOwnProperty(k);\n    };\n\n    Record.prototype.get = function(k, notSetValue) {\n      if (!this.has(k)) {\n        return notSetValue;\n      }\n      var defaultVal = this._defaultValues[k];\n      return this._map ? this._map.get(k, defaultVal) : defaultVal;\n    };\n\n    // @pragma Modification\n\n    Record.prototype.clear = function() {\n      if (this.__ownerID) {\n        this._map && this._map.clear();\n        return this;\n      }\n      var RecordType = this.constructor;\n      return RecordType._empty || (RecordType._empty = makeRecord(this, emptyMap()));\n    };\n\n    Record.prototype.set = function(k, v) {\n      if (!this.has(k)) {\n        throw new Error('Cannot set unknown key \"' + k + '\" on ' + recordName(this));\n      }\n      if (this._map && !this._map.has(k)) {\n        var defaultVal = this._defaultValues[k];\n        if (v === defaultVal) {\n          return this;\n        }\n      }\n      var newMap = this._map && this._map.set(k, v);\n      if (this.__ownerID || newMap === this._map) {\n        return this;\n      }\n      return makeRecord(this, newMap);\n    };\n\n    Record.prototype.remove = function(k) {\n      if (!this.has(k)) {\n        return this;\n      }\n      var newMap = this._map && this._map.remove(k);\n      if (this.__ownerID || newMap === this._map) {\n        return this;\n      }\n      return makeRecord(this, newMap);\n    };\n\n    Record.prototype.wasAltered = function() {\n      return this._map.wasAltered();\n    };\n\n    Record.prototype.__iterator = function(type, reverse) {var this$0 = this;\n      return KeyedIterable(this._defaultValues).map(function(_, k)  {return this$0.get(k)}).__iterator(type, reverse);\n    };\n\n    Record.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return KeyedIterable(this._defaultValues).map(function(_, k)  {return this$0.get(k)}).__iterate(fn, reverse);\n    };\n\n    Record.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map && this._map.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        return this;\n      }\n      return makeRecord(this, newMap, ownerID);\n    };\n\n\n  var RecordPrototype = Record.prototype;\n  RecordPrototype[DELETE] = RecordPrototype.remove;\n  RecordPrototype.deleteIn =\n  RecordPrototype.removeIn = MapPrototype.removeIn;\n  RecordPrototype.merge = MapPrototype.merge;\n  RecordPrototype.mergeWith = MapPrototype.mergeWith;\n  RecordPrototype.mergeIn = MapPrototype.mergeIn;\n  RecordPrototype.mergeDeep = MapPrototype.mergeDeep;\n  RecordPrototype.mergeDeepWith = MapPrototype.mergeDeepWith;\n  RecordPrototype.mergeDeepIn = MapPrototype.mergeDeepIn;\n  RecordPrototype.setIn = MapPrototype.setIn;\n  RecordPrototype.update = MapPrototype.update;\n  RecordPrototype.updateIn = MapPrototype.updateIn;\n  RecordPrototype.withMutations = MapPrototype.withMutations;\n  RecordPrototype.asMutable = MapPrototype.asMutable;\n  RecordPrototype.asImmutable = MapPrototype.asImmutable;\n\n\n  function makeRecord(likeRecord, map, ownerID) {\n    var record = Object.create(Object.getPrototypeOf(likeRecord));\n    record._map = map;\n    record.__ownerID = ownerID;\n    return record;\n  }\n\n  function recordName(record) {\n    return record._name || record.constructor.name || 'Record';\n  }\n\n  function setProps(prototype, names) {\n    try {\n      names.forEach(setProp.bind(undefined, prototype));\n    } catch (error) {\n      // Object.defineProperty failed. Probably IE8.\n    }\n  }\n\n  function setProp(prototype, name) {\n    Object.defineProperty(prototype, name, {\n      get: function() {\n        return this.get(name);\n      },\n      set: function(value) {\n        invariant(this.__ownerID, 'Cannot set on an immutable record.');\n        this.set(name, value);\n      }\n    });\n  }\n\n  createClass(Set, SetCollection);\n\n    // @pragma Construction\n\n    function Set(value) {\n      return value === null || value === undefined ? emptySet() :\n        isSet(value) && !isOrdered(value) ? value :\n        emptySet().withMutations(function(set ) {\n          var iter = SetIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v ) {return set.add(v)});\n        });\n    }\n\n    Set.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    Set.fromKeys = function(value) {\n      return this(KeyedIterable(value).keySeq());\n    };\n\n    Set.prototype.toString = function() {\n      return this.__toString('Set {', '}');\n    };\n\n    // @pragma Access\n\n    Set.prototype.has = function(value) {\n      return this._map.has(value);\n    };\n\n    // @pragma Modification\n\n    Set.prototype.add = function(value) {\n      return updateSet(this, this._map.set(value, true));\n    };\n\n    Set.prototype.remove = function(value) {\n      return updateSet(this, this._map.remove(value));\n    };\n\n    Set.prototype.clear = function() {\n      return updateSet(this, this._map.clear());\n    };\n\n    // @pragma Composition\n\n    Set.prototype.union = function() {var iters = SLICE$0.call(arguments, 0);\n      iters = iters.filter(function(x ) {return x.size !== 0});\n      if (iters.length === 0) {\n        return this;\n      }\n      if (this.size === 0 && !this.__ownerID && iters.length === 1) {\n        return this.constructor(iters[0]);\n      }\n      return this.withMutations(function(set ) {\n        for (var ii = 0; ii < iters.length; ii++) {\n          SetIterable(iters[ii]).forEach(function(value ) {return set.add(value)});\n        }\n      });\n    };\n\n    Set.prototype.intersect = function() {var iters = SLICE$0.call(arguments, 0);\n      if (iters.length === 0) {\n        return this;\n      }\n      iters = iters.map(function(iter ) {return SetIterable(iter)});\n      var originalSet = this;\n      return this.withMutations(function(set ) {\n        originalSet.forEach(function(value ) {\n          if (!iters.every(function(iter ) {return iter.includes(value)})) {\n            set.remove(value);\n          }\n        });\n      });\n    };\n\n    Set.prototype.subtract = function() {var iters = SLICE$0.call(arguments, 0);\n      if (iters.length === 0) {\n        return this;\n      }\n      iters = iters.map(function(iter ) {return SetIterable(iter)});\n      var originalSet = this;\n      return this.withMutations(function(set ) {\n        originalSet.forEach(function(value ) {\n          if (iters.some(function(iter ) {return iter.includes(value)})) {\n            set.remove(value);\n          }\n        });\n      });\n    };\n\n    Set.prototype.merge = function() {\n      return this.union.apply(this, arguments);\n    };\n\n    Set.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return this.union.apply(this, iters);\n    };\n\n    Set.prototype.sort = function(comparator) {\n      // Late binding\n      return OrderedSet(sortFactory(this, comparator));\n    };\n\n    Set.prototype.sortBy = function(mapper, comparator) {\n      // Late binding\n      return OrderedSet(sortFactory(this, comparator, mapper));\n    };\n\n    Set.prototype.wasAltered = function() {\n      return this._map.wasAltered();\n    };\n\n    Set.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._map.__iterate(function(_, k)  {return fn(k, k, this$0)}, reverse);\n    };\n\n    Set.prototype.__iterator = function(type, reverse) {\n      return this._map.map(function(_, k)  {return k}).__iterator(type, reverse);\n    };\n\n    Set.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        return this;\n      }\n      return this.__make(newMap, ownerID);\n    };\n\n\n  function isSet(maybeSet) {\n    return !!(maybeSet && maybeSet[IS_SET_SENTINEL]);\n  }\n\n  Set.isSet = isSet;\n\n  var IS_SET_SENTINEL = '@@__IMMUTABLE_SET__@@';\n\n  var SetPrototype = Set.prototype;\n  SetPrototype[IS_SET_SENTINEL] = true;\n  SetPrototype[DELETE] = SetPrototype.remove;\n  SetPrototype.mergeDeep = SetPrototype.merge;\n  SetPrototype.mergeDeepWith = SetPrototype.mergeWith;\n  SetPrototype.withMutations = MapPrototype.withMutations;\n  SetPrototype.asMutable = MapPrototype.asMutable;\n  SetPrototype.asImmutable = MapPrototype.asImmutable;\n\n  SetPrototype.__empty = emptySet;\n  SetPrototype.__make = makeSet;\n\n  function updateSet(set, newMap) {\n    if (set.__ownerID) {\n      set.size = newMap.size;\n      set._map = newMap;\n      return set;\n    }\n    return newMap === set._map ? set :\n      newMap.size === 0 ? set.__empty() :\n      set.__make(newMap);\n  }\n\n  function makeSet(map, ownerID) {\n    var set = Object.create(SetPrototype);\n    set.size = map ? map.size : 0;\n    set._map = map;\n    set.__ownerID = ownerID;\n    return set;\n  }\n\n  var EMPTY_SET;\n  function emptySet() {\n    return EMPTY_SET || (EMPTY_SET = makeSet(emptyMap()));\n  }\n\n  createClass(OrderedSet, Set);\n\n    // @pragma Construction\n\n    function OrderedSet(value) {\n      return value === null || value === undefined ? emptyOrderedSet() :\n        isOrderedSet(value) ? value :\n        emptyOrderedSet().withMutations(function(set ) {\n          var iter = SetIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v ) {return set.add(v)});\n        });\n    }\n\n    OrderedSet.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    OrderedSet.fromKeys = function(value) {\n      return this(KeyedIterable(value).keySeq());\n    };\n\n    OrderedSet.prototype.toString = function() {\n      return this.__toString('OrderedSet {', '}');\n    };\n\n\n  function isOrderedSet(maybeOrderedSet) {\n    return isSet(maybeOrderedSet) && isOrdered(maybeOrderedSet);\n  }\n\n  OrderedSet.isOrderedSet = isOrderedSet;\n\n  var OrderedSetPrototype = OrderedSet.prototype;\n  OrderedSetPrototype[IS_ORDERED_SENTINEL] = true;\n\n  OrderedSetPrototype.__empty = emptyOrderedSet;\n  OrderedSetPrototype.__make = makeOrderedSet;\n\n  function makeOrderedSet(map, ownerID) {\n    var set = Object.create(OrderedSetPrototype);\n    set.size = map ? map.size : 0;\n    set._map = map;\n    set.__ownerID = ownerID;\n    return set;\n  }\n\n  var EMPTY_ORDERED_SET;\n  function emptyOrderedSet() {\n    return EMPTY_ORDERED_SET || (EMPTY_ORDERED_SET = makeOrderedSet(emptyOrderedMap()));\n  }\n\n  createClass(Stack, IndexedCollection);\n\n    // @pragma Construction\n\n    function Stack(value) {\n      return value === null || value === undefined ? emptyStack() :\n        isStack(value) ? value :\n        emptyStack().unshiftAll(value);\n    }\n\n    Stack.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    Stack.prototype.toString = function() {\n      return this.__toString('Stack [', ']');\n    };\n\n    // @pragma Access\n\n    Stack.prototype.get = function(index, notSetValue) {\n      var head = this._head;\n      index = wrapIndex(this, index);\n      while (head && index--) {\n        head = head.next;\n      }\n      return head ? head.value : notSetValue;\n    };\n\n    Stack.prototype.peek = function() {\n      return this._head && this._head.value;\n    };\n\n    // @pragma Modification\n\n    Stack.prototype.push = function(/*...values*/) {\n      if (arguments.length === 0) {\n        return this;\n      }\n      var newSize = this.size + arguments.length;\n      var head = this._head;\n      for (var ii = arguments.length - 1; ii >= 0; ii--) {\n        head = {\n          value: arguments[ii],\n          next: head\n        };\n      }\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    Stack.prototype.pushAll = function(iter) {\n      iter = IndexedIterable(iter);\n      if (iter.size === 0) {\n        return this;\n      }\n      assertNotInfinite(iter.size);\n      var newSize = this.size;\n      var head = this._head;\n      iter.reverse().forEach(function(value ) {\n        newSize++;\n        head = {\n          value: value,\n          next: head\n        };\n      });\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    Stack.prototype.pop = function() {\n      return this.slice(1);\n    };\n\n    Stack.prototype.unshift = function(/*...values*/) {\n      return this.push.apply(this, arguments);\n    };\n\n    Stack.prototype.unshiftAll = function(iter) {\n      return this.pushAll(iter);\n    };\n\n    Stack.prototype.shift = function() {\n      return this.pop.apply(this, arguments);\n    };\n\n    Stack.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._head = undefined;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyStack();\n    };\n\n    Stack.prototype.slice = function(begin, end) {\n      if (wholeSlice(begin, end, this.size)) {\n        return this;\n      }\n      var resolvedBegin = resolveBegin(begin, this.size);\n      var resolvedEnd = resolveEnd(end, this.size);\n      if (resolvedEnd !== this.size) {\n        // super.slice(begin, end);\n        return IndexedCollection.prototype.slice.call(this, begin, end);\n      }\n      var newSize = this.size - resolvedBegin;\n      var head = this._head;\n      while (resolvedBegin--) {\n        head = head.next;\n      }\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    // @pragma Mutability\n\n    Stack.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this.__altered = false;\n        return this;\n      }\n      return makeStack(this.size, this._head, ownerID, this.__hash);\n    };\n\n    // @pragma Iteration\n\n    Stack.prototype.__iterate = function(fn, reverse) {\n      if (reverse) {\n        return this.reverse().__iterate(fn);\n      }\n      var iterations = 0;\n      var node = this._head;\n      while (node) {\n        if (fn(node.value, iterations++, this) === false) {\n          break;\n        }\n        node = node.next;\n      }\n      return iterations;\n    };\n\n    Stack.prototype.__iterator = function(type, reverse) {\n      if (reverse) {\n        return this.reverse().__iterator(type);\n      }\n      var iterations = 0;\n      var node = this._head;\n      return new Iterator(function()  {\n        if (node) {\n          var value = node.value;\n          node = node.next;\n          return iteratorValue(type, iterations++, value);\n        }\n        return iteratorDone();\n      });\n    };\n\n\n  function isStack(maybeStack) {\n    return !!(maybeStack && maybeStack[IS_STACK_SENTINEL]);\n  }\n\n  Stack.isStack = isStack;\n\n  var IS_STACK_SENTINEL = '@@__IMMUTABLE_STACK__@@';\n\n  var StackPrototype = Stack.prototype;\n  StackPrototype[IS_STACK_SENTINEL] = true;\n  StackPrototype.withMutations = MapPrototype.withMutations;\n  StackPrototype.asMutable = MapPrototype.asMutable;\n  StackPrototype.asImmutable = MapPrototype.asImmutable;\n  StackPrototype.wasAltered = MapPrototype.wasAltered;\n\n\n  function makeStack(size, head, ownerID, hash) {\n    var map = Object.create(StackPrototype);\n    map.size = size;\n    map._head = head;\n    map.__ownerID = ownerID;\n    map.__hash = hash;\n    map.__altered = false;\n    return map;\n  }\n\n  var EMPTY_STACK;\n  function emptyStack() {\n    return EMPTY_STACK || (EMPTY_STACK = makeStack(0));\n  }\n\n  /**\n   * Contributes additional methods to a constructor\n   */\n  function mixin(ctor, methods) {\n    var keyCopier = function(key ) { ctor.prototype[key] = methods[key]; };\n    Object.keys(methods).forEach(keyCopier);\n    Object.getOwnPropertySymbols &&\n      Object.getOwnPropertySymbols(methods).forEach(keyCopier);\n    return ctor;\n  }\n\n  Iterable.Iterator = Iterator;\n\n  mixin(Iterable, {\n\n    // ### Conversion to other types\n\n    toArray: function() {\n      assertNotInfinite(this.size);\n      var array = new Array(this.size || 0);\n      this.valueSeq().__iterate(function(v, i)  { array[i] = v; });\n      return array;\n    },\n\n    toIndexedSeq: function() {\n      return new ToIndexedSequence(this);\n    },\n\n    toJS: function() {\n      return this.toSeq().map(\n        function(value ) {return value && typeof value.toJS === 'function' ? value.toJS() : value}\n      ).__toJS();\n    },\n\n    toJSON: function() {\n      return this.toSeq().map(\n        function(value ) {return value && typeof value.toJSON === 'function' ? value.toJSON() : value}\n      ).__toJS();\n    },\n\n    toKeyedSeq: function() {\n      return new ToKeyedSequence(this, true);\n    },\n\n    toMap: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return Map(this.toKeyedSeq());\n    },\n\n    toObject: function() {\n      assertNotInfinite(this.size);\n      var object = {};\n      this.__iterate(function(v, k)  { object[k] = v; });\n      return object;\n    },\n\n    toOrderedMap: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return OrderedMap(this.toKeyedSeq());\n    },\n\n    toOrderedSet: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return OrderedSet(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toSet: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return Set(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toSetSeq: function() {\n      return new ToSetSequence(this);\n    },\n\n    toSeq: function() {\n      return isIndexed(this) ? this.toIndexedSeq() :\n        isKeyed(this) ? this.toKeyedSeq() :\n        this.toSetSeq();\n    },\n\n    toStack: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return Stack(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toList: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return List(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n\n    // ### Common JavaScript methods and properties\n\n    toString: function() {\n      return '[Iterable]';\n    },\n\n    __toString: function(head, tail) {\n      if (this.size === 0) {\n        return head + tail;\n      }\n      return head + ' ' + this.toSeq().map(this.__toStringMapper).join(', ') + ' ' + tail;\n    },\n\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    concat: function() {var values = SLICE$0.call(arguments, 0);\n      return reify(this, concatFactory(this, values));\n    },\n\n    includes: function(searchValue) {\n      return this.some(function(value ) {return is(value, searchValue)});\n    },\n\n    entries: function() {\n      return this.__iterator(ITERATE_ENTRIES);\n    },\n\n    every: function(predicate, context) {\n      assertNotInfinite(this.size);\n      var returnValue = true;\n      this.__iterate(function(v, k, c)  {\n        if (!predicate.call(context, v, k, c)) {\n          returnValue = false;\n          return false;\n        }\n      });\n      return returnValue;\n    },\n\n    filter: function(predicate, context) {\n      return reify(this, filterFactory(this, predicate, context, true));\n    },\n\n    find: function(predicate, context, notSetValue) {\n      var entry = this.findEntry(predicate, context);\n      return entry ? entry[1] : notSetValue;\n    },\n\n    forEach: function(sideEffect, context) {\n      assertNotInfinite(this.size);\n      return this.__iterate(context ? sideEffect.bind(context) : sideEffect);\n    },\n\n    join: function(separator) {\n      assertNotInfinite(this.size);\n      separator = separator !== undefined ? '' + separator : ',';\n      var joined = '';\n      var isFirst = true;\n      this.__iterate(function(v ) {\n        isFirst ? (isFirst = false) : (joined += separator);\n        joined += v !== null && v !== undefined ? v.toString() : '';\n      });\n      return joined;\n    },\n\n    keys: function() {\n      return this.__iterator(ITERATE_KEYS);\n    },\n\n    map: function(mapper, context) {\n      return reify(this, mapFactory(this, mapper, context));\n    },\n\n    reduce: function(reducer, initialReduction, context) {\n      assertNotInfinite(this.size);\n      var reduction;\n      var useFirst;\n      if (arguments.length < 2) {\n        useFirst = true;\n      } else {\n        reduction = initialReduction;\n      }\n      this.__iterate(function(v, k, c)  {\n        if (useFirst) {\n          useFirst = false;\n          reduction = v;\n        } else {\n          reduction = reducer.call(context, reduction, v, k, c);\n        }\n      });\n      return reduction;\n    },\n\n    reduceRight: function(reducer, initialReduction, context) {\n      var reversed = this.toKeyedSeq().reverse();\n      return reversed.reduce.apply(reversed, arguments);\n    },\n\n    reverse: function() {\n      return reify(this, reverseFactory(this, true));\n    },\n\n    slice: function(begin, end) {\n      return reify(this, sliceFactory(this, begin, end, true));\n    },\n\n    some: function(predicate, context) {\n      return !this.every(not(predicate), context);\n    },\n\n    sort: function(comparator) {\n      return reify(this, sortFactory(this, comparator));\n    },\n\n    values: function() {\n      return this.__iterator(ITERATE_VALUES);\n    },\n\n\n    // ### More sequential methods\n\n    butLast: function() {\n      return this.slice(0, -1);\n    },\n\n    isEmpty: function() {\n      return this.size !== undefined ? this.size === 0 : !this.some(function()  {return true});\n    },\n\n    count: function(predicate, context) {\n      return ensureSize(\n        predicate ? this.toSeq().filter(predicate, context) : this\n      );\n    },\n\n    countBy: function(grouper, context) {\n      return countByFactory(this, grouper, context);\n    },\n\n    equals: function(other) {\n      return deepEqual(this, other);\n    },\n\n    entrySeq: function() {\n      var iterable = this;\n      if (iterable._cache) {\n        // We cache as an entries array, so we can just return the cache!\n        return new ArraySeq(iterable._cache);\n      }\n      var entriesSequence = iterable.toSeq().map(entryMapper).toIndexedSeq();\n      entriesSequence.fromEntrySeq = function()  {return iterable.toSeq()};\n      return entriesSequence;\n    },\n\n    filterNot: function(predicate, context) {\n      return this.filter(not(predicate), context);\n    },\n\n    findEntry: function(predicate, context, notSetValue) {\n      var found = notSetValue;\n      this.__iterate(function(v, k, c)  {\n        if (predicate.call(context, v, k, c)) {\n          found = [k, v];\n          return false;\n        }\n      });\n      return found;\n    },\n\n    findKey: function(predicate, context) {\n      var entry = this.findEntry(predicate, context);\n      return entry && entry[0];\n    },\n\n    findLast: function(predicate, context, notSetValue) {\n      return this.toKeyedSeq().reverse().find(predicate, context, notSetValue);\n    },\n\n    findLastEntry: function(predicate, context, notSetValue) {\n      return this.toKeyedSeq().reverse().findEntry(predicate, context, notSetValue);\n    },\n\n    findLastKey: function(predicate, context) {\n      return this.toKeyedSeq().reverse().findKey(predicate, context);\n    },\n\n    first: function() {\n      return this.find(returnTrue);\n    },\n\n    flatMap: function(mapper, context) {\n      return reify(this, flatMapFactory(this, mapper, context));\n    },\n\n    flatten: function(depth) {\n      return reify(this, flattenFactory(this, depth, true));\n    },\n\n    fromEntrySeq: function() {\n      return new FromEntriesSequence(this);\n    },\n\n    get: function(searchKey, notSetValue) {\n      return this.find(function(_, key)  {return is(key, searchKey)}, undefined, notSetValue);\n    },\n\n    getIn: function(searchKeyPath, notSetValue) {\n      var nested = this;\n      // Note: in an ES6 environment, we would prefer:\n      // for (var key of searchKeyPath) {\n      var iter = forceIterator(searchKeyPath);\n      var step;\n      while (!(step = iter.next()).done) {\n        var key = step.value;\n        nested = nested && nested.get ? nested.get(key, NOT_SET) : NOT_SET;\n        if (nested === NOT_SET) {\n          return notSetValue;\n        }\n      }\n      return nested;\n    },\n\n    groupBy: function(grouper, context) {\n      return groupByFactory(this, grouper, context);\n    },\n\n    has: function(searchKey) {\n      return this.get(searchKey, NOT_SET) !== NOT_SET;\n    },\n\n    hasIn: function(searchKeyPath) {\n      return this.getIn(searchKeyPath, NOT_SET) !== NOT_SET;\n    },\n\n    isSubset: function(iter) {\n      iter = typeof iter.includes === 'function' ? iter : Iterable(iter);\n      return this.every(function(value ) {return iter.includes(value)});\n    },\n\n    isSuperset: function(iter) {\n      iter = typeof iter.isSubset === 'function' ? iter : Iterable(iter);\n      return iter.isSubset(this);\n    },\n\n    keyOf: function(searchValue) {\n      return this.findKey(function(value ) {return is(value, searchValue)});\n    },\n\n    keySeq: function() {\n      return this.toSeq().map(keyMapper).toIndexedSeq();\n    },\n\n    last: function() {\n      return this.toSeq().reverse().first();\n    },\n\n    lastKeyOf: function(searchValue) {\n      return this.toKeyedSeq().reverse().keyOf(searchValue);\n    },\n\n    max: function(comparator) {\n      return maxFactory(this, comparator);\n    },\n\n    maxBy: function(mapper, comparator) {\n      return maxFactory(this, comparator, mapper);\n    },\n\n    min: function(comparator) {\n      return maxFactory(this, comparator ? neg(comparator) : defaultNegComparator);\n    },\n\n    minBy: function(mapper, comparator) {\n      return maxFactory(this, comparator ? neg(comparator) : defaultNegComparator, mapper);\n    },\n\n    rest: function() {\n      return this.slice(1);\n    },\n\n    skip: function(amount) {\n      return this.slice(Math.max(0, amount));\n    },\n\n    skipLast: function(amount) {\n      return reify(this, this.toSeq().reverse().skip(amount).reverse());\n    },\n\n    skipWhile: function(predicate, context) {\n      return reify(this, skipWhileFactory(this, predicate, context, true));\n    },\n\n    skipUntil: function(predicate, context) {\n      return this.skipWhile(not(predicate), context);\n    },\n\n    sortBy: function(mapper, comparator) {\n      return reify(this, sortFactory(this, comparator, mapper));\n    },\n\n    take: function(amount) {\n      return this.slice(0, Math.max(0, amount));\n    },\n\n    takeLast: function(amount) {\n      return reify(this, this.toSeq().reverse().take(amount).reverse());\n    },\n\n    takeWhile: function(predicate, context) {\n      return reify(this, takeWhileFactory(this, predicate, context));\n    },\n\n    takeUntil: function(predicate, context) {\n      return this.takeWhile(not(predicate), context);\n    },\n\n    valueSeq: function() {\n      return this.toIndexedSeq();\n    },\n\n\n    // ### Hashable Object\n\n    hashCode: function() {\n      return this.__hash || (this.__hash = hashIterable(this));\n    }\n\n\n    // ### Internal\n\n    // abstract __iterate(fn, reverse)\n\n    // abstract __iterator(type, reverse)\n  });\n\n  // var IS_ITERABLE_SENTINEL = '@@__IMMUTABLE_ITERABLE__@@';\n  // var IS_KEYED_SENTINEL = '@@__IMMUTABLE_KEYED__@@';\n  // var IS_INDEXED_SENTINEL = '@@__IMMUTABLE_INDEXED__@@';\n  // var IS_ORDERED_SENTINEL = '@@__IMMUTABLE_ORDERED__@@';\n\n  var IterablePrototype = Iterable.prototype;\n  IterablePrototype[IS_ITERABLE_SENTINEL] = true;\n  IterablePrototype[ITERATOR_SYMBOL] = IterablePrototype.values;\n  IterablePrototype.__toJS = IterablePrototype.toArray;\n  IterablePrototype.__toStringMapper = quoteString;\n  IterablePrototype.inspect =\n  IterablePrototype.toSource = function() { return this.toString(); };\n  IterablePrototype.chain = IterablePrototype.flatMap;\n  IterablePrototype.contains = IterablePrototype.includes;\n\n  mixin(KeyedIterable, {\n\n    // ### More sequential methods\n\n    flip: function() {\n      return reify(this, flipFactory(this));\n    },\n\n    mapEntries: function(mapper, context) {var this$0 = this;\n      var iterations = 0;\n      return reify(this,\n        this.toSeq().map(\n          function(v, k)  {return mapper.call(context, [k, v], iterations++, this$0)}\n        ).fromEntrySeq()\n      );\n    },\n\n    mapKeys: function(mapper, context) {var this$0 = this;\n      return reify(this,\n        this.toSeq().flip().map(\n          function(k, v)  {return mapper.call(context, k, v, this$0)}\n        ).flip()\n      );\n    }\n\n  });\n\n  var KeyedIterablePrototype = KeyedIterable.prototype;\n  KeyedIterablePrototype[IS_KEYED_SENTINEL] = true;\n  KeyedIterablePrototype[ITERATOR_SYMBOL] = IterablePrototype.entries;\n  KeyedIterablePrototype.__toJS = IterablePrototype.toObject;\n  KeyedIterablePrototype.__toStringMapper = function(v, k)  {return JSON.stringify(k) + ': ' + quoteString(v)};\n\n\n\n  mixin(IndexedIterable, {\n\n    // ### Conversion to other types\n\n    toKeyedSeq: function() {\n      return new ToKeyedSequence(this, false);\n    },\n\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    filter: function(predicate, context) {\n      return reify(this, filterFactory(this, predicate, context, false));\n    },\n\n    findIndex: function(predicate, context) {\n      var entry = this.findEntry(predicate, context);\n      return entry ? entry[0] : -1;\n    },\n\n    indexOf: function(searchValue) {\n      var key = this.keyOf(searchValue);\n      return key === undefined ? -1 : key;\n    },\n\n    lastIndexOf: function(searchValue) {\n      var key = this.lastKeyOf(searchValue);\n      return key === undefined ? -1 : key;\n    },\n\n    reverse: function() {\n      return reify(this, reverseFactory(this, false));\n    },\n\n    slice: function(begin, end) {\n      return reify(this, sliceFactory(this, begin, end, false));\n    },\n\n    splice: function(index, removeNum /*, ...values*/) {\n      var numArgs = arguments.length;\n      removeNum = Math.max(removeNum | 0, 0);\n      if (numArgs === 0 || (numArgs === 2 && !removeNum)) {\n        return this;\n      }\n      // If index is negative, it should resolve relative to the size of the\n      // collection. However size may be expensive to compute if not cached, so\n      // only call count() if the number is in fact negative.\n      index = resolveBegin(index, index < 0 ? this.count() : this.size);\n      var spliced = this.slice(0, index);\n      return reify(\n        this,\n        numArgs === 1 ?\n          spliced :\n          spliced.concat(arrCopy(arguments, 2), this.slice(index + removeNum))\n      );\n    },\n\n\n    // ### More collection methods\n\n    findLastIndex: function(predicate, context) {\n      var entry = this.findLastEntry(predicate, context);\n      return entry ? entry[0] : -1;\n    },\n\n    first: function() {\n      return this.get(0);\n    },\n\n    flatten: function(depth) {\n      return reify(this, flattenFactory(this, depth, false));\n    },\n\n    get: function(index, notSetValue) {\n      index = wrapIndex(this, index);\n      return (index < 0 || (this.size === Infinity ||\n          (this.size !== undefined && index > this.size))) ?\n        notSetValue :\n        this.find(function(_, key)  {return key === index}, undefined, notSetValue);\n    },\n\n    has: function(index) {\n      index = wrapIndex(this, index);\n      return index >= 0 && (this.size !== undefined ?\n        this.size === Infinity || index < this.size :\n        this.indexOf(index) !== -1\n      );\n    },\n\n    interpose: function(separator) {\n      return reify(this, interposeFactory(this, separator));\n    },\n\n    interleave: function(/*...iterables*/) {\n      var iterables = [this].concat(arrCopy(arguments));\n      var zipped = zipWithFactory(this.toSeq(), IndexedSeq.of, iterables);\n      var interleaved = zipped.flatten(true);\n      if (zipped.size) {\n        interleaved.size = zipped.size * iterables.length;\n      }\n      return reify(this, interleaved);\n    },\n\n    keySeq: function() {\n      return Range(0, this.size);\n    },\n\n    last: function() {\n      return this.get(-1);\n    },\n\n    skipWhile: function(predicate, context) {\n      return reify(this, skipWhileFactory(this, predicate, context, false));\n    },\n\n    zip: function(/*, ...iterables */) {\n      var iterables = [this].concat(arrCopy(arguments));\n      return reify(this, zipWithFactory(this, defaultZipper, iterables));\n    },\n\n    zipWith: function(zipper/*, ...iterables */) {\n      var iterables = arrCopy(arguments);\n      iterables[0] = this;\n      return reify(this, zipWithFactory(this, zipper, iterables));\n    }\n\n  });\n\n  IndexedIterable.prototype[IS_INDEXED_SENTINEL] = true;\n  IndexedIterable.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n\n  mixin(SetIterable, {\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    get: function(value, notSetValue) {\n      return this.has(value) ? value : notSetValue;\n    },\n\n    includes: function(value) {\n      return this.has(value);\n    },\n\n\n    // ### More sequential methods\n\n    keySeq: function() {\n      return this.valueSeq();\n    }\n\n  });\n\n  SetIterable.prototype.has = IterablePrototype.includes;\n  SetIterable.prototype.contains = SetIterable.prototype.includes;\n\n\n  // Mixin subclasses\n\n  mixin(KeyedSeq, KeyedIterable.prototype);\n  mixin(IndexedSeq, IndexedIterable.prototype);\n  mixin(SetSeq, SetIterable.prototype);\n\n  mixin(KeyedCollection, KeyedIterable.prototype);\n  mixin(IndexedCollection, IndexedIterable.prototype);\n  mixin(SetCollection, SetIterable.prototype);\n\n\n  // #pragma Helper functions\n\n  function keyMapper(v, k) {\n    return k;\n  }\n\n  function entryMapper(v, k) {\n    return [k, v];\n  }\n\n  function not(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    }\n  }\n\n  function neg(predicate) {\n    return function() {\n      return -predicate.apply(this, arguments);\n    }\n  }\n\n  function quoteString(value) {\n    return typeof value === 'string' ? JSON.stringify(value) : String(value);\n  }\n\n  function defaultZipper() {\n    return arrCopy(arguments);\n  }\n\n  function defaultNegComparator(a, b) {\n    return a < b ? 1 : a > b ? -1 : 0;\n  }\n\n  function hashIterable(iterable) {\n    if (iterable.size === Infinity) {\n      return 0;\n    }\n    var ordered = isOrdered(iterable);\n    var keyed = isKeyed(iterable);\n    var h = ordered ? 1 : 0;\n    var size = iterable.__iterate(\n      keyed ?\n        ordered ?\n          function(v, k)  { h = 31 * h + hashMerge(hash(v), hash(k)) | 0; } :\n          function(v, k)  { h = h + hashMerge(hash(v), hash(k)) | 0; } :\n        ordered ?\n          function(v ) { h = 31 * h + hash(v) | 0; } :\n          function(v ) { h = h + hash(v) | 0; }\n    );\n    return murmurHashOfSize(size, h);\n  }\n\n  function murmurHashOfSize(size, h) {\n    h = imul(h, 0xCC9E2D51);\n    h = imul(h << 15 | h >>> -15, 0x1B873593);\n    h = imul(h << 13 | h >>> -13, 5);\n    h = (h + 0xE6546B64 | 0) ^ size;\n    h = imul(h ^ h >>> 16, 0x85EBCA6B);\n    h = imul(h ^ h >>> 13, 0xC2B2AE35);\n    h = smi(h ^ h >>> 16);\n    return h;\n  }\n\n  function hashMerge(a, b) {\n    return a ^ b + 0x9E3779B9 + (a << 6) + (a >> 2) | 0; // int\n  }\n\n  var Immutable = {\n\n    Iterable: Iterable,\n\n    Seq: Seq,\n    Collection: Collection,\n    Map: Map,\n    OrderedMap: OrderedMap,\n    List: List,\n    Stack: Stack,\n    Set: Set,\n    OrderedSet: OrderedSet,\n\n    Record: Record,\n    Range: Range,\n    Repeat: Repeat,\n\n    is: is,\n    fromJS: fromJS\n\n  };\n\n  return Immutable;\n\n}));","/** A function that accepts a potential \"extra argument\" value to be injected later,\r\n * and returns an instance of the thunk middleware that uses that value\r\n */\nfunction createThunkMiddleware(extraArgument) {\n  // Standard Redux middleware definition pattern:\n  // See: https://redux.js.org/tutorials/fundamentals/part-4-store#writing-custom-middleware\n  var middleware = function middleware(_ref) {\n    var dispatch = _ref.dispatch,\n        getState = _ref.getState;\n    return function (next) {\n      return function (action) {\n        // The thunk middleware looks for any functions that were passed to `store.dispatch`.\n        // If this \"action\" is really a function, call it and return the result.\n        if (typeof action === 'function') {\n          // Inject the store's `dispatch` and `getState` methods, as well as any \"extra arg\"\n          return action(dispatch, getState, extraArgument);\n        } // Otherwise, pass the action down the middleware chain as usual\n\n\n        return next(action);\n      };\n    };\n  };\n\n  return middleware;\n}\n\nvar thunk = createThunkMiddleware(); // Attach the factory function so users can create a customized version\n// with whatever \"extra arg\" they want to inject into their thunks\n\nthunk.withExtraArgument = createThunkMiddleware;\nexport default thunk;","import ApplicationStateStorage from './application_state_storage';\nimport reducer from './reducers';\n\nimport { globalState } from './globalState'\n\nconst reduxPersistMiddleware = store => next => action => {\n    const state = store.getState();\n    const nextState = reducer(state, action);\n\n    // Save the state to Extension Storage API after every dispatch\n    // We don't need to trigger save for 'SET_KEY_WITH_DATA' actions because it's in the loading behavior\n    // globalState..isDataLoadedFromStorage is used to prevent saving data before it is loaded\n    if (globalState.isDataLoadedFromStorage && action.type && action.type !== 'SET_KEY_WITH_DATA') {\n        ApplicationStateStorage.saveAll(nextState.data).then(() => {\n            //console.log('Saved data to storage, triggered by action: ' + action.type);\n        });\n    }\n\n    next(action);\n}\n\nexport default reduxPersistMiddleware;\n","import {ICHIBA_DOMAINS} from '../../../utilities/src/pickup_const'\r\nimport {BANNER_DISABLED_TIMER, BANNER_DISABLE_OPTION} from '../../../utilities/src/setting_config';\r\nimport IchibaDataBackend from './ichiba_data_backend';\r\nimport Pickup  from '../factory/pickup'\r\nimport {PICKUP_CLASS_NAME} from '../../../utilities/src/pickup_const'\r\n\r\nexport default class IchibaPickup extends Pickup {\r\n    constructor(_domain_details) {\r\n        super(_domain_details);\r\n        this.ichiba_data_backend = new IchibaDataBackend();\r\n        this.pickup_name = PICKUP_CLASS_NAME.ICHIBA_PICKUP;\r\n    }\r\n\r\n    //using default implementation\r\n    //init(_port, _store) { }\r\n\r\n    is_pickup_enabled() {\r\n        let _extension_settings = this.store.getState().data.ExtensionSetting;\r\n        // Check the setting is ON.\r\n        let _is_this_domain_target = true;\r\n        switch (_extension_settings.BannerDisableOption) {\r\n            case BANNER_DISABLE_OPTION.NO_USE:\r\n                _is_this_domain_target = false;\r\n                break;\r\n            case BANNER_DISABLE_OPTION.BANNER_DISABLE_SEARCH: //Search Only. Ichiba Produt Pickup is type Shop\r\n                break;\r\n            case BANNER_DISABLE_OPTION.BANNER_DISABLE_ALL: //Search and Shop\r\n                _is_this_domain_target =  !this.check_disabled_timer_active(_extension_settings)\r\n                break;\r\n            default:\r\n                //case BANNER_DISABLE_OPTION.BANNER_POPUP_USE:\r\n                break;\r\n        }\r\n\r\n        return _is_this_domain_target;\r\n    }\r\n\r\n    async get_data(_page_url) {\r\n        if(this.store.getState().data.abTestSettings) {\r\n            const abTestSettings = JSON.parse(this.store.getState().data.abTestSettings);\r\n            if (abTestSettings.isPickupGo == \"1\") {\r\n                let _data = await this.fetch_pickup_data(_page_url);\r\n                if(_data != null) {\r\n                    _data.matched_domain_details = ICHIBA_DOMAINS.AMAZON_SHOPPING_PICKUP;\r\n                    return _data;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    //using default implementation\r\n    //show_pickup_bar() { }\r\n\r\n    //non super functions\r\n    async fetch_pickup_data(_page_url) {\r\n        // Ask server API if the page has a product in it. Show the bar if so.\r\n        let responseProduct = await this.ichiba_data_backend.fetchProduct(_page_url);\r\n        let responseSPU = await this.ichiba_data_backend.fetchSPU();\r\n        if (responseProduct.status === 'SUCCESS' && responseProduct.product &&\r\n            responseSPU.status === 'SUCCESS' && responseSPU.response) {\r\n            const _data = {\r\n                \"product\": responseProduct.product,\r\n                \"spu\": responseSPU.response,\r\n                \"scid\": this.domain_details.scid\r\n            };\r\n            return _data;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    check_disabled_timer_active(_extension_settings) {\r\n        if(_extension_settings.PickupDisabledTimerSelectedOption === BANNER_DISABLED_TIMER.DISABLE_COMPLETELY) {\r\n            return true;\r\n        }\r\n        //Disabled time option exists and current time is less than diabled time.\r\n        else if (this.store.getState().data.pickup_banner_disabled_time != undefined &&\r\n            this.store.getState().data.pickup_banner_disabled_time != 0 &&\r\n            (new Date()).getTime() <= this.store.getState().data.pickup_banner_disabled_time) {\r\n            return true;\r\n        } else {\r\n            //this is to take care of cases when user changes time manually.\r\n            //This will trigger settings watcher which will reset all other things.\r\n            return false;\r\n        }\r\n    }\r\n}","import { store} from '../background_data_store';\nimport { PICKUP_BAR_PRODUCT_BASE_URL,\n        PICKUP_BAR_SPU_URL\n    } from '../../../utilities/src/pickup_const';\nimport DataBackend from '../factory/data_backend'\nexport default class IchibaDataBackend extends DataBackend {\n\n    constructor() {\n        super();\n    }\n\n    //Using default implementation\n    //async _fetchServerJson(_url) { }\n\n    async fetchProduct(_page_url) {\n        const _url = PICKUP_BAR_PRODUCT_BASE_URL +\n            \"?tuid=\" + store.getState().data.tbuid +\n            \"&tool_id=1\" +\n            \"&version=\" + platform_api_root.runtime.getManifest().version +\n            \"&target_url=\" + _page_url;\n        const _product = await this._fetchServerJson(_url);\n        return _product;\n    }\n\n    async fetchSPU() {\n        return await this._fetchServerJson(PICKUP_BAR_SPU_URL);\n    }\n}","import { YAHOO_AJAX_DOMAINS } from '../../../utilities/src/ajax_handler_const'\r\nimport CouponYahooAjaxPickup from '../coupon/coupon_yahoo_ajax_pickup';\r\n\r\nexport default class AjaxPickupFactory {\r\n    getAjaxPickupInstance(_page_url) {\r\n        let _domain_details = this.isYahooAjaxPickup(_page_url);\r\n        if(_domain_details !== null) {\r\n            return new CouponYahooAjaxPickup(_domain_details);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    isYahooAjaxPickup(_page_url) {\r\n        for (let _domain in YAHOO_AJAX_DOMAINS) {\r\n            let _domain_details = YAHOO_AJAX_DOMAINS[_domain];\r\n            if(_page_url.search(_domain_details.domain_pattern) !== -1){\r\n                return _domain_details;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n}","export const YAHOO_AJAX_DOMAINS = {\r\n    YAHOO_SEARCH:    {\r\n        \"domain_code\":1,\r\n        \"domain_pattern\":/^https?:\\/\\/(www\\.)?shopping\\.yahoo(\\.[a-z]+){1,2}\\/searchbff\\/pc\\/search\\/search.*&p=*.*/\r\n        }\r\n    }","import { COUPON_DOMAINS, PICKUP_COUPON_TYPE, PICKUP_COUPON_PAGE_TYPE } from '../../../utilities/src/pickup_const'\r\nimport {BANNER_DISABLED_TIMER, BANNER_DISABLE_OPTION} from '../../../utilities/src/setting_config';\r\nimport CouponDataBackend from \"./coupon_data_backend\";\r\nimport AjaxPickup from '../factory/ajax_pickup'\r\nimport {PICKUP_CLASS_NAME} from '../../../utilities/src/pickup_const'\r\n\r\nexport default class CouponYahooAjaxPickup extends AjaxPickup {\r\n    constructor(_domain_details) {\r\n        super(_domain_details);\r\n        this.domain_details = COUPON_DOMAINS.YAHOO_SHOPPING;\r\n        this.ajax_coupon_data_backend = new CouponDataBackend();\r\n        this.pickup_name = PICKUP_CLASS_NAME.COUPON_YAHOO_AJAX_PICKUP;\r\n    }\r\n\r\n    //using default implementation\r\n    //init(_store, _request_details) { }\r\n\r\n    is_ajax_pickup_enabled() {\r\n        let _extension_settings = this.store.getState().data.ExtensionSetting;\r\n        // Check the setting is ON.\r\n        const _page_type = this.domain_details.page_type;\r\n        let _is_this_domain_target = true;\r\n        switch (_extension_settings.BannerDisableOption) {\r\n            case BANNER_DISABLE_OPTION.NO_USE:\r\n                _is_this_domain_target = false;\r\n                break;\r\n            case BANNER_DISABLE_OPTION.BANNER_DISABLE_SEARCH: //Search Only\r\n                if(_page_type === PICKUP_COUPON_PAGE_TYPE.SEARCH) {\r\n                    _is_this_domain_target =  !this.check_disabled_timer_active(_extension_settings)\r\n                }\r\n                break;\r\n            case BANNER_DISABLE_OPTION.BANNER_DISABLE_ALL: //Search and Shop\r\n                _is_this_domain_target =  !this.check_disabled_timer_active(_extension_settings)\r\n                break;\r\n            default:\r\n                //case BANNER_DISABLE_OPTION.BANNER_POPUP_USE:\r\n                break;\r\n        }\r\n        return _is_this_domain_target;\r\n    }\r\n\r\n    //using default implementation.no need for get_data as this is send service\r\n    async get_data(_page_url) {\r\n        if(this.store.getState().data.abTestSettings) {\r\n            const abTestSettings = JSON.parse(this.store.getState().data.abTestSettings);\r\n            if ((\r\n                (this.domain_details.page_type == PICKUP_COUPON_PAGE_TYPE.SEARCH && abTestSettings.isSearchSERPPageGo == \"1\") ||\r\n                (this.domain_details.page_type == PICKUP_COUPON_PAGE_TYPE.SHOP)\r\n            )\r\n            && abTestSettings.isCouponGo == \"1\"\r\n            ) {\r\n                let _data = await this.fetch_coupon_data(_page_url);\r\n                if(_data != null) {\r\n                    _data.matched_domain_details = this.domain_details;\r\n                    return _data;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    //using default implementation\r\n    //reset() {}\r\n\r\n    show_pickup_bar() {\r\n       this.get_data(this.request_details.url).then((_data) => {\r\n            platform_api_root.tabs.get(this.request_details.tabId, tab_info => {\r\n                if (platform_api_root.runtime.lastError) {\r\n                    //Tab has closed\r\n                    return;\r\n                }\r\n                if (tab_info) {\r\n                    platform_api_root.tabs.sendMessage(this.request_details.tabId, {\r\n                        pickup_type: this.pickup_name,\r\n                        pickup_data: _data\r\n                    }, null);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    //Non-super functions\r\n    async fetch_coupon_data(_page_url) {\r\n        let responseCoupon = await this.ajax_coupon_data_backend.fetchCouponInfo(_page_url, this.domain_details.keyword);\r\n           if (responseCoupon && responseCoupon.status === 'ok' && responseCoupon.items.length > 0) {\r\n            const _data = {\r\n                \"items\": responseCoupon.items,\r\n                \"keyword\": this.store.getState().data.coupon_keyword,\r\n                \"coupon_type\": PICKUP_COUPON_TYPE.COUPON_ADVANCE,\r\n                \"scid\": this.domain_details.scid,\r\n                \"google_analytics_display\": this.domain_details.google_analytics_code_display_ca,\r\n                \"google_analytics_click\": this.domain_details.google_analytics_code_click_ca\r\n            };\r\n            return _data;\r\n        }\r\n        else {\r\n            let responseCouponRPP = await this.ajax_coupon_data_backend.fetchCouponRPPInfo(_page_url, this.domain_details.keyword);\r\n            if (responseCouponRPP && responseCouponRPP.adList.length > 0) {\r\n                const _data = {\r\n                    \"items\": responseCouponRPP.adList,\r\n                    \"keyword\": this.store.getState().data.coupon_keyword,\r\n                    \"coupon_type\": PICKUP_COUPON_TYPE.RPP,\r\n                    \"scid\": this.domain_details.scid,\r\n                    \"google_analytics_display\": this.domain_details.google_analytics_code_display_rpp,\r\n                    \"google_analytics_click\": this.domain_details.google_analytics_code_click_rpp\r\n                };\r\n                return _data;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    check_disabled_timer_active(_extension_settings) {\r\n        if(_extension_settings.PickupDisabledTimerSelectedOption === BANNER_DISABLED_TIMER.DISABLE_COMPLETELY) {\r\n            return true;\r\n        }\r\n        //Disabled time option exists and current time is less than diabled time.\r\n        else if (this.store.getState().data.pickup_banner_disabled_time != undefined &&\r\n            this.store.getState().data.pickup_banner_disabled_time != 0 &&\r\n            (new Date()).getTime() <= this.store.getState().data.pickup_banner_disabled_time) {\r\n            return true;\r\n        } else {\r\n            //this is to take care of cases when user changes time manually.\r\n            //This will trigger settings watcher which will reset all other things.\r\n            return false;\r\n        }\r\n    }\r\n}","export default class AjaxPickup {\r\n    constructor(_domain_details) {\r\n        this.domain_details = _domain_details;\r\n    }\r\n\r\n    init(_store, _request_details) {\r\n        this.store = _store;\r\n        this.request_details = _request_details;\r\n    }\r\n\r\n    is_ajax_pickup_enabled() {\r\n        return false;\r\n    }\r\n\r\n    async get_data(_url) {\r\n        return null;\r\n    }\r\n\r\n    reset() {\r\n        //to be called when a new page is being processed\r\n        //be default it does nothing\r\n        //it could be used to reset settings or state of program\r\n        //to a default state if required\r\n    }\r\n\r\n    show_pickup_bar() {\r\n        //Act on the event\r\n    }\r\n}","'use strict'\nvar getValue = require('object-path').get\n\nfunction defaultCompare (a, b) {\n  return a === b\n}\n\nfunction watch (getState, objectPath, compare) {\n  compare = compare || defaultCompare\n  var currentValue = getValue(getState(), objectPath)\n  return function w (fn) {\n    return function () {\n      var newValue = getValue(getState(), objectPath)\n      if (!compare(currentValue, newValue)) {\n        var oldValue = currentValue\n        currentValue = newValue\n        fn(newValue, oldValue, objectPath)\n      }\n    }\n  }\n}\n\nmodule.exports = watch\n","(function (root, factory) {\n  'use strict'\n\n  /*istanbul ignore next:cant test*/\n  if (typeof module === 'object' && typeof module.exports === 'object') {\n    module.exports = factory()\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], factory)\n  } else {\n    // Browser globals\n    root.objectPath = factory()\n  }\n})(this, function () {\n  'use strict'\n\n  var toStr = Object.prototype.toString\n\n  function hasOwnProperty (obj, prop) {\n    if (obj == null) {\n      return false\n    }\n    //to handle objects with null prototypes (too edge case?)\n    return Object.prototype.hasOwnProperty.call(obj, prop)\n  }\n\n  function isEmpty (value) {\n    if (!value) {\n      return true\n    }\n    if (isArray(value) && value.length === 0) {\n      return true\n    } else if (typeof value !== 'string') {\n      for (var i in value) {\n        if (hasOwnProperty(value, i)) {\n          return false\n        }\n      }\n      return true\n    }\n    return false\n  }\n\n  function toString (type) {\n    return toStr.call(type)\n  }\n\n  function isObject (obj) {\n    return typeof obj === 'object' && toString(obj) === '[object Object]'\n  }\n\n  var isArray = Array.isArray || function (obj) {\n    /*istanbul ignore next:cant test*/\n    return toStr.call(obj) === '[object Array]'\n  }\n\n  function isBoolean (obj) {\n    return typeof obj === 'boolean' || toString(obj) === '[object Boolean]'\n  }\n\n  function getKey (key) {\n    var intKey = parseInt(key)\n    if (intKey.toString() === key) {\n      return intKey\n    }\n    return key\n  }\n\n  function factory (options) {\n    options = options || {}\n\n    var objectPath = function (obj) {\n      return Object.keys(objectPath).reduce(function (proxy, prop) {\n        if (prop === 'create') {\n          return proxy\n        }\n\n        /*istanbul ignore else*/\n        if (typeof objectPath[prop] === 'function') {\n          proxy[prop] = objectPath[prop].bind(objectPath, obj)\n        }\n\n        return proxy\n      }, {})\n    }\n\n    var hasShallowProperty\n    if (options.includeInheritedProps) {\n      hasShallowProperty = function () {\n        return true\n      }\n    } else {\n      hasShallowProperty = function (obj, prop) {\n        return (typeof prop === 'number' && Array.isArray(obj)) || hasOwnProperty(obj, prop)\n      }\n    }\n\n    function getShallowProperty (obj, prop) {\n      if (hasShallowProperty(obj, prop)) {\n        return obj[prop]\n      }\n    }\n\n    var getShallowPropertySafely\n    if (options.includeInheritedProps) {\n      getShallowPropertySafely = function (obj, currentPath) {\n        if (typeof currentPath !== 'string' && typeof currentPath !== 'number') {\n          currentPath = String(currentPath)\n        }\n        var currentValue = getShallowProperty(obj, currentPath)\n        if (currentPath === '__proto__' || currentPath === 'prototype' ||\n          (currentPath === 'constructor' && typeof currentValue === 'function')) {\n          throw new Error('For security reasons, object\\'s magic properties cannot be set')\n        }\n        return currentValue\n      }\n    } else {\n      getShallowPropertySafely = function (obj, currentPath) {\n        return getShallowProperty(obj, currentPath)\n      }\n    }\n\n    function set (obj, path, value, doNotReplace) {\n      if (typeof path === 'number') {\n        path = [path]\n      }\n      if (!path || path.length === 0) {\n        return obj\n      }\n      if (typeof path === 'string') {\n        return set(obj, path.split('.').map(getKey), value, doNotReplace)\n      }\n      var currentPath = path[0]\n      var currentValue = getShallowPropertySafely(obj, currentPath)\n      if (path.length === 1) {\n        if (currentValue === void 0 || !doNotReplace) {\n          obj[currentPath] = value\n        }\n        return currentValue\n      }\n\n      if (currentValue === void 0) {\n        //check if we assume an array\n        if (typeof path[1] === 'number') {\n          obj[currentPath] = []\n        } else {\n          obj[currentPath] = {}\n        }\n      }\n\n      return set(obj[currentPath], path.slice(1), value, doNotReplace)\n    }\n\n    objectPath.has = function (obj, path) {\n      if (typeof path === 'number') {\n        path = [path]\n      } else if (typeof path === 'string') {\n        path = path.split('.')\n      }\n\n      if (!path || path.length === 0) {\n        return !!obj\n      }\n\n      for (var i = 0; i < path.length; i++) {\n        var j = getKey(path[i])\n\n        if ((typeof j === 'number' && isArray(obj) && j < obj.length) ||\n          (options.includeInheritedProps ? (j in Object(obj)) : hasOwnProperty(obj, j))) {\n          obj = obj[j]\n        } else {\n          return false\n        }\n      }\n\n      return true\n    }\n\n    objectPath.ensureExists = function (obj, path, value) {\n      return set(obj, path, value, true)\n    }\n\n    objectPath.set = function (obj, path, value, doNotReplace) {\n      return set(obj, path, value, doNotReplace)\n    }\n\n    objectPath.insert = function (obj, path, value, at) {\n      var arr = objectPath.get(obj, path)\n      at = ~~at\n      if (!isArray(arr)) {\n        arr = []\n        objectPath.set(obj, path, arr)\n      }\n      arr.splice(at, 0, value)\n    }\n\n    objectPath.empty = function (obj, path) {\n      if (isEmpty(path)) {\n        return void 0\n      }\n      if (obj == null) {\n        return void 0\n      }\n\n      var value, i\n      if (!(value = objectPath.get(obj, path))) {\n        return void 0\n      }\n\n      if (typeof value === 'string') {\n        return objectPath.set(obj, path, '')\n      } else if (isBoolean(value)) {\n        return objectPath.set(obj, path, false)\n      } else if (typeof value === 'number') {\n        return objectPath.set(obj, path, 0)\n      } else if (isArray(value)) {\n        value.length = 0\n      } else if (isObject(value)) {\n        for (i in value) {\n          if (hasShallowProperty(value, i)) {\n            delete value[i]\n          }\n        }\n      } else {\n        return objectPath.set(obj, path, null)\n      }\n    }\n\n    objectPath.push = function (obj, path /*, values */) {\n      var arr = objectPath.get(obj, path)\n      if (!isArray(arr)) {\n        arr = []\n        objectPath.set(obj, path, arr)\n      }\n\n      arr.push.apply(arr, Array.prototype.slice.call(arguments, 2))\n    }\n\n    objectPath.coalesce = function (obj, paths, defaultValue) {\n      var value\n\n      for (var i = 0, len = paths.length; i < len; i++) {\n        if ((value = objectPath.get(obj, paths[i])) !== void 0) {\n          return value\n        }\n      }\n\n      return defaultValue\n    }\n\n    objectPath.get = function (obj, path, defaultValue) {\n      if (typeof path === 'number') {\n        path = [path]\n      }\n      if (!path || path.length === 0) {\n        return obj\n      }\n      if (obj == null) {\n        return defaultValue\n      }\n      if (typeof path === 'string') {\n        return objectPath.get(obj, path.split('.'), defaultValue)\n      }\n\n      var currentPath = getKey(path[0])\n      var nextObj = getShallowPropertySafely(obj, currentPath)\n      if (nextObj === void 0) {\n        return defaultValue\n      }\n\n      if (path.length === 1) {\n        return nextObj\n      }\n\n      return objectPath.get(obj[currentPath], path.slice(1), defaultValue)\n    }\n\n    objectPath.del = function del (obj, path) {\n      if (typeof path === 'number') {\n        path = [path]\n      }\n\n      if (obj == null) {\n        return obj\n      }\n\n      if (isEmpty(path)) {\n        return obj\n      }\n      if (typeof path === 'string') {\n        return objectPath.del(obj, path.split('.'))\n      }\n\n      var currentPath = getKey(path[0])\n      getShallowPropertySafely(obj, currentPath)\n      if (!hasShallowProperty(obj, currentPath)) {\n        return obj\n      }\n\n      if (path.length === 1) {\n        if (isArray(obj)) {\n          obj.splice(currentPath, 1)\n        } else {\n          delete obj[currentPath]\n        }\n      } else {\n        return objectPath.del(obj[currentPath], path.slice(1))\n      }\n\n      return obj\n    }\n\n    return objectPath\n  }\n\n  var mod = factory()\n  mod.create = factory\n  mod.withInheritedProps = factory({includeInheritedProps: true})\n  return mod\n})\n","import {DEFAULT_DOMAIN_ENTITIES_URL, CAMPAIGN_INFO_URL, COUPON_STORE_INFO_URL, REBATES_DOMAIN_FULL_ADDRESS, AFFILIATE_LINKS_URL,\r\n    REBATES_WORKFLOW_STATE, REBATES_MATCH_PATTERN, RAKUTEN_LOGIN_PATTERN, RAKUTEN_LOGIN_PATTERN_OMNI,\r\n    RebatesInfo, REBATES_TOOLBAR_CAMPAIGN_URL,\r\n    REBATES_CAMPAIGN_HOVER_EXPIRATION_TIME_LIMIT, REBATES_CAMPAIGN_HOVER_VISIBILITY_COUNT,\r\n    isActivatedPageAlreadyExpired, MEMBER_DETAILS_URL, REBATES_MEMBER_DETAILS_INTERVAL, REBATE_ADDITIONAL_DISCOUNT_TARGET_INFO\r\n} from '../../../utilities/src/rebates_const';\r\nimport {BANNER_DISABLE_OPTION, CONST_RAKUTEN_WEBSEARCH} from '../../../utilities/src/setting_config';\r\nimport {findMatchPattern, sendMessageByPort} from '../../../utilities/src/common_helper';\r\n/**\r\n* Class that represents the domain entity details for cashback\r\n*/\r\nexport class DomainEntities {\r\nconstructor() {\r\n    this.shoppingURL = '';\r\n    this.activationCode = 0;\r\n    this.domainMatchPatterns = '';\r\n    this.cashBackText = '';\r\n    this.fixedCashBack = true;\r\n    this.urlName = '';\r\n}\r\n\r\ngetShoppingURL() {\r\n    return this.shoppingURL;\r\n}\r\n\r\ngetActivationCode() {\r\n    return this.activationCode;\r\n}\r\n\r\ngetMatchPattern() {\r\n    return this.domainMatchPatterns;\r\n}\r\n\r\ngetCashBackText() {\r\n    return this.cashBackText;\r\n}\r\n\r\ngetFixedCashBack() {\r\n    return this.fixedCashBack;\r\n}\r\n\r\ngetUrlName() {\r\n    return this.urlName;\r\n}\r\n}\r\n\r\n/**Parent class which contains all the info related to Rebates campaign */\r\nexport class CampaignList{\r\nconstructor(){\r\n    this.campaignId=0,\r\n    this.campaignLink = '';\r\n    this.campaignName = '';\r\n    this.campaignType = '';\r\n    this.campaignStartDate = new Date();\r\n    this.campaignCoupons = [];\r\n    this.couponStores = [];\r\n}\r\n\r\n}\r\n\r\n/**Class contianing information on coupons listed for campaign */\r\nexport class CampaignCoupon{\r\nconstructor(){\r\n    this.description='';\r\n    this.expires='';\r\n    this.id=0;\r\n    this.postedDate=new Date();\r\n    this.storeId=0;\r\n    this.featured=false;\r\n    this.type = '';\r\n    this.typeId = 0;\r\n}\r\n}\r\n\r\n/**Class containing information on store which provides campaign coupon */\r\nexport class CouponStore{\r\nconstructor(){\r\n    this.storeName = '';\r\n    this.jp_ktn_storeName = '';\r\n    this.jp_hgn_storeName = '';\r\n    this.smallLogo = '';\r\n    this.cashBackText ='';\r\n    this.description = '';\r\n    this.id = 0;\r\n    this.urlName = '';\r\n    this.cashBack = 0;\r\n    this.isFixedCashBack = true;\r\n}\r\n}\r\n\r\nexport class RebatesHoverImages{\r\nconstructor(){\r\n    this.inactivated_image='';\r\n    this.activated_image='';\r\n}\r\n}\r\n\r\nexport class RebatesHoverStatus{\r\nconstructor(){\r\n    this.is_ready_show_up = false;\r\n    this.is_activated = false;\r\n}\r\n}\r\n\r\nexport class RebatesToolbarCampaign{\r\n//this class should not be apart of rebates constants\r\nconstructor(){\r\n    this.imageUri='';\r\n    this.linkUrl='';\r\n    this.pointsBackBgImage='';\r\n    this.forwardUrl = '';\r\n    this.campaignInfo = '';\r\n    this.campaignSummary = '';\r\n}\r\nsetImageUri(image){\r\n    this.imageUri = image;\r\n}\r\nsetLinkUrl(link){\r\n    this.linkUrl = link;\r\n}\r\nsetPointsBackBgImage(pointsBackBgImage){\r\n    this.pointsBackBgImage = pointsBackBgImage;\r\n}\r\n}\r\n\r\n\r\nexport default class Rebates {\r\nconstructor() {\r\n    this.domainentities = [];\r\n    this.campaignList = {};\r\n    this.metaData = \"\";\r\n    this.rzCookie = \"\";\r\n    this.affiliateLinks = [];\r\n    this.paidLinkPatterns = [];\r\n    this.domainListURL = DEFAULT_DOMAIN_ENTITIES_URL;\r\n}\r\n\r\nasync initRebatesConfig(_store) {\r\n    await this.fetchMetaTag(_store).then((result) => {\r\n        if (result) {\r\n            this.metaData = result;\r\n        }\r\n    });\r\n    this.getRebatesAdditionalDiscountTargetInfo(_store).then(result => {\r\n        this.getMerchantDomainEntities(_store, result);\r\n    });\r\n    await this.getAffiliateLinksList();\r\n}\r\n\r\nasync init(_store){\r\n    this.initRebatesConfig(_store);\r\n    _store.dispatch({type: 'SET_REBATES_WORKFLOW_STATE', data: {} });\r\n\r\n    platform_api_root.alarms.create(\"DomainEntityInterval\", {\r\n        periodInMinutes: 15\r\n    });\r\n    platform_api_root.alarms.onAlarm.addListener((alarm) => {\r\n        if (alarm.name === \"DomainEntityInterval\") {\r\n            this.getRebatesAdditionalDiscountTargetInfo(_store).then(result => {\r\n                this.getMerchantDomainEntities(_store, result);\r\n            });\r\n        }\r\n    });\r\n\r\n    // Updated Every 24 Hours\r\n    platform_api_root.alarms.create(\"RebatesAffiliateLinksInterval\", {\r\n        periodInMinutes: 1440\r\n    });\r\n    platform_api_root.alarms.onAlarm.addListener((alarm) => {\r\n        if (alarm.name === \"RebatesAffiliateLinksInterval\") {\r\n            this.getAffiliateLinksList();\r\n        }\r\n    });\r\n}\r\n\r\n/**Get currently running Rebates campaign information */\r\nasync getCampaignLists(){\r\n    let response = await fetch(CAMPAIGN_INFO_URL);\r\n    if (response && response.status === 200) {\r\n        let rebatesResponse = await response.json();\r\n        if (rebatesResponse != null && rebatesResponse.campaigns.length > 0) {\r\n            let campaign = new CampaignList();\r\n            let stores = [];\r\n            campaign.campaignId = rebatesResponse.campaigns[0].id,\r\n                campaign.campaignLink = rebatesResponse.campaigns[0].link;\r\n            campaign.campaignName = rebatesResponse.campaigns[0].name;\r\n            campaign.campaignType = rebatesResponse.campaigns[0].type;\r\n            campaign.campaignStartDate = rebatesResponse.campaigns[0].start != null ? new Date(rebatesResponse.campaigns[0].start * 1000) : new Date();\r\n            if (rebatesResponse.campaigns[0].coupons != null && rebatesResponse.campaigns[0].coupons.length > 0) {\r\n                //Get random selection of 3 campaigns out of all the list\r\n                let selectionList = this.getRandomSelection(rebatesResponse.campaigns[0].coupons.length);\r\n                for (let i = 0; i < selectionList.length; i++) {\r\n                    try {\r\n                        let selectedCoupon = new CampaignCoupon();\r\n                        if (selectionList[i] - 1 >= 0) {\r\n                            let sel = selectionList[i] - 1;\r\n                            selectedCoupon.description = rebatesResponse.campaigns[0].coupons[sel].description;\r\n                            selectedCoupon.expires = rebatesResponse.campaigns[0].coupons[sel].expires;\r\n                            selectedCoupon.id = rebatesResponse.campaigns[0].coupons[sel].id;\r\n                            selectedCoupon.postedDate = new Date(rebatesResponse.campaigns[0].coupons[sel].postedDate * 100);\r\n                            selectedCoupon.storeId = rebatesResponse.campaigns[0].coupons[sel].storeId;\r\n                            selectedCoupon.featured = rebatesResponse.campaigns[0].coupons[sel].featured;\r\n                            selectedCoupon.type = rebatesResponse.campaigns[0].coupons[sel].type;\r\n                            selectedCoupon.typeId = rebatesResponse.campaigns[0].coupons[sel].typeId;\r\n                            campaign.campaignCoupons.push(selectedCoupon);\r\n                            stores.push(selectedCoupon.storeId);\r\n                        }\r\n                    }\r\n                    catch (e) {\r\n                        //Ignore and continue loop\r\n                    }\r\n                }\r\n                this.campaignList = campaign;\r\n            }\r\n            if (stores.length > 0) {\r\n                await this.getCouponStoreList(stores);\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\n/**Get store information participating in Rebates campaign */\r\nasync getCouponStoreList(stores){\r\n    let response = await fetch(COUPON_STORE_INFO_URL + stores.toString());\r\n    if (response && response.status === 200) {\r\n        let storeResponse = await response.json();\r\n        if (storeResponse != null && storeResponse.stores.length > 0) {\r\n            for (let i = 0; i < storeResponse.stores.length; i++) {\r\n                try {\r\n                    let storeInfo = new CouponStore();\r\n                    storeInfo.storeName = storeResponse.stores[i].attributes == null ? '' : storeResponse.stores[i].attributes.storeName_en_JP;\r\n                    storeInfo.jp_ktn_storeName = storeResponse.stores[i].attributes == null ? '' : storeResponse.stores[i].attributes.storeName_katakana_JP;\r\n                    storeInfo.jp_hgn_storeName = storeResponse.stores[i].attributes == null ? '' : storeResponse.stores[i].attributes.storeName_hiragana_JP;\r\n                    storeInfo.smallLogo = storeResponse.stores[i].smallLogo;\r\n                    storeInfo.cashBackText = storeResponse.stores[i].cashBackText;\r\n                    storeInfo.description = storeResponse.stores[i].description;\r\n                    storeInfo.id = storeResponse.stores[i].id;\r\n                    storeInfo.urlName = storeResponse.stores[i].urlName;\r\n                    if (storeResponse.stores[i].totalReward != null && storeResponse.stores[i].totalReward.range) {\r\n                        storeInfo.isFixedCashBack = false;\r\n                        storeInfo.cashBack = isNaN(storeResponse.stores[i].totalReward.range.high) ? 0 : storeResponse.stores[i].totalReward.range.high;\r\n                    }\r\n                    else if (storeResponse.stores[i].totalReward != null && storeResponse.stores[i].totalReward.amount) {\r\n                        storeInfo.isFixedCashBack = true;\r\n                        storeInfo.cashBack = isNaN(storeResponse.stores[i].totalReward.amount) ? 0 : storeResponse.stores[i].totalReward.amount;\r\n                    }\r\n                    else {\r\n                        storeInfo.isFixedCashBack = true;\r\n                        storeInfo.cashBack = 0;\r\n                    }\r\n\r\n                    this.campaignList.couponStores.push(storeInfo);\r\n                }\r\n                catch (e) {\r\n                    //In case of error ignore and continue loop\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\ngetDomainEntities() {\r\n    fetch(this.domainListURL)\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n            if (data != undefined) {\r\n                //clean the domain entities only when the API call is success\r\n                this.domainentities = [];\r\n                let rebatesResponse = data;\r\n                let shoppingCount = rebatesResponse.total;\r\n                let domainEntities = rebatesResponse.domains;\r\n                for (let shopper = 0; shopper < shoppingCount; shopper++) {\r\n                    domainEntities[shopper].stores.map(store => {\r\n                        this.rebatesStoresEntry(store);\r\n                    });\r\n                }\r\n            }\r\n        });\r\n}\r\n\r\ngetMerchantDomainEntities(_store, target_info) {\r\n    //when the user update the extension\r\n    //need to check whether this user is a target user or not\r\n    _store.dispatch({\r\n        type: \"SET_REBATE_ADDITIONAL_DISCOUNT_TARGET_INFO\",\r\n        data: target_info\r\n    });\r\n\r\n    if (target_info.is_targeted) {\r\n        this.domainListURL = DEFAULT_DOMAIN_ENTITIES_URL + `&targetSet=${target_info.target_group}`;\r\n    }else{\r\n        this.domainListURL = DEFAULT_DOMAIN_ENTITIES_URL;\r\n    }\r\n\r\n    this.getDomainEntities();\r\n}\r\n\r\n    getRebatesAdditionalDiscountTargetInfo(_store) {\r\n        return new Promise((resolve) => {\r\n            let rebates_additional_discount_target_info = _store.getState().data.rebates_additional_discount_target_info;\r\n            let time_of_now = new Date().getTime();\r\n            platform_api_root.cookies.get({ \"url\": `${CONST_RAKUTEN_WEBSEARCH.defaultUrl}`, \"name\": \"Rz\" }, cookie => {\r\n                if (this.metaData && cookie != undefined) {\r\n                    if (rebates_additional_discount_target_info == undefined ||\r\n                        rebates_additional_discount_target_info.expire_time < time_of_now) {\r\n                        fetch(MEMBER_DETAILS_URL, {\r\n                            headers: {\r\n                                'token': this.metaData\r\n                            }})\r\n                            .then((response) => response.json())\r\n                            .then((data) => {\r\n                                let member_details = data;\r\n                                let rebates_additional_discount_target_info = new REBATE_ADDITIONAL_DISCOUNT_TARGET_INFO();\r\n                                rebates_additional_discount_target_info.expire_time = new Date().getTime() + REBATES_MEMBER_DETAILS_INTERVAL;\r\n                                if (member_details.targetSet) {\r\n                                    rebates_additional_discount_target_info.is_targeted = true;\r\n                                    rebates_additional_discount_target_info.target_group = member_details.targetSet;\r\n                                }\r\n                                resolve(rebates_additional_discount_target_info);\r\n                            });\r\n                    } else {\r\n                        resolve(rebates_additional_discount_target_info);\r\n                    }\r\n                } else {\r\n                    if (rebates_additional_discount_target_info.is_targeted) {\r\n                        rebates_additional_discount_target_info.is_targeted = false;\r\n                        rebates_additional_discount_target_info.target_group = '';\r\n                    }\r\n\r\n                    if (rebates_additional_discount_target_info.expire_time == 0) {\r\n                        rebates_additional_discount_target_info.expire_time = time_of_now + REBATES_MEMBER_DETAILS_INTERVAL;\r\n                    }\r\n                    resolve(rebates_additional_discount_target_info);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\nrebatesLoginStatusChanged(newVal, oldVal, _store) {\r\n    if(newVal == 1 && oldVal == 0){\r\n        if(this.metaData){\r\n            fetch(MEMBER_DETAILS_URL, {\r\n                headers: {\r\n                    'token': this.metaData\r\n                }})\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n                let member_details = data;\r\n                let rebates_additional_discount_target_info = new REBATE_ADDITIONAL_DISCOUNT_TARGET_INFO();\r\n                rebates_additional_discount_target_info.expire_time = new Date().getTime() + REBATES_MEMBER_DETAILS_INTERVAL;\r\n                if (member_details.targetSet) {\r\n                    rebates_additional_discount_target_info.is_targeted = true;\r\n                    rebates_additional_discount_target_info.target_group = member_details.targetSet;\r\n                }\r\n                this.getMerchantDomainEntities(_store, rebates_additional_discount_target_info);\r\n            });\r\n        }else{\r\n            this.getMerchantDomainEntities(_store, new REBATE_ADDITIONAL_DISCOUNT_TARGET_INFO());\r\n        }\r\n    }\r\n\r\n    if (newVal == 0 && oldVal == 1) {//when logout\r\n        this.metaData = '';\r\n        this.domainListURL = DEFAULT_DOMAIN_ENTITIES_URL;\r\n        //clear rebates info\r\n        _store.dispatch({\r\n            type:\"SET_REBATES_INFO\",\r\n            data: new RebatesInfo()\r\n        })\r\n        //clear rebates cookies\r\n        platform_api_root.cookies.remove({\r\n            url: REBATES_DOMAIN_FULL_ADDRESS,\r\n            name: \"euid\"\r\n        });\r\n        platform_api_root.cookies.remove({\r\n            url: REBATES_DOMAIN_FULL_ADDRESS,\r\n            name: \"REQCOLID\"\r\n        });\r\n\r\n        this.getMerchantDomainEntities(_store, new REBATE_ADDITIONAL_DISCOUNT_TARGET_INFO());\r\n    }\r\n}\r\n\r\n/**\r\n * Saves stores to Array\r\n *\r\n *\r\n * @param domainEntities : Json root element\r\n * @param i : domainEntity iterator index\r\n * @param index : store element iterator index\r\n */\r\nrebatesStoresEntry(stores) {\r\n    try {\r\n        let de = new DomainEntities();\r\n        de.shoppingURL = stores.shoppingURL;\r\n        de.domainMatchPatterns = stores.matchPattern;\r\n        de.urlName = stores.urlName===null?'':stores.urlName;\r\n        // As for cashbacktext, we cannot utilize their english text because rebates are for japanese.\r\n        // So I will create text here from total reward.\r\n        // de.cashBackText = domainEntities[i].stores[0].cashBackText;\r\n        let amount = stores.totalReward.amount;\r\n        let display = stores.totalReward.display;\r\n        let reward = stores.reward;\r\n        let percent = 0.00;\r\n\r\n        // If amount is not there and range is there, we need to put range.high as amount, and use max as japanese.\r\n        let max = '';\r\n        if (reward != undefined) {\r\n            if (reward.range != undefined) {\r\n                display = reward.display;\r\n                if (reward.range != undefined &&\r\n                    reward.range.high != undefined) {\r\n                    amount = reward.range.high;\r\n                    max = '最大';\r\n                    de.fixedCashBack = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (display == 'Percentage') {\r\n            percent = (amount * 1000) * 100 / 1000;\r\n        }\r\n        de.cashBackText = max + percent.toString() + '%';\r\n        de.activationCode = stores.activationCode;\r\n        this.domainentities.push(de);\r\n    } catch (e) {\r\n    }\r\n}\r\n\r\nescapeRegExp(text) {\r\n    return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\r\n}\r\n\r\nasync getAffiliateLinksList() {\r\n    let response = await fetch(AFFILIATE_LINKS_URL);\r\n    if (response && response.status === 200) {\r\n        let affiliateResponse = await response.json();\r\n        if (affiliateResponse != null && affiliateResponse.paidLinks.length > 0) {\r\n            let temp_affiliate_links = [];\r\n            for (let i = 0; i < affiliateResponse.paidLinks.length; i++) {\r\n                try {\r\n                    temp_affiliate_links.push(this.escapeRegExp(affiliateResponse.paidLinks[i]));\r\n                }\r\n                catch (e) {\r\n                    //In case of error ignore and continue loop\r\n                }\r\n            }\r\n            //reset the affiliate links only when the API call is success\r\n            this.affiliateLinks = temp_affiliate_links;\r\n            // This is additional regex for paidlinks, and need to use raw regex.\r\n            let temp_affiliate_links_patterns = [];\r\n            if (affiliateResponse.paidLinkPatterns != null) {\r\n                if (affiliateResponse.paidLinkPatterns.length > 0) {\r\n                    for (let i = 0; i < affiliateResponse.paidLinkPatterns.length; i++) {\r\n                        try {\r\n                            temp_affiliate_links_patterns.push(affiliateResponse.paidLinkPatterns[i]);\r\n                        }\r\n                        catch (e) {\r\n                            //In case of error ignore and continue loop\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this.paidLinkPatterns = temp_affiliate_links_patterns;\r\n        }\r\n    }\r\n}\r\n\r\ngenerateRebatesInfo(url) {\r\n    const url_domain = url.split(/[?#]/)[0];\r\n    let rebates_info = new RebatesInfo();\r\n    for (let de of this.domainentities) {\r\n        try {\r\n            if (url_domain.match(de.domainMatchPatterns)) {\r\n                rebates_info.setLink(this.linkGenerator(de));\r\n                rebates_info.setComment(de.cashBackText);\r\n                rebates_info.setDomainRegex(de.domainMatchPatterns);\r\n                rebates_info.setTokenAvailable(this.isTokenExisting());\r\n                rebates_info.setFixedCashBack(de.fixedCashBack);\r\n                rebates_info.setUrlName(de.urlName);\r\n                break;\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n    return rebates_info;\r\n}\r\n\r\nlinkGenerator(de) {\r\n    let link = `${REBATES_DOMAIN_FULL_ADDRESS}/apis/v1${de.shoppingURL}?s=toolbar&interstitial=true&channelId=2&apiautologintoken=${this.metaData}`;\r\n    return link;\r\n}\r\n\r\nasync checkMetaTagIfURLGoesTOPPage(url, rzCookie, _store) {\r\n    const logged_in = (_store.getState().data.login === \"1\");\r\n    if (logged_in == false) { return; }\r\n    let rebates_info = this.generateRebatesInfo(url);\r\n    if (rzCookie == this.rzCookie && this.isTokenExisting()) {\r\n        _store.dispatch({\r\n            type: 'SET_REBATES_INFO',\r\n            data: rebates_info\r\n        });\r\n    } else {\r\n        if (url.indexOf(REBATES_DOMAIN_FULL_ADDRESS) != -1) {\r\n            this.rzCookie = rzCookie;\r\n            if (this.metaData == undefined ||\r\n                this.metaData == \"\") {\r\n                await this.fetchMetaTag(_store).then((result) => {\r\n                    this.metaData = result;\r\n                    _store.dispatch({type: 'SET_REBATES_INFO', data:rebates_info});\r\n                });\r\n            } else {\r\n                _store.dispatch({type: 'SET_REBATES_INFO', data:rebates_info});\r\n            }\r\n        } else {\r\n            _store.dispatch({\r\n                type: 'SET_REBATES_INFO',\r\n                data: rebates_info\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nextractAllText(str){\r\n    const re = /\"(.*?)\"/g;\r\n    const result = [];\r\n    let current = re.exec(str);\r\n    while (current) {\r\n      result.push(current.pop());\r\n      current = re.exec(str);\r\n    }\r\n    return result.length > 0\r\n      ? result\r\n      : [str];\r\n  }\r\n\r\n    async fetchMetaTag(_store){\r\n        return new Promise((resolve) => {\r\n            platform_api_root.cookies.get({ \"url\": `${REBATES_DOMAIN_FULL_ADDRESS}`, \"name\": \"euid\" }, (cookie) => {\r\n                if (cookie != undefined) {\r\n                    this.metaData = cookie.value;\r\n                    resolve(this.metaData);\r\n                } else {\r\n                    resolve();\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\nisTokenExisting() {\r\n    if (this.metaData) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\ngetRandomSelection(upperLimit){\r\n    let indexes = [];\r\n    if(upperLimit!=null && upperLimit != undefined){\r\n        while(indexes.length <3){\r\n            let i = Math.floor((Math.random() * upperLimit) + 1);\r\n            if (indexes.indexOf(i) > -1) {\r\n                continue;\r\n            }\r\n            indexes.push(i);\r\n        }\r\n    }\r\n    return indexes;\r\n}\r\n\r\nfindMatchedRebatesMerchantDomain(_url) {\r\n    let got_pattern_match = false;\r\n    let _domainEntities =  this.domainentities;\r\n    for (let i in _domainEntities) {\r\n        let r = new RegExp(_domainEntities[i].domainMatchPatterns);\r\n        got_pattern_match = r.test(_url);\r\n        if (got_pattern_match){\r\n            break;\r\n        }\r\n    }\r\n    return got_pattern_match;\r\n}\r\n\r\nmayShowRebatesPopUp(_tabId, _store){\r\n    const currentWorkflowState = _store.getState().data.rebates_workflowState;\r\n    const currentWorkflowStateForTab = (currentWorkflowState && currentWorkflowState[_tabId])?currentWorkflowState[_tabId]:REBATES_WORKFLOW_STATE.ON_DEFAULT;\r\n    return currentWorkflowStateForTab != REBATES_WORKFLOW_STATE.ON_SUPPRESS_POPUP;\r\n}\r\n\r\ncheckAndUpdateCampaignHoverState(campaign_hover_state, _store){\r\n    if(campaign_hover_state._counter < REBATES_CAMPAIGN_HOVER_VISIBILITY_COUNT){\r\n        return true;\r\n    }\r\n\r\n    const current_time = new Date().getTime();\r\n    if (current_time - campaign_hover_state._lastUpdateTime < REBATES_CAMPAIGN_HOVER_EXPIRATION_TIME_LIMIT) {\r\n        return false;\r\n    }else{\r\n        _store.dispatch({\r\n            type: \"REMOVE_REBATES_CAMPAIGN_HOVER_STATE\",\r\n            data: campaign_hover_state._domainName\r\n        });\r\n    }\r\n    return true;\r\n}\r\n\r\nmayShowRebatesCampaignHover(_store, _url) {\r\n    const host_domain = new URL(_url).hostname;\r\n    let campaign_hover_state = _store.getState().data.rebates_campaign_hover_states.find(item => {\r\n                                    return item._domainName == host_domain;\r\n                                });\r\n    if (campaign_hover_state != undefined\r\n        && !this.checkAndUpdateCampaignHoverState(campaign_hover_state, _store)) {\r\n            return false;\r\n    }\r\n    return true;\r\n}\r\n\r\ngetCurrentStateForTab(_tabId, _store){\r\n    const currentWorkflowState = _store.getState().data.rebates_workflowState;\r\n    return (currentWorkflowState && currentWorkflowState[_tabId])?currentWorkflowState[_tabId]:REBATES_WORKFLOW_STATE.ON_DEFAULT;\r\n}\r\n\r\nsetCurrentStateForTab(_tabId, _newState, _store){\r\n    if (_store.getState().data !=undefined && _store.getState().data.rebates_workflowState != undefined) {\r\n        const currentWorkflowState = _store.getState().data.rebates_workflowState;\r\n        currentWorkflowState[_tabId] = _newState;\r\n        _store.dispatch({type: 'SET_REBATES_WORKFLOW_STATE', data:currentWorkflowState});\r\n    } else {\r\n        _store.dispatch({type: 'SET_REBATES_WORKFLOW_STATE', data:{_tabId:0}});\r\n    }\r\n}\r\n\r\n//_url (URL Being inspected), _tabId(Id of the tab), _store (Data Store)\r\ncheckUrlForSuppression(_url, _tabId, _store){\r\n    const currentWorkflowState = this.getCurrentStateForTab(_tabId, _store);\r\n\r\n    const isURLRebateLink   = findMatchPattern(_url, [REBATES_MATCH_PATTERN, RAKUTEN_LOGIN_PATTERN, RAKUTEN_LOGIN_PATTERN_OMNI]);\r\n    const isURLAffiliateLink  = findMatchPattern(_url, this.affiliateLinks);\r\n    const isURLStoreLink      = this.findMatchedRebatesMerchantDomain(_url);\r\n    const isPaidLinkPatterns = findMatchPattern(_url, this.paidLinkPatterns);\r\n    let newWorkflowState = this.checkNewWorkflowState(isURLRebateLink, isURLAffiliateLink, isURLStoreLink, currentWorkflowState, isPaidLinkPatterns);\r\n    this.setCurrentStateForTab(_tabId, newWorkflowState, _store);\r\n}\r\n\r\ncheckNewWorkflowState(isURLRebateLink, isURLAffiliateLink, isURLStoreLink, currentWorkflowState, isPaidLinkPatterns) {\r\n    let newWorkflowState = REBATES_WORKFLOW_STATE.ON_DEFAULT;\r\n    if (isURLRebateLink) {\r\n        //If user lands on rebates.jp page\r\n        newWorkflowState = REBATES_WORKFLOW_STATE.ON_REBATES;\r\n    } else if (isURLAffiliateLink) {\r\n        if (currentWorkflowState != REBATES_WORKFLOW_STATE.ON_REBATES &&\r\n            currentWorkflowState != REBATES_WORKFLOW_STATE.ON_TRACK_URL) {\r\n            newWorkflowState = REBATES_WORKFLOW_STATE.ON_AFFILIATE_FROM_OTHER;\r\n        } else {\r\n            newWorkflowState = REBATES_WORKFLOW_STATE.ON_TRACK_URL;\r\n        }\r\n    } else if (isURLStoreLink) {\r\n        //If user lands on a store (e.g macys.com), then depending upon previous state we show or not show the popup\r\n        if (currentWorkflowState == REBATES_WORKFLOW_STATE.ON_AFFILIATE_FROM_OTHER ||\r\n            currentWorkflowState == REBATES_WORKFLOW_STATE.ON_SUPPRESS_POPUP ||\r\n            isPaidLinkPatterns) {\r\n            newWorkflowState = REBATES_WORKFLOW_STATE.ON_SUPPRESS_POPUP;\r\n        }\r\n    }\r\n    return newWorkflowState;\r\n}\r\ncheckAutoActivations(_url, _tabId, _store) {\r\n    const isMatchTrackURL = findMatchPattern(_url, this.affiliateLinks);\r\n    if (isMatchTrackURL) {\r\n        const currentWorkflowState = this.getCurrentStateForTab(_tabId, _store);\r\n        const auto_activation_info = _store.getState().data.rebates_auto_activation_info;\r\n        const tab_activation_info = auto_activation_info.filter(tab_info => tab_info.tab_id === _tabId);\r\n        if (tab_activation_info.length > 0\r\n            && tab_activation_info[0] != undefined\r\n            && currentWorkflowState === REBATES_WORKFLOW_STATE.ON_REBATES) {\r\n            const tab_ready_to_activate = {\"tab_id\": _tabId, \"is_ready_to_activate\": true}\r\n            _store.dispatch({\r\n                type: 'UPDATE_REBATES_AUTO_ACTIVATION',\r\n                data: tab_ready_to_activate\r\n            });\r\n        }\r\n    }\r\n}\r\nasync showRebatesHoverAndCampaignHover(tab_id, port, _store) {\r\n    const url = port.sender.url;\r\n    const showRebatesPopup = this.mayShowRebatesPopUp(tab_id, _store);\r\n    if (showRebatesPopup) {\r\n        let rzCookie = _store.getState().data.rakutenBarInfo_cookie;\r\n        await this.checkMetaTagIfURLGoesTOPPage(url, rzCookie, _store)\r\n        let rebates_info = this.generateRebatesInfo(url);\r\n        _store.dispatch({\r\n            type: 'SET_REBATES_INFO',\r\n            data: rebates_info\r\n        });\r\n        //auto activate the hover\r\n        this.autoActivateRebatesHover(rebates_info, tab_id, _store);\r\n        this.showRebatesHover(rebates_info, port, _store);\r\n        this.clearRebatesAutoActivationData(rebates_info, tab_id, _store);\r\n    }\r\n}\r\n\r\nautoActivateRebatesHover(rebates_info, _tabId, _store) {\r\n    const auto_activation_info = _store.getState().data.rebates_auto_activation_info;\r\n    const tab_activation_info = auto_activation_info.filter(tab_info => tab_info.tab_id === _tabId);\r\n    if (tab_activation_info.length > 0\r\n        && tab_activation_info[0] != undefined\r\n        && tab_activation_info[0].is_ready_to_activate) {\r\n        let rebates_activated_sites = _store.getState().data.rebates_activated_sites;\r\n        if (rebates_info.domainRegex.length > 0\r\n            && rebates_activated_sites.filter(item => item.domain == rebates_info.domainRegex).length === 0) {\r\n            let activated_data = {\r\n                domain: rebates_info.domainRegex,\r\n                is_popup: false,\r\n                time: new Date().getTime(),\r\n            };\r\n            _store.dispatch({\r\n                type: 'ADD_ACTIVATED_SITE',\r\n                data: activated_data\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\ncheckAndUpdateActivatedRebatesHover(rebates_info, _store){\r\n    let rebates_activated_sites = _store.getState().data.rebates_activated_sites;\r\n    let merchant_activation_info = rebates_activated_sites.filter(item => item.domain == rebates_info.domainRegex);\r\n    let is_merchant_activated = merchant_activation_info.length > 0;\r\n    let rebates_hover_status = new RebatesHoverStatus();\r\n    let is_hover_pop_up = false;\r\n    if(is_merchant_activated){\r\n        const activated_site = merchant_activation_info[0];\r\n        if (isActivatedPageAlreadyExpired(activated_site.time) === false) {\r\n            // If popup is already shown before, we dont have to do anything\r\n            if (activated_site.is_popup) {\r\n                return rebates_hover_status;\r\n            }\r\n            // We will show activated popup for first time\r\n            rebates_hover_status.is_activated = true;\r\n            is_hover_pop_up = merchant_activation_info[0].is_popup;\r\n        } else {\r\n            let activated_data = {\r\n                domain: activated_site.domain,\r\n                is_popup: false,\r\n                time: new Date().getTime(),\r\n            };\r\n            _store.dispatch({\r\n                type: 'REMOVE_EXPIRED_ACTIVATED_SITE',\r\n                data: activated_data\r\n            });\r\n        }\r\n    }\r\n\r\n    // once user closes NonActivated popup , we dont show it again anymore.\r\n    if(!rebates_hover_status.is_activated){\r\n        let closed_sites = _store.getState().data.rebates_close_popup;\r\n        for (let site of closed_sites) {\r\n            if (site == rebates_info.domainRegex) {\r\n                return rebates_hover_status;\r\n            }\r\n        }\r\n    }\r\n    rebates_hover_status.is_ready_show_up = !is_merchant_activated || (is_merchant_activated && !is_hover_pop_up);\r\n    return rebates_hover_status;\r\n}\r\n\r\nshowRebatesHover(rebates_info, port, _store) {\r\n    const extensionSetting = _store.getState().data.ExtensionSetting;\r\n    if (rebates_info.domainRegex && extensionSetting &&\r\n        (extensionSetting.BannerDisableOption == BANNER_DISABLE_OPTION.BANNER_POPUP_USE ||\r\n            extensionSetting.BannerDisableOption == BANNER_DISABLE_OPTION.BANNER_DISABLE_SEARCH)) {\r\n        if (rebates_info.tokenAvailable === false) {\r\n            _store.dispatch({\r\n                type: 'CLEAR_ACTIVATED_SITE'\r\n            });\r\n        }\r\n        let rebates_hover_status = this.checkAndUpdateActivatedRebatesHover(rebates_info, _store);\r\n        if (rebates_hover_status.is_ready_show_up) {\r\n            /**\r\n            * previously, there is a method get rebates hove images and campaign images together as the API provide these image URLs on the same end-point,\r\n            * as rebates hover doesn't depends on rebates campaign, and it may confuse people,\r\n            * I created this new method called getRebatesHoverImages\r\n            */\r\n            //get rebates hover image URL\r\n            fetch(`${REBATES_TOOLBAR_CAMPAIGN_URL}`)\r\n                .then((response) => response.json())\r\n                .then((data) => {\r\n                    let hoverImages = new RebatesHoverImages();\r\n                    let json = data;\r\n                    if (json.campaigns) {\r\n                        const images = json.campaigns.campaign;\r\n                        hoverImages.inactivated_image = (images.rebatespopupnonactiveimg === null || images.rebatespopupnonactiveimg === \"\") ? null : images.rebatespopupnonactiveimg;\r\n                        hoverImages.activated_image = (images.rebatespopupactiveimg === null || images.rebatespopupactiveimg === \"\") ? null : images.rebatespopupactiveimg;\r\n                    }\r\n\r\n                    sendMessageByPort(port, {\r\n                        rebates_popup: true,\r\n                        hover_images: hoverImages,\r\n                        rebates_info: rebates_info,\r\n                        is_activated: rebates_hover_status.is_activated\r\n                    });\r\n                });\r\n        }\r\n        const is_user_logged_in = _store.getState().data.login == \"1\";\r\n        if (is_user_logged_in && this.mayShowRebatesCampaignHover(_store, port.sender.url)) {\r\n            fetch(`${REBATES_TOOLBAR_CAMPAIGN_URL}`)\r\n                .then((response) => response.json())\r\n                .then((data) => {\r\n                    let campaignToolbar = new RebatesToolbarCampaign();\r\n                    let json = data;\r\n                    if (json.campaigns) {\r\n                        const campaign = json.campaigns.campaign;\r\n                        campaignToolbar.imageUri = (json.campaigns.campaign.imageuri === \"\") ? null : campaign.imageuri;\r\n                        campaignToolbar.linkUrl = (json.campaigns.campaign.linkurl === \"\") ? null : campaign.linkurl;\r\n                        campaignToolbar.pointsBackBgImage = (json.campaigns.campaign.rebatesbgimg === \"\") ? null : campaign.rebatesbgimg;\r\n                        this.showupCampaignIfMeetTheRequirements(port, campaignToolbar);\r\n                    }\r\n                });\r\n        }\r\n    }\r\n}\r\n\r\nclearRebatesAutoActivationData(rebates_info, tab_id, _store) {\r\n    const activated_sites = _store.getState().data.rebates_activated_sites;\r\n    if (activated_sites.findIndex(item => item.domain == rebates_info.domainRegex) > -1) {\r\n        _store.dispatch({\r\n            type: 'CLEAR_REBATES_AUTO_ACTIVATION',\r\n            data: tab_id\r\n        });\r\n    }\r\n}\r\n\r\nshowupCampaignIfMeetTheRequirements(port, toolbarCampaign){\r\n    if (toolbarCampaign.linkUrl != null) {\r\n        //as the component level cannot control the whole campaign hover actions\r\n        //we have to pass the valided data to the component\r\n        let linkUrlArray = toolbarCampaign.linkUrl.split('~');\r\n        if (linkUrlArray.length === 2) {\r\n            toolbarCampaign.forwardUrl = `${REBATES_DOMAIN_FULL_ADDRESS}${linkUrlArray[0]}`;\r\n            let textValue = linkUrlArray[1];\r\n            let textArray = textValue.split(/&|=/);\r\n            if (textArray.length >= 2) {\r\n                toolbarCampaign.campaignInfo = textArray[1];\r\n                toolbarCampaign.campaignSummary = textArray[3] ? textArray[3] : \"\";\r\n            }\r\n        }\r\n        if (toolbarCampaign.forwardUrl.length > 0 && toolbarCampaign.campaignInfo.length > 0) {\r\n            sendMessageByPort(port, {\r\n                show_rebates_campaign_hover: true,\r\n                toolbar_campaign: toolbarCampaign\r\n            });\r\n        }\r\n    }\r\n}\r\n}","import * as txml from 'txml';\n\nfunction _getElementsByTagName(tagName) {\n    const elements = [];\n    if (this.tagName === tagName) {\n        elements.push(this);\n    }\n    function getElementsByTagNameRecursive(node) {\n        if (typeof node !== 'object') {\n            return;\n        }\n        if (node.children) {\n            for (let i = 0; i < node.children.length; i++) {\n                const child = node.children[i];\n                if (child.tagName === tagName) {\n                    elements.push(child);\n                }\n                getElementsByTagNameRecursive(child);\n            }\n        }\n    }\n    getElementsByTagNameRecursive(this);\n    return elements;\n}\n\nfunction _getAttribute(name) {\n    if (this.attributes) {\n        return this.attributes[name] || \"\";\n    }\n    return \"\";\n}\n\nfunction _initiateBindsToDomTree(root) {\n    function bindRecursive(node) {\n        if (typeof node !== 'object') {\n            return;\n        }\n        node.getElementsByTagName = _getElementsByTagName.bind(node);\n        node.getAttribute = _getAttribute.bind(node);\n\n        // Because the parsed structure of txml is different from browser native DOMParser\n        // So we need to restructure textContent data from the raw txml parsed object\n        function getTextContentRecursive(node) {\n            if (typeof node === 'string') {\n                return node;\n            }\n            if (node.children) {\n                let textContent = \"\";\n                for (let i = 0; i < node.children.length; i++) {\n                    const child = node.children[i];\n                    if (typeof child === 'string') {\n                        textContent += child;\n                    } else {\n                        textContent += getTextContentRecursive(child);\n                    }\n                }\n                return textContent;\n            }\n            return \"\";\n        }\n        node.textContent = getTextContentRecursive(node);\n\n        if (node.children) {\n            for (let i = 0; i < node.children.length; i++) {\n                const child = node.children[i];\n                bindRecursive(child);\n            }\n        }\n    }\n    bindRecursive(root);\n}\n\nexport default class XmlParser{\n    constructor(response){\n        this.xmlResponse = response.trim();\n        this.xmlDoc = null;\n    }\n\n    getXmlDocument(){\n        if(this.xmlDoc == null){\n            this.xmlResponse = this.replaceNameSpace(\"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul\");\n            // Change to use txml parser (https://github.com/tobiasnickel/tXml) because web worker are not supporting DOMParser anymore\n            // 1.6kb minified + gzipped, parsing at average the same speed as native DOMParser\n            // Other DOMParser cannot work in the browser environment (for example: jsdom), because they only target node environment\n            const parsed = txml.parse(this.xmlResponse);\n            // When returned XML text has redundant <?xml version=\"1.0\" encoding=\"UTF-8\"?> tag, skip it\n            this.xmlDoc = parsed.length > 1 ? parsed[1] : parsed[0];\n            // Tradeoffs: txml only parse XML to json, it's not providing operating function such as getElementsByTagName or getAttribute,\n            // So we need to bind these functions to the json object\n            _initiateBindsToDomTree(this.xmlDoc);\n        }\n        return this.xmlDoc;\n    }\n\n    replaceNameSpace(searchString){\n        let searchPos = this.xmlResponse.indexOf(searchString);\n        if(searchPos >0){\n            return this.xmlResponse.replace(searchString, \"\");\n        }\n        return this.xmlResponse;\n    }\n\n    getAttributeValueByTagName(tagName, attribute){\n        return this.getXmlDocument().getElementsByTagName(tagName)[0].getAttribute(attribute);\n    }\n\n    getElementsByTagName(tagName){\n        return this.getXmlDocument().getElementsByTagName(tagName)[0];\n    }\n}\n","exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Buffer = require('safe-buffer').Buffer;\nvar util = require('util');\n\nfunction copyBuffer(src, target, offset) {\n  src.copy(target, offset);\n}\n\nmodule.exports = function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  BufferList.prototype.push = function push(v) {\n    var entry = { data: v, next: null };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.unshift = function unshift(v) {\n    var entry = { data: v, next: this.head };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  BufferList.prototype.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  BufferList.prototype.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n    while (p = p.next) {\n      ret += s + p.data;\n    }return ret;\n  };\n\n  BufferList.prototype.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    if (this.length === 1) return this.head.data;\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n    return ret;\n  };\n\n  return BufferList;\n}();\n\nif (util && util.inspect && util.inspect.custom) {\n  module.exports.prototype[util.inspect.custom] = function () {\n    var obj = util.inspect({ length: this.length });\n    return this.constructor.name + ' ' + obj;\n  };\n}","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","export default class User_Point{\n    constructor(){\n        this.totalPoint = '';\n        this.termPoint = '';\n        this.cash = '';\n        this.futureGrantedPoint = '';\n        this.name = '';\n        this.rank='';\n    }\n}","// ==ClosureCompiler==\n// @output_file_name default.js\n// @compilation_level SIMPLE_OPTIMIZATIONS\n// ==/ClosureCompiler==\n// module.exports = {\n//     parse: parse,\n//     simplify: simplify,\n//     simplifyLostLess: simplifyLostLess,\n//     filter: filter,\n//     stringify: stringify,\n//     toContentString: toContentString,\n//     getElementById: getElementById,\n//     getElementsByClassName: getElementsByClassName,\n//     transformStream: transformStream,\n// };\n\n/**\n * @author: Tobias Nickel\n * @created: 06.04.2015\n * I needed a small xmlparser chat can be used in a worker.\n */\n\n/**\n * @typedef tNode \n * @property {string} tagName \n * @property {object} attributes\n * @property {(tNode|string)[]} children \n **/\n\n/**\n * @typedef TParseOptions\n * @property {number} [pos]\n * @property {string[]} [noChildNodes]\n * @property {boolean} [setPos]\n * @property {boolean} [keepComments] \n * @property {boolean} [keepWhitespace]\n * @property {boolean} [simplify]\n * @property {(a: tNode, b: tNode) => boolean} [filter]\n */\n\n/**\n * parseXML / html into a DOM Object. with no validation and some failur tolerance\n * @param {string} S your XML to parse\n * @param {TParseOptions} [options]  all other options:\n * @return {(tNode | string)[]}\n */\nfunction parse(S, options) {\n    \"txml\";\n    options = options || {};\n\n    var pos = options.pos || 0;\n    var keepComments = !!options.keepComments;\n    var keepWhitespace = !!options.keepWhitespace;\n\n    var openBracket = \"<\";\n    var openBracketCC = \"<\".charCodeAt(0);\n    var closeBracket = \">\";\n    var closeBracketCC = \">\".charCodeAt(0);\n    var minusCC = \"-\".charCodeAt(0);\n    var slashCC = \"/\".charCodeAt(0);\n    var exclamationCC = '!'.charCodeAt(0);\n    var singleQuoteCC = \"'\".charCodeAt(0);\n    var doubleQuoteCC = '\"'.charCodeAt(0);\n    var openCornerBracketCC = '['.charCodeAt(0);\n    var closeCornerBracketCC = ']'.charCodeAt(0);\n\n\n    /**\n     * parsing a list of entries\n     */\n    function parseChildren(tagName) {\n        var children = [];\n        while (S[pos]) {\n            if (S.charCodeAt(pos) == openBracketCC) {\n                if (S.charCodeAt(pos + 1) === slashCC) {\n                    var closeStart = pos + 2;\n                    pos = S.indexOf(closeBracket, pos);\n\n                    var closeTag = S.substring(closeStart, pos);\n                    if (closeTag.indexOf(tagName) == -1) {\n                        var parsedText = S.substring(0, pos).split('\\n');\n                        throw new Error(\n                            'Unexpected close tag\\nLine: ' + (parsedText.length - 1) +\n                            '\\nColumn: ' + (parsedText[parsedText.length - 1].length + 1) +\n                            '\\nChar: ' + S[pos]\n                        );\n                    }\n\n                    if (pos + 1) pos += 1;\n\n                    return children;\n                } else if (S.charCodeAt(pos + 1) === exclamationCC) {\n                    if (S.charCodeAt(pos + 2) == minusCC) {\n                        //comment support\n                        const startCommentPos = pos;\n                        while (pos !== -1 && !(S.charCodeAt(pos) === closeBracketCC && S.charCodeAt(pos - 1) == minusCC && S.charCodeAt(pos - 2) == minusCC && pos != -1)) {\n                            pos = S.indexOf(closeBracket, pos + 1);\n                        }\n                        if (pos === -1) {\n                            pos = S.length;\n                        }\n                        if (keepComments) {\n                            children.push(S.substring(startCommentPos, pos + 1));\n                        }\n                    } else if (\n                        S.charCodeAt(pos + 2) === openCornerBracketCC &&\n                        S.charCodeAt(pos + 8) === openCornerBracketCC &&\n                        S.substr(pos + 3, 5).toLowerCase() === 'cdata'\n                    ) {\n                        // cdata\n                        var cdataEndIndex = S.indexOf(']]>', pos);\n                        if (cdataEndIndex == -1) {\n                            children.push(S.substr(pos + 9));\n                            pos = S.length;\n                        } else {\n                            children.push(S.substring(pos + 9, cdataEndIndex));\n                            pos = cdataEndIndex + 3;\n                        }\n                        continue;\n                    } else {\n                        // doctypesupport\n                        const startDoctype = pos + 1;\n                        pos += 2;\n                        var encapsuled = false;\n                        while ((S.charCodeAt(pos) !== closeBracketCC || encapsuled === true) && S[pos]) {\n                            if (S.charCodeAt(pos) === openCornerBracketCC) {\n                                encapsuled = true;\n                            } else if (encapsuled === true && S.charCodeAt(pos) === closeCornerBracketCC) {\n                                encapsuled = false;\n                            }\n                            pos++;\n                        }\n                        children.push(S.substring(startDoctype, pos));\n                    }\n                    pos++;\n                    continue;\n                }\n                var node = parseNode();\n                children.push(node);\n                if (node.tagName[0] === '?') {\n                    children.push(...node.children);\n                    node.children = [];\n                }\n            } else {\n                var text = parseText();\n                if (keepWhitespace) {\n                    if (text.length > 0) {\n                        children.push(text);\n                    }\n                } else {\n                    var trimmed = text.trim();\n                    if (trimmed.length > 0) {\n                        children.push(trimmed);\n                    }\n                }\n                pos++;\n            }\n        }\n        return children;\n    }\n\n    /**\n     *    returns the text outside of texts until the first '<'\n     */\n    function parseText() {\n        var start = pos;\n        pos = S.indexOf(openBracket, pos) - 1;\n        if (pos === -2)\n            pos = S.length;\n        return S.slice(start, pos + 1);\n    }\n    /**\n     *    returns text until the first nonAlphabetic letter\n     */\n    var nameSpacer = '\\r\\n\\t>/= ';\n\n    function parseName() {\n        var start = pos;\n        while (nameSpacer.indexOf(S[pos]) === -1 && S[pos]) {\n            pos++;\n        }\n        return S.slice(start, pos);\n    }\n    /**\n     *    is parsing a node, including tagName, Attributes and its children,\n     * to parse children it uses the parseChildren again, that makes the parsing recursive\n     */\n    var NoChildNodes = options.noChildNodes || ['img', 'br', 'input', 'meta', 'link', 'hr'];\n\n    function parseNode() {\n        pos++;\n        const tagName = parseName();\n        const attributes = {};\n        let children = [];\n\n        // parsing attributes\n        while (S.charCodeAt(pos) !== closeBracketCC && S[pos]) {\n            var c = S.charCodeAt(pos);\n            if ((c > 64 && c < 91) || (c > 96 && c < 123)) {\n                //if('abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'.indexOf(S[pos])!==-1 ){\n                var name = parseName();\n                // search beginning of the string\n                var code = S.charCodeAt(pos);\n                while (code && code !== singleQuoteCC && code !== doubleQuoteCC && !((code > 64 && code < 91) || (code > 96 && code < 123)) && code !== closeBracketCC) {\n                    pos++;\n                    code = S.charCodeAt(pos);\n                }\n                if (code === singleQuoteCC || code === doubleQuoteCC) {\n                    var value = parseString();\n                    if (pos === -1) {\n                        return {\n                            tagName,\n                            attributes,\n                            children,\n                        };\n                    }\n                } else {\n                    value = null;\n                    pos--;\n                }\n                attributes[name] = value;\n            }\n            pos++;\n        }\n        // optional parsing of children\n        if (S.charCodeAt(pos - 1) !== slashCC) {\n            if (tagName == \"script\") {\n                var start = pos + 1;\n                pos = S.indexOf('</script>', pos);\n                children = [S.slice(start, pos)];\n                pos += 9;\n            } else if (tagName == \"style\") {\n                var start = pos + 1;\n                pos = S.indexOf('</style>', pos);\n                children = [S.slice(start, pos)];\n                pos += 8;\n            } else if (NoChildNodes.indexOf(tagName) === -1) {\n                pos++;\n                children = parseChildren(tagName);\n            } else {\n                pos++;\n            }\n        } else {\n            pos++;\n        }\n        return {\n            tagName,\n            attributes,\n            children,\n        };\n    }\n\n    /**\n     *    is parsing a string, that starts with a char and with the same usually  ' or \"\n     */\n\n    function parseString() {\n        var startChar = S[pos];\n        var startpos = pos + 1;\n        pos = S.indexOf(startChar, startpos);\n        return S.slice(startpos, pos);\n    }\n\n    /**\n     *\n     */\n    function findElements() {\n        var r = new RegExp('\\\\s' + options.attrName + '\\\\s*=[\\'\"]' + options.attrValue + '[\\'\"]').exec(S);\n        if (r) {\n            return r.index;\n        } else {\n            return -1;\n        }\n    }\n\n    var out = null;\n    if (options.attrValue !== undefined) {\n        options.attrName = options.attrName || 'id';\n        var out = [];\n\n        while ((pos = findElements()) !== -1) {\n            pos = S.lastIndexOf('<', pos);\n            if (pos !== -1) {\n                out.push(parseNode());\n            }\n            S = S.substr(pos);\n            pos = 0;\n        }\n    } else if (options.parseNode) {\n        out = parseNode();\n    } else {\n        out = parseChildren('');\n    }\n\n    if (options.filter) {\n        out = filter(out, options.filter);\n    }\n\n    if (options.simplify) {\n        return simplify(Array.isArray(out) ? out : [out]);\n    }\n\n    if (options.setPos) {\n        out.pos = pos;\n    }\n\n    return out;\n}\n\n/**\n * transform the DomObject to an object that is like the object of PHP`s simple_xmp_load_*() methods.\n * this format helps you to write that is more likely to keep your program working, even if there a small changes in the XML schema.\n * be aware, that it is not possible to reproduce the original xml from a simplified version, because the order of elements is not saved.\n * therefore your program will be more flexible and easier to read.\n *\n * @param {tNode[]} children the childrenList\n */\nfunction simplify(children) {\n    var out = {};\n    if (!children.length) {\n        return '';\n    }\n\n    if (children.length === 1 && typeof children[0] == 'string') {\n        return children[0];\n    }\n    // map each object\n    children.forEach(function(child) {\n        if (typeof child !== 'object') {\n            return;\n        }\n        if (!out[child.tagName])\n            out[child.tagName] = [];\n        var kids = simplify(child.children);\n        out[child.tagName].push(kids);\n        if (Object.keys(child.attributes).length && typeof kids !== 'string') {\n            kids._attributes = child.attributes;\n        }\n    });\n\n    for (var i in out) {\n        if (out[i].length == 1) {\n            out[i] = out[i][0];\n        }\n    }\n\n    return out;\n}\n\n/**\n * similar to simplify, but lost less\n *\n * @param {tNode[]} children the childrenList\n */\nfunction simplifyLostLess(children, parentAttributes = {}) {\n    var out = {};\n    if (!children.length) {\n        return out;\n    }\n\n    if (children.length === 1 && typeof children[0] == 'string') {\n        return Object.keys(parentAttributes).length ? {\n            _attributes: parentAttributes,\n            value: children[0]\n        } : children[0];\n    }\n    // map each object\n    children.forEach(function(child) {\n        if (typeof child !== 'object') {\n            return;\n        }\n        if (!out[child.tagName])\n            out[child.tagName] = [];\n        var kids = simplifyLostLess(child.children || [], child.attributes);\n        out[child.tagName].push(kids);\n        if (Object.keys(child.attributes).length) {\n            kids._attributes = child.attributes;\n        }\n    });\n\n    return out;\n}\n/**\n * behaves the same way as Array.filter, if the filter method return true, the element is in the resultList\n * @params children{Array} the children of a node\n * @param f{function} the filter method\n */\nfunction filter(children, f, dept = 0, path = '') {\n    var out = [];\n    children.forEach(function(child, i) {\n        if (typeof(child) === 'object' && f(child, i, dept, path)) out.push(child);\n        if (child.children) {\n            var kids = filter(child.children, f, dept + 1, (path ? path + '.' : '') + i + '.' + child.tagName);\n            out = out.concat(kids);\n        }\n    });\n    return out;\n}\n/**\n * stringify a previously parsed string object.\n * this is useful,\n *  1. to remove whitespace\n * 2. to recreate xml data, with some changed data.\n * @param {tNode} O the object to Stringify\n */\nfunction stringify(O) {\n    var out = '';\n\n    function writeChildren(O) {\n        if (O) {\n            for (var i = 0; i < O.length; i++) {\n                if (typeof O[i] == 'string') {\n                    out += O[i].trim();\n                } else {\n                    writeNode(O[i]);\n                }\n            }\n        }\n    }\n\n    function writeNode(N) {\n        out += \"<\" + N.tagName;\n        for (var i in N.attributes) {\n            if (N.attributes[i] === null) {\n                out += ' ' + i;\n            } else if (N.attributes[i].indexOf('\"') === -1) {\n                out += ' ' + i + '=\"' + N.attributes[i].trim() + '\"';\n            } else {\n                out += ' ' + i + \"='\" + N.attributes[i].trim() + \"'\";\n            }\n        }\n        if (N.tagName[0] === '?') {\n            out += '?>';\n            return;\n        }\n        out += '>';\n        writeChildren(N.children);\n        out += '</' + N.tagName + '>';\n    }\n    writeChildren(O);\n\n    return out;\n}\n\n/**\n * use this method to read the text content, of some node.\n * It is great if you have mixed content like:\n * this text has some <b>big</b> text and a <a href=''>link</a>\n * @return {string}\n */\nfunction toContentString(tDom) {\n    if (Array.isArray(tDom)) {\n        var out = '';\n        tDom.forEach(function(e) {\n            out += ' ' + toContentString(e);\n            out = out.trim();\n        });\n        return out;\n    } else if (typeof tDom === 'object') {\n        return toContentString(tDom.children)\n    } else {\n        return ' ' + tDom;\n    }\n}\nfunction getElementById(S, id, simplified) {\n    var out = parse(S, {\n        attrValue: id\n    });\n    return simplified ? tXml.simplify(out) : out[0];\n}\nfunction getElementsByClassName(S, classname, simplified) {\n    const out = parse(S, {\n        attrName: 'class',\n        attrValue: '[a-zA-Z0-9- ]*' + classname + '[a-zA-Z0-9- ]*'\n    });\n    return simplified ? tXml.simplify(out) : out;\n}\n\nexport { filter, getElementById, getElementsByClassName, parse, simplify, simplifyLostLess, stringify, toContentString };\n","import { parse } from './txml.mjs';\nimport through2 from 'through2';\n\nfunction transformStream(offset, parseOptions) {\n    if(!parseOptions) parseOptions = {};\n    if (typeof offset === 'string') {\n        offset = offset.length;\n    }\n\n    var position = offset || 0;\n    var data = '';\n    const stream = through2({ readableObjectMode: true }, function (chunk, enc, callback) {\n        data += chunk;\n        var lastPos = 0;\n        do {\n            position = data.indexOf('<', position) + 1;\n            \n            if (!position) {\n                position = lastPos;\n                return callback();            }\n            if (data[position] === '/') {\n                position = position + 1;\n                lastPos = position;\n                continue;\n            }\n            if (data[position] === '!' && data[position + 1] === '-' && data[position + 2] === '-') {\n                const commentEnd = data.indexOf('-->', position + 3);\n                if (commentEnd === -1) {\n                    data = data.slice(lastPos);\n                    position = 0;\n                    return callback();                }\n\n                if(parseOptions.keepComments){\n                    this.push(data.substring(position-1, commentEnd+3));\n                }\n\n                position = commentEnd + 1;\n                lastPos = commentEnd;\n                continue;\n            }\n\n            var res = parse(data, {...parseOptions, pos: position - 1, parseNode: true, setPos: true });\n            position = res.pos;\n            //console.log(res, res.pos)\n            if (position > (data.length - 1) || position < lastPos) {\n                data = data.slice(lastPos);\n                position = 0;\n                return callback();            } else {\n                this.push(res);\n                lastPos = position;\n            }\n        } while (1);\n    });\n\n    return stream;\n}\n\nexport { transformStream };\n"],"sourceRoot":""}